(function(){define("collections/og_files",["tibbr","modules/common/collections/og_files"],function(e,t){return t.extend({})}),define("collections/links",["tibbr","modules/common/collections/links"],function(e,t){return t.extend({})}),define("collections/resources",["jquery","tibbr","modules/common/collections/resources"],function(e,t,n){return n.extend({})}),define("models/calendar",["underscore","tibbr","modules/common/models/calendar"],function(e,t,n){return n.extend({})}),define("models/question",["underscore","tibbr","modules/common/models/question"],function(e,t,n){return n.extend({})}),define("models/resource_action",["underscore","tibbr","modules/common/models/resource_action"],function(e,t,n){return n.extend({})}),define("models/announcement",["underscore","tibbr","collections/og_files","collections/links","collections/subjects","collections/resources","models/user","models/calendar","models/question","models/resource_action","require/moment"],function(e,t,n,r,i,s,o,u,a,f,l){var c=t.Model.extend({baseName:"messages",defaults:{modelType:"Announcement",links:[],assets:[],subjects:[]},initialize:function(){e.bindAll(this,"type","canRemove","postedAt","postedTo","showUrl","getContent"),this.get("subjects").length>0&&(this.subjects=new i(this.get("subjects"))),this.get("links").length>0&&(this.links=new r(this.get("links"))),this.get("user")&&(this.user=new o(this.get("user"))),this.get("msg_type")==="calendar"&&(this.calendar=new u(this.get("calendar"))),this.get("msg_type")==="question"&&(this.question=new a(this.get("question"))),this.get("eog_action")&&(this.eog_action=new f(this.get("eog_action"))),this.parseResources()},type:function(){var e=this.get("msg_type");switch(e){case"question":return"poll";case"calendar":if(this.meetingResource())return"meeting";return"calendar";case"plain":if(this.meetingResource())return"meeting";if(this.eog_action)return"eogAction";if(this.assets.length>0)return this.assets.length>0&&this.assets.first().isImage()?"image":"asset";if(this.get("links").length>0)return"link";return"post";case"post":return"link"}},postedTo:function(){return(this.subjects||[]).map(function(e){var t=e.get("stype")==="system"?"people":"subject";return{icon:t+"-icon",name:e.get("display_name"),url:e.showUrl()}})},postedWith:function(){var n=this.subjects;if(this._postedWith)return this._postedWith;var r=[],i=[],s=this._params(),o=s.controller==="subjects",u=parseInt(s.id),a=s.controller==="users",f=function(e){var t=e.isUser()?e.userShowProfileUrl(e.get("user_id")):e.showUrl(),n=e.isUser()?"people":"subject";return{name:e.get("display_name"),url:t,image:e.image(1),user:e.isUser(),icon:n}};return n.length===1?r.push(n.first()):n.each(function(n){n.get("user_id")===t.currentUser.id||a&&n.get("user_id")===u||o&&n.id===u||e.indexOf(n.actions(),"subscribe")===-1?r.push(n):i.push(n)}),this._postedWith={},r=e.map(r,function(e){return f(e)}),i=e.map(i,function(e){return f(e)}),this._postedWith.knowList=e.sortBy(r,function(e){return!e.user}),this._postedWith.unKnownList=e.sortBy(i,function(e){return!e.user}),this._postedWith},postedAt:function(){return this.displayDate(l)},showUrl:function(){return this._url("messages/"+this.id)},canRemove:function(){return!window.gadget&&(this.canRemoveGlobalObject()||this.canRemoveSubjectObject())},canRemoveGlobalObject:function(){return e.include(this.get("actions").split(","),"remove_global_announcement")},canRemoveSubjectObject:function(){return e.include(this.get("actions").split(","),"remove_subject_announcement")},destroy:function(e,n){var r=this;this.action("delete_announcement","delete",{data:{announcement:{announcement_type:e,subject_id:n}},complete:function(e){e.status===200&&(r.trigger("actions:change"),t.Event.trigger("announcement:change",{subjectId:n}))}})},getContent:function(n){var r=this.get("content");return n===undefined?370:n,r.length<n?t.Helper.autoLink(r.replace(/\n/g,"<br/>")):e.str.prune(r,n,"<a class='continued' href='"+this.showUrl()+"' >"+t.translate("message.continued")+"</a>")},parseResources:function(){var t=this.get("resources"),r=e.where(t,{type:"og:file"})||[],i=e.reject(t,{type:"og:file"})||[];this.assets=(new n)._set(r),this.resources=(new s)._set(i)},meetingResource:function(){return this.resources.detect(function(e){return e.get("type")==="og:meeting"})},for_template:{postedAt:"postedAt",canRemove:"canRemove"}});return e.extend(c.prototype,t.Modules.Model.RichContent),c}),define("collections/announcements",["tibbr","models/announcement"],function(e,t){return e.Collection.extend({className:"announcements",model:t})}),define("collections/global_announcement",["jquery","tibbr","collections/announcements"],function(e,t,n){return n.extend({className:"global_announcements",tibbrURL:{controller:"users",action:"global_announcements"}})}),define("collections/subject_announcement",["jquery","tibbr","collections/announcements"],function(e,t,n){return n.extend({className:"subject_announcements",tibbrURL:{controller:"users",action:"subject_announcements"}})}),define("collections/recent_subjects",["jquery","tibbr","collections/subjects"],function(e,t,n){return n.extend({className:"recent_subjects",tibbrURL:{controller:"subjects",action:"recent_subjects"}})}),define("collections/popular_subjects",["jquery","tibbr","collections/subjects"],function(e,t,n){return n.extend({className:"popular_subjects",tibbrURL:{controller:"users",action:"subject_trend"}})}),define("models/analytics_node",["underscore","tibbr","require/moment"],function(e,t,n){return t.Model.extend({baseName:"analytics_f_node",cNodes:function(){return this.get("c_nodes")},image:function(e){var t=this.get("image")||this.get("profile_image_url")||"";return this.asset(t.split(",")[e])},createdDate:function(){var e=this.get("created_at");return e?n(e).format("MMM Do, YYYY"):""},city:function(){return this.get("city")},name:function(){return this.get("name")||this.get("display_name")||""}})}),define("collections/analytics_nodes",["jquery","tibbr","models/analytics_node"],function(e,t,n){return t.Collection.extend({className:"AnalyticsFrontNodes",model:n,messages:function(){return this.find(function(e){return e.get("name")==="messages"})},replies:function(){return this.find(function(e){return e.get("name")==="replies"})},hotTopic:function(){return this.find(function(e){return e.get("name")==="parent_id"})}})}),define("models/chart_data",["underscore","tibbr","models/user","models/subject"],function(e,t,n,r){return t.Model.extend({baseName:"chart_data",parse:function(e){var t=e[0];return t&&(this.facet=t.json_class,t.json_class==="User"?this.user=new n(t):this.subject=new r(t)),e}})}),define("collections/chart_data",["jquery","tibbr","collections/analytics_nodes","models/chart_data"],function(e,t,n,r){return n.extend({className:"chart_data",model:r,tibbrURL:{controller:"analytics",action:"chart_data"},parse:function(e){return e=e||{},this.data=e,e.rows}})}),define("hbs!templates/common/remove_sidebar",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+="\n    <p><b>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.are_you_sure",u):a.call(t,"t","common.right_bar.are_you_sure",u)))+'</b></p>\n    <p class="confirm-msg">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.sidebar_edit",u):a.call(t,"t","common.right_bar.sidebar_edit",u)))+'</p>\n    <p class="action-links"><a class="btn btn-primary remove_button" href="#">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove_qtip",u):a.call(t,"t","common.right_bar.remove_qtip",u)))+"</a> <a class='nevermind'>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.nevermind",u):a.call(t,"t","common.right_bar.nevermind",u)))+"</a>\n    </p>",s})}),define("views/common/remove_sidebar",["jquery","underscore","tibbr","hbs!templates/common/remove_sidebar"],function(e,t,n,r){return n.View.extend({className:"confirmation-tip hidden",render:function(){return this.appendTemplate(r),this}})}),define("views/common/preference_view",["jquery","underscore","tibbr","views/common/remove_sidebar"],function(e,t,n,r){return n.View.extend({removeWidgetTemplate:'<i class="ui-inline-icon js-remove-widget close-icon" title="'+I18n.t("subject.widgets.remove")+'"></i>',initialize:function(){this.nav=this.options.nav||{},t.bindAll(this,"setClose","updatePreference","toggleDIv","hideFromWall","toggleOption","neverMind","qtip","removeWidget","toggleRemove"),this.$el.on("mouseover",this.toggleRemove),this.$el.on("mouseout",this.toggleRemove),this.$el.on("mouseout",".see-more",this.toggleOption),this.$el.on("mouseover",".see-more",this.toggleOption),this.$el.on("click",".js-remove-widget",this.removeWidget)},updatePreference:function(){n.currentUser.createOrUpdatePref("webclient.right_nav",this.nav.key,this.$el.hasClass("collapsed")?0:1)},setClose:function(){this.isClosed()&&(this.$(".js-"+this.nav.key).hide(),this.$el.addClass("collapsed"))},toggleOption:function(e){var t=this.$("a.remove-widget");e.type==="mouseover"?t.removeClass("hidden"):t.addClass("hidden")},toggleRemove:function(e){var t=this.$("i.js-remove-widget");e.type==="mouseover"?t.show():t.hide()},isClosed:function(){var e=this.nav.key,r=t.detect(n.currentUser.preferences.inGroup("webclient.right_nav"),function(t){return t.get("name")===e});return t.isUndefined(r)&&this.nav.collapse?!0:r?parseInt(r.get("value"))===0:!1},setToggle:function(){return this.$el.append(this.initChild(r,{parent:this}).render().el),this.nav.can_remove===!1?this.$(".remove-widget").remove():(this.$(".remove-widget").addClass("hidden"),this.qtip()),this.nav.key!=="announcement"&&(this.setClose(),this.$("h3").on("click",this.toggleDIv)),this.nav.removeWidget&&this.$("h3").first().append(this.removeWidgetTemplate),this.$(".js-remove-widget").hide(),!1},handelEmpty:function(){if(this.nav.empty_text){var e='<div class="empty-well"><p> '+I18n.t("common.right_bar.empty_widget",{name:(this.nav.title||this.nav.key).toLowerCase()})+"</p></div>";this.$(".js-"+this.nav.key).html(e)}else this.$el.hide()},toggleDIv:function(n){if(e(n.target).hasClass("js-remove-widget"))return;n.preventDefault();var r=this.$(".js-"+this.nav.key),i=this.$el,s=i.hasClass("collapsed");s===!0?(r.slideDown(),i.removeClass("collapsed")):s===!1&&(r.slideUp(),i.addClass("collapsed")),t.defer(this.updatePreference)},hideFromWall:function(){return n.currentUser.createOrUpdatePref("webclient.right_nav",this.nav.key,"-1"),this.remove(),!1},neverMind:function(){return this.$("a.remove-widget").qtip("hide"),!1},removeWidget:function(e){return e.preventDefault(),this.remove(),this.parent.removeWidget(this.nav)},qtip:function(){var t=this,n=e(".confirmation-tip",e(this.el));this.$("a.remove-widget").qtip({position:{at:"bottom center",my:"top center",viewport:e(window)},show:{event:"click",solo:!0},hide:"unfocus",events:{show:function(n,r){e(r.elements.content).find("a.remove_button").on("click",t.hideFromWall).end().find("a.nevermind").on("click",t.neverMind).end().on("mouseover",function(){t.$("a.remove-widget").removeClass("hidden")})},hide:function(n,r){e(r.elements.content).find("a.remove_button").off("click",t.hideFromWall).end().find("a.nevermind").off("click",t.neverMind).end().off("mouseover",function(){t.$("a.remove-widget").removeClass("hidden")})}},style:{classes:"menu-tip ui-tibbr-tip qtip-light qtip-shadow",tip:{corner:!0,mimic:!1,method:!0,width:10,height:10,border:!0,offset:0}},content:{text:n}}).click(function(e){e.preventDefault()})}})}),define("hbs!templates/home/share_on_tibbr",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3 class="share_on_tibbr">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.share_on_tibbr.title",u):a.call(t,"t","home.share_on_tibbr.title",u)))+'<i class="left-corner"></i><i\r\n        class="ui-inline-icon arrow-up rfloat"></i></h3>\r\n<div class="wrap js-share_on_tibbr">\r\n    <div class="share-wrap">\r\n		<span class="tibbr-share-btn">\r\n			<a title="',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.share_on_tibbr.title",u):a.call(t,"t","home.share_on_tibbr.title",u)))+'" class="share_btn" id="ShareonTibbrBtn" href="#">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.share_on_tibbr.button",u):a.call(t,"t","home.share_on_tibbr.button",u)))+'</a>\r\n		</span>\r\n\r\n        <p></p>\r\n\r\n    </div>\r\n    <p class="see-more"><a href="#" class="remove-widget">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",u):a.call(t,"t","common.right_bar.remove",u)))+"</a></p>\r\n</div>\r\n",s})}),define("views/home/share_on_tibbr",["jquery","tibbr","views/common/preference_view","hbs!templates/home/share_on_tibbr"],function(e,t,n,r){return n.extend({className:"share_on_tibbr block",initialize:function(){_.bindAll(this,"render"),n.prototype.initialize.call(this)},events:{"click a#ShareonTibbrBtn":"disableShareBtn"},render:function(){this.$el.html(this.renderTemplate(r));var n=t.appConfig("site","config","site_root"),i=n+"/connect/js/tibbr-share.js",s=n+"/connect/js/tibbr-comments.js",o="javascript:void((function(){javascript:void((function(){var e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('tibbr_host', '"+n+"');e.setAttribute('id','tibbr_share_script');e.setAttribute('src', '"+i+"');document.body.appendChild(e);})());})());";return this.$el.find(".share_btn").attr("href",o),this.$el.find(".share-wrap p").html(e.browser.msie?this.t("home.share_on_tibbr.add_to_favorites"):this.t("home.share_on_tibbr.drag_this_button")),this.setToggle(),this},disableShareBtn:function(t){return e.browser.msie?alert(this.t("home.share_on_tibbr.drag_me_to_the_favorites_bar")):alert(this.t("home.share_on_tibbr.drag_me_to_the_bookmarks_bar")),!1}})}),define("hbs!templates/home/customize_nav",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+="\n<h3>",(i=n.header)?i=i.call(e,{hash:{},data:t}):(i=e&&e.header,i=typeof i===a?i.call(e,{hash:{},data:t}):i),r+=f(i)+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\n ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;o=n["if"].call(t,t&&t.header,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+='\n<div class="js-',(o=n.key)?o=o.call(t,{hash:{},data:i}):(o=t&&t.key,o=typeof o===a?o.call(t,{hash:{},data:i}):o),s+=f(o)+" wrap\">\n    <iframe src='"+f((o=t&&t.url,typeof o===a?o.apply(t):o))+'\' width="98%"></iframe>\n    <p class="see-more"><a href="#" class="remove-widget">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",u):c.call(t,"t","common.right_bar.remove",u)))+"</a></p>\n</div>",s})}),define("views/home/customize_nav",["jquery","underscore","tibbr","views/common/preference_view","hbs!templates/home/customize_nav"],function(e,t,n,r,i){return r.extend({className:"block",initialize:function(e){t.bindAll(this,"render"),this._super(),this.nav=this.options.nav,this.buildUrl(),this.nav.header=this.options.header,this.$el.attr("id","js-app-"+this.cid)},render:function(){var e=this.nav,t=e.url.indexOf("?")>0?"&":"?";return e.url+=t+"cid="+this.cid,this.$el.html(this.renderTemplate(i,e)).addClass(this.nav.key),this.$el.find("iframe").attr({border:0,id:this.cid,frameBorder:0,height:this.nav.height||300,style:this.nav.style||""}),this.setToggle(),this},buildUrl:function(){var e=t.templateSettings.interpolate,r=window.Tibbr;window.Tibbr=n,t.templateSettings.interpolate=/\{\{(.+?)\}\}/g,this.nav.url=t.template(this.nav.url)(),window.Tibbr=r,t.templateSettings.interpolate=e}})}),define("models/user_activity",["underscore","tibbr"],function(e,t){return t.Model.extend({baseName:"userActivity",initialize:function(){e.bindAll(this)},image:function(){return this._path("images/bubble/"+this.get("name")+".png")},url:function(){switch(this.get("name")){case"video_tutorials":return this.link("learn_tibbr");case"configure_mobile":return"#";case"update_profile":return t.url("users/"+t.currentUser.id+"/edit");case"follow_users":return t.url("explore/people_directory");case"subscribe_subjects":return t.url("subjects/directory");case"configure_channel_notifications":return t.url("users/"+t.currentUser.id+"/message_delivery");case"configure_event_streams":return t.url("apps/");case"documentation":return this.get("append_root")?this._path(this.link("documentation")):this.link("documentation")}},text:function(){return t.translate("home.right_tips."+this.get("name"),{context:t.context()})},status:function(){return this.get("status")},link:function(n){return(e.detect(t.appConfig("webui","config","welcome_panel","links"),function(e){return e.name===n})||{}).link||"#"},for_template:{url:"url"}})}),define("collections/user_activities",["jquery","tibbr","models/user_activity"],function(e,t,n){return t.Collection.extend({className:"userActivities",model:n,tibbrURL:{controller:"users",action:"user_activities"},parse:function(e){this.value=e.value.split("%")[0];var t=e.tasks;return t}})}),define("text!templates/home/tibbr_download.html",[],function(){return'<div class="tour-dialog tibbr-for-devices" id="video-carousel">\r\n<h2>${t(\'home.right_tips.mobile.get_tibbr\')}</h2>\r\n<table>\r\n  <tbody><tr>\r\n     <td class="big-icon">\r\n      <a onclick="" href="${model.desktopPageUrl()}"><img src="${model.desktopImagePath()}" alt="Desktop"></a>\r\n    </td>\r\n    <td class="big-icon"><a href="${model.iphoneStaticPageUrl()}" id="ipad-link"><img src="${model.ipadImagePath()}" alt="I-pad"></a></td>\r\n    <td class="small-icon"><a href="${model.iphoneStaticPageUrl()}" id="iphone-link"><img src="${model.iphoneImagePath()}" alt="I-phone"></a></td>\r\n    <td class="small-icon"><a href="${model.blackberryStaticPageUrl()}" id="bb-phone-link"><img src="${model.bbPhoneImagePath()}" alt="Bb-phone"></a></td>\r\n    <td class="small-icon"><a href="${model.androidStaticPageUrl()}" id="android-link"><img src="${model.androidImagePath()}" alt="Android-mobile"></a></td>\r\n  </tr>\r\n  <tr>\r\n    <td><a href="${model.desktopPageUrl()}">${t(\'home.right_tips.mobile.desktop\')}</a></td>\r\n    <td><a href="${model.iphoneStaticPageUrl()}">${t(\'home.right_tips.mobile.iPad\')}</a></td>\r\n    <td><a href="${model.iphoneStaticPageUrl()}">${t(\'home.right_tips.mobile.iPhone\')}</a></td>\r\n    <td><a href="${model.blackberryStaticPageUrl()}">${t(\'home.right_tips.mobile.blackBerry\')}</a></td>\r\n    <td><a href="${model.androidStaticPageUrl()}">${t(\'home.right_tips.mobile.android\')}</a></td>\r\n  </tr>\r\n</tbody>\r\n</table>\r\n<div class="tips-wrap">\r\n<p class="title">${t(\'home.right_tips.quick_tips.header\')}</p>\r\n  <ol>\r\n    <li class="quick-tips">\r\n      {{=  t(\'home.right_tips.quick_tips.step_1\',{host: window.location.host}) }}\r\n    </li>\r\n    <li class="quick-tips">\r\n     ${t(\'home.right_tips.quick_tips.step_2\')}\r\n    </li>\r\n    <li class="quick-tips">\r\n      ${t(\'home.right_tips.quick_tips.step_3\')}\r\n    </li>\r\n  </ol>\r\n</div>\r\n</div>'}),define("views/home/tibbr_download",["jquery","underscore","tibbr","text!templates/home/tibbr_download.html"],function(e,t,n,r){return n.View.extend({events:{"click a#ipad-link":"closeColorbox","click a#iphone-link":"closeColorbox","click a#bb-phone-link":"closeColorbox","click a#android-link":"closeColorbox"},initialize:function(){t.bindAll(this,"render")},render:function(){return this.$el.html(this.template.render(r,{model:this.options.model})),this},closeColorbox:function(){e.colorbox.close()}})}),define("hbs!templates/home/new_to_tibbr_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class= "bubble_popup">\n    <a  href="'+a((o=(o=t&&t.model,o==null||o===!1?o:o.url),typeof o===u?o.apply(t):o))+'">\n      <i class="ui-inline-icon check-icon"></i> <!-- Part of new UI -->\n      <!-- <img src="${model.image}" alt=${model.get(\'name\')}>   Not needed in new UI -->\n      '+a((o=(o=t&&t.model,o==null||o===!1?o:o.display_text),typeof o===u?o.apply(t):o))+"\n    </a>\n</div>\n",s})}),define("models/static",["underscore","tibbr"],function(e,t){return t.Model.extend({baseName:"static",initialize:function(){e.bindAll(this)},getiphoneImage:function(){return this._path("images/app-store.png")},getAndroidImage:function(){return this._path("images/android-market.png")},appleUrl:function(){return"http://itunes.apple.com/us/app/tibbr/id365376956?mt=8"},androidUrl:function(){return"https://play.google.com/store/apps/details?id=com.tibco.tibbr.android&hl=en"},blackberryUrl:function(){return"http://appworld.blackberry.com/webstore/content/20057/?lang=EN"},blackberryTibbrUrl45:function(){return"/bb4.5/tibbr.jad"},blackberryTibbrUrl50:function(){return"/bb5.0/tibbr.jad"},androidTibbrUrl:function(){return"/android/tibbr-release.apk"},tibbrUrl:function(){return"http://tibco.tibbr.com/tibbr"},desktopPageUrl:function(){return e.detect(t.appConfig("webui","config","welcome_panel","links"),function(e){return e.name==="tibbr_desktop"}).download_links[t.Helper.OSName]},iphoneStaticPageUrl:function(){return this._path("/static_pages/iphone")},blackberryStaticPageUrl:function(){return this._path("/static_pages/blackberry")},androidStaticPageUrl:function(){return this._path("/static_pages/android")},desktopImagePath:function(){return this._path("images/tour/desktop.jpg")},ipadImagePath:function(){return this._path("images/tour/i-pad.jpg")},iphoneImagePath:function(){return this._path("images/tour/i-phone.jpg")},bbPhoneImagePath:function(){return this._path("images/tour/bb-phone.jpg")},androidImagePath:function(){return this._path("images/tour/android-mobile.jpg")}})}),define("views/home/new_to_tibbr_list_item",["jquery","underscore","tibbr","views/home/tibbr_download","hbs!templates/home/new_to_tibbr_list_item","modules/overlay","models/static"],function(e,t,n,r,i,s,o){return n.View.extend({tagName:"li",qtipConfig:n.qtipConfigs.popup,initialize:function(){t.bindAll(this,"render","bind")},events:{"click a.mobile":"getOverlay","click a.video":"getVideo","click a.document":"getVideo"},render:function(){return this.$el.html(this.renderTemplate(i,{model:this.model})),this.model.get("name")==="documentation"&&(this.$el.find("a").addClass("document"),this.$el.find("a").attr("target","_blank")),this.model.get("name")==="video_tutorials"&&this.$el.find("a").addClass("video"),this.model.get("name")==="configure_mobile"&&this.$el.find("a").addClass("mobile"),this.bind(),this.model.get("status")&&this.$el.addClass("checked"),this},bind:function(){var e=this;this.$(".bubble_popup").find("a").not(".document").qtip({content:{text:function(){return e.model.text}},position:{my:"right center",at:"left center",adjust:{resize:!0}},show:{solo:!0},hide:{fixed:!0},style:{width:280,classes:"profile-progress-tips qtip-light qtip-shadow",tip:{width:15,height:20}}})},getOverlay:function(){this.check(this.model.get("name"));var e=new o;return s.view(this.initChild(r,{model:e}).render().el),s.resize(),!1},getVideo:function(){this.check(this.model.get("name"))},check:function(t){return this.model.get("value")==="0%"&&(this.$el.addClass("checked"),e.post(n.path("/users/"+n.currentUser.id+"/update_preference.json"),{_method:"PUT",user_preference:{group_key:"user_activity",name:t,value:1}})),!1}})}),define("hbs!templates/home/new_to_tibbr_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<h3 class="new_to_tibbr"><i class="left-corner"></i>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"home.new_to_tibbr",a):f.call(t,"t","home.new_to_tibbr",a)))+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\r\n<div class="wrap js-new_to_tibbr phm pvm">\r\n    <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"home.your_progress",a):f.call(t,"t","home.your_progress",a)))+'</p>\r\n    <table class="profile-progress-wrap">\r\n      <tbody><tr>\r\n        <td class="profile-completion-wrap profile-status">\r\n          <div class="profile-completion profile-completion-bar">\r\n            <div style="width: 0px;" class="progress-bar-green"></div>\r\n          </div>\r\n        </td>\r\n        <td><span class="completion-percentage"><strong>',(u=n.collection_value)?u=u.call(t,{hash:{},data:i}):(u=t&&t.collection_value,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</strong>%</span></td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class="tips">\r\n        <ul class="bubble_list check-list pvm">\r\n        </ul>\r\n    </div>\r\n    <p class="see-more"><a href="#" class="remove-widget">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",a):f.call(t,"t","common.right_bar.remove",a)))+"</a></p>\r\n</div><!-- end of .wrap -->",s})}),define("views/home/new_to_tibbr_list",["jquery","underscore","tibbr","collections/user_activities","models/user_activity","views/common/preference_view","views/home/new_to_tibbr_list_item","hbs!templates/home/new_to_tibbr_list"],function(e,t,n,r,i,s,o,u){return s.extend({initialize:function(e){t.bindAll(this,"render"),this.collection=new r,this.collection.scopeId=n.currentUser.id,s.prototype.initialize.call(this)},render:function(){var e=this.collection,t=this;return e.fetch().success(function(){t.$el.html(t.renderTemplate(u,{collection_value:t.collection.value}));var n=t.$(".check-list");e.each(function(r){n.append(t.initChild(o,{model:r,collection:e}).render().el)}),t.completionStat(),t.setToggle()}),this},completionStat:function(){var e=this.$(".profile-completion-bar").width(),t=this.$(".completion-percentage strong").text(),n=e*t/100;this.$(".profile-completion-bar").children("div").css("width",n)}})}),define("models/new_tip",["underscore","tibbr"],function(e,t){return t.Model.extend({baseName:"new_tip",initialize:function(){e.bindAll(this)},text:function(){return t.translate("home.new_tips."+this.get("name"))},image:function(){return this._path("images/"+this.get("image"))},icon:function(){var e=this.get("name"),t;switch(e){case"learn_tibbr":t="learn";break;case"documentation":t="documentation";break;case"tibbr_desktop":t="desktop";break;case"got_blackberry":t="bb";break;case"got_iphone":t="ios";break;case"got_android":t="android";break;default:t=e}return t},url:function(){if(this.get("name")==="learn_tibbr")return this.get("link");if(this.get("name")==="tibbr_desktop"){var e=this.get("download_links");return e[t.Helper.OSName()]||"#"}var e=this.get("append_root")?this._path(this.get("link")):this.get("link");return e}})}),define("collections/new_tips",["jquery","tibbr","models/new_tip"],function(e,t,n){return t.Collection.extend({className:"newTips",model:n,_set:function(e){this.title=e.title,this.add(e.links,{silent:!0})}})}),define("hbs!templates/home/new_tips_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function l(e,t){return' target="_blank" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+="<a ",o=n["if"].call(t,t&&t.doc,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+=' href="',(o=n.link)?o=o.call(t,{hash:{},data:i}):(o=t&&t.link,o=typeof o===a?o.call(t,{hash:{},data:i}):o),s+=f(o)+'" title="',(o=n.text)?o=o.call(t,{hash:{},data:i}):(o=t&&t.text,o=typeof o===a?o.call(t,{hash:{},data:i}):o),s+=f(o)+'">\n<i class="ui-inline-icon ',(o=n.icon)?o=o.call(t,{hash:{},data:i}):(o=t&&t.icon,o=typeof o===a?o.call(t,{hash:{},data:i}):o),s+=f(o)+'"></i>',(o=n.text)?o=o.call(t,{hash:{},data:i}):(o=t&&t.text,o=typeof o===a?o.call(t,{hash:{},data:i}):o),s+=f(o)+"\n</a>\n\n",s})}),define("views/home/new_tips_list_item",["jquery","underscore","tibbr","hbs!templates/home/new_tips_list_item"],function(e,t,n,r){return n.View.extend({tagName:"li",render:function(){var e=this.model;return this.$el.html(this.renderTemplate(r,{doc:e.get("name")==="learn_tibbr"||"documentation",link:e.url(),text:e.text(),icon:e.icon()})),this}})}),define("hbs!templates/home/new_tips_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3 class="new_to_tibbr"><i class="left-corner"></i>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.new_to_tibbr",u):a.call(t,"t","home.new_to_tibbr",u)))+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\n<div class="wrap">\n    <div class= "js-new_to_tibbr">\n      <ul id="toolbox" class="toolbox clearfix"></ul>\n	  <p class="see-more take-tour">\n          <a href="#" class="remove-widget">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",u):a.call(t,"t","common.right_bar.remove",u)))+'</a>\n          <a href="#" class="rfloat js-take-tour"><i class="ui-inline-icon help-icon"></i> <span>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.new_tips.take_tour",u):a.call(t,"t","home.new_tips.take_tour",u)))+'</span> <i class="arrow next"></i></a>\n      </p>\n      <!--<p class="take-tour"><a href="#"><i class="ui-inline-icon help-icon"></i> <span>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.new_tips.take_tour",u):a.call(t,"t","home.new_tips.take_tour",u)))+'</span> <i class="arrow next"></i></a></p>-->\n    </div>\n</div>\n',s})}),define("views/home/new_tips_list",["jquery","underscore","tibbr","collections/new_tips","models/new_tip","views/common/preference_view","views/home/new_tips_list_item","hbs!templates/home/new_tips_list"],function(e,t,n,r,i,s,o,u){return s.extend({className:"new_to_tibbr block",events:{"click .js-take-tour":"startTour"},initialize:function(e){t.bindAll(this,"render"),this.collection=new r,this.collection._set(n.appConfig("webui","config","welcome_panel")),s.prototype.initialize.call(this)},render:function(){this.$el.html(this.renderTemplate(u));var e=this.$("#toolbox"),t=this.collection,n=this;return t.each(function(r){e.append(n.initChild(o,{model:r,collection:t}).render().el),e.find("li:odd").addClass("last")}),this.setToggle(),this},startTour:function(){this.params().controller==="home"&&this.params().action==="index"&&n.Modules.Tour.index(n.tracker)}})}),define("require/jcarousel",["jquery"],function(e){(function(e){var t=e.jCarousel={};t.version="0.3.0";var n=/^([+\-]=)?(.+)$/;t.parseTarget=function(e){var t=!1,r=typeof e!="object"?n.exec(e):null;return r?(e=parseInt(r[2],10)||0,r[1]&&(t=!0,r[1]==="-="&&(e*=-1))):typeof e!="object"&&(e=parseInt(e,10)||0),{target:e,relative:t}},t.detectCarousel=function(e){var t;while(e.length>0){t=e.filter("[data-jcarousel]");if(t.length>0)return t;t=e.find("[data-jcarousel]");if(t.length>0)return t;e=e.parent()}return null},t.base=function(n){return{version:t.version,_options:{},_element:null,_carousel:null,_init:e.noop,_create:e.noop,_destroy:e.noop,_reload:e.noop,create:function(){return this._element.attr("data-"+n.toLowerCase(),!0).data(n,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(n).removeAttr("data-"+n.toLowerCase()),this)},reload:function(e){return!1===this._trigger("reload")?this:(e&&this.options(e),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(t,n){if(arguments.length===0)return e.extend({},this._options);if(typeof t=="string"){if(typeof n=="undefined")return typeof this._options[t]=="undefined"?null:this._options[t];this._options[t]=n}else this._options=e.extend({},this._options,t);return this},carousel:function(){return this._carousel||(this._carousel=t.detectCarousel(this.options("carousel")||this._element),this._carousel||e.error('Could not detect carousel for plugin "'+n+'"')),this._carousel},_trigger:function(t,r,i){var s,o=!1;return i=[this].concat(i||[]),(r||this._element).each(function(){s=e.Event((n+":"+t).toLowerCase()),e(this).trigger(s,i),s.isDefaultPrevented()&&(o=!0)}),!o}}},t.plugin=function(n,r){var i=e[n]=function(t,n){this._element=e(t),this.options(n),this._init(),this.create()};return i.fn=i.prototype=e.extend({},t.base(n),r),e.fn[n]=function(t){var r=Array.prototype.slice.call(arguments,1),s=this;return typeof t=="string"?this.each(function(){var i=e(this).data(n);if(!i)return e.error("Cannot call methods on "+n+" prior to initialization; "+'attempted to call method "'+t+'"');if(!e.isFunction(i[t])||t.charAt(0)==="_")return e.error('No such method "'+t+'" for '+n+" instance");var o=i[t].apply(i,r);if(o!==i&&typeof o!="undefined")return s=o,!1}):this.each(function(){var r=e(this).data(n);r instanceof i?r.reload(t):new i(this,t)}),s},i}})(e),function(e,t){var n=function(e){return parseFloat(e)||0};e.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_init:function(){var e=this;return this.onWindowResize=function(){e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.reload()},100)},this},_create:function(){this._reload(),e(t).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){e(t).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),this.vertical==null&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),this.rtl==null&&(this.rtl=function(t){if((""+t.attr("dir")).toLowerCase()==="rtl")return!0;var n=!1;return t.parents("[dir]").each(function(){if(/rtl/i.test(e(this).attr("dir")))return n=!0,!1}),n}(this._element)),this.lt=this.vertical?"top":"left",this.relative=this.list().css("position")==="relative",this._list=null,this._items=null;var t=this._target&&this.index(this._target)>=0?this._target:this.closest();this.circular=this.options("wrap")==="circular",this.underflow=!1;var n={left:0,top:0};return t.length>0&&(this._prepare(t),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,n[this.lt]=this._position(t)+"px"),this.move(n),this},list:function(){if(this._list===null){var t=this.options("list");this._list=e.isFunction(t)?t.call(this):this._element.find(t)}return this._list},items:function(){if(this._items===null){var t=this.options("items");this._items=(e.isFunction(t)?t.call(this):this.list().find(t)).not("[data-jcarousel-clone]")}return this._items},index:function(e){return this.items().index(e)},closest:function(){var t=this,r,i=e(),s=!1,o=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right",u;try{r=this.list().position()[this.lt]}catch(a){r=0}return this.rtl&&this.relative&&!this.vertical&&(r+=this.list().width()-this.clipping()),this.items().each(function(){i=e(this);if(s)return!1;var a=t.dimension(i);r+=a;if(r>=0){u=a-n(i.css("margin-"+o));if(!(Math.abs(r)-a+u/2<=0))return!1;s=!0}}),i},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var e=this.options("wrap"),t=this.items().length-1;return t>=0&&(e&&e!=="first"||this.index(this._last)<t||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var e=this.options("wrap");return this.items().length>0&&(e&&e!=="last"||this.index(this._first)>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(e){return e["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(t,n,r){if(this.animating)return this;if(!1===this._trigger("scroll",null,[t,n]))return this;e.isFunction(n)&&(r=n,n=!0);var i=e.jCarousel.parseTarget(t);if(i.relative){var s=this.items().length-1,o=Math.abs(i.target),u=this.options("wrap"),a,f,l,c,h,p,d,v;if(i.target>0){var m=this.index(this._last);if(m>=s&&this.tail)this.inTail?u==="both"||u==="last"?this._scroll(0,n,r):e.isFunction(r)&&r.call(this,!1):this._scrollTail(n,r);else{a=this.index(this._target);if(this.underflow&&a===s&&(u==="circular"||u==="both"||u==="last")||!this.underflow&&m===s&&(u==="both"||u==="last"))this._scroll(0,n,r);else{l=a+o;if(this.circular&&l>s){v=s,h=this.items().get(-1);while(v++<l)h=this.items().eq(0),p=this._visible.index(h)>=0,p&&h.after(h.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(h),p||(d={},d[this.lt]=this.dimension(h),this.moveBy(d)),this._items=null;this._scroll(h,n,r)}else this._scroll(Math.min(l,s),n,r)}}}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-o+1,0),n,r);else{f=this.index(this._first),a=this.index(this._target),c=this.underflow?a:f,l=c-o;if(c<=0&&(this.underflow&&u==="circular"||u==="both"||u==="first"))this._scroll(s,n,r);else if(this.circular&&l<0){v=l,h=this.items().get(0);while(v++<0){h=this.items().eq(-1),p=this._visible.index(h)>=0,p&&h.after(h.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(h),this._items=null;var g=this.dimension(h);d={},d[this.lt]=-g,this.moveBy(d)}this._scroll(h,n,r)}else this._scroll(Math.max(l,0),n,r)}}else this._scroll(i.target,n,r);return this._trigger("scrollend"),this},moveBy:function(e,t){var r=this.list().position(),i=1,s=0;return this.rtl&&!this.vertical&&(i=-1,this.relative&&(s=this.list().width()-this.clipping())),e.left&&(e.left=r.left+s+n(e.left)*i+"px"),e.top&&(e.top=r.top+s+n(e.top)*i+"px"),this.move(e,t)},move:function(t,n){n=n||{};var r=this.options("transitions"),i=!!r,s=!!r.transforms,o=!!r.transforms3d,u=n.duration||0,a=this.list();if(!i&&u>0){a.animate(t,n);return}var f=n.complete||e.noop,l={};if(i){var c=a.css(["transitionDuration","transitionTimingFunction","transitionProperty"]),h=f;f=function(){e(this).css(c),h.call(this)},l={transitionDuration:(u>0?u/1e3:0)+"s",transitionTimingFunction:r.easing||n.easing,transitionProperty:u>0?function(){return s||o?"all":t.left?"left":"top"}():"none",transform:"none"}}o?l.transform="translate3d("+(t.left||0)+","+(t.top||0)+",0)":s?l.transform="translate("+(t.left||0)+","+(t.top||0)+")":e.extend(l,t),i&&u>0&&a.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",f),a.css(l),u<=0&&a.each(function(){f.call(this)})},_scroll:function(t,n,r){if(this.animating)return e.isFunction(r)&&r.call(this,!1),this;typeof t!="object"?t=this.items().eq(t):typeof t.jquery=="undefined"&&(t=e(t));if(t.length===0)return e.isFunction(r)&&r.call(this,!1),this;this.inTail=!1,this._prepare(t);var i=this._position(t),s=this.list().position()[this.lt];if(i===s)return e.isFunction(r)&&r.call(this,!1),this;var o={};return o[this.lt]=i+"px",this._animate(o,n,r),this},_scrollTail:function(t,n){if(this.animating||!this.tail)return e.isFunction(n)&&n.call(this,!1),this;var r=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(r+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?r+=this.tail:r-=this.tail,this.inTail=!0;var i={};return i[this.lt]=r+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(i,t,n),this},_animate:function(t,n,r){r=r||e.noop;if(!1===this._trigger("animate"))return r.call(this,!1),this;this.animating=!0;var i=this.options("animation"),s=e.proxy(function(){this.animating=!1;var e=this.list().find("[data-jcarousel-clone]");e.length>0&&(e.remove(),this._reload()),this._trigger("animateend"),r.call(this,!0)},this),o=typeof i=="object"?e.extend({},i):{duration:i},u=o.complete||e.noop;return n===!1?o.duration=0:typeof e.fx.speeds[o.duration]!="undefined"&&(o.duration=e.fx.speeds[o.duration]),o.complete=function(){s(),u.call(this)},this.move(t,o),this},_prepare:function(t){var r=this.index(t),i=r,s=this.dimension(t),o=this.clipping(),u=this.vertical?"bottom":this.rtl?"left":"right",a=this.options("center"),f={target:t,first:t,last:t,visible:t,fullyvisible:s<=o?t:e()},l,c,h,p;a&&(s/=2,o/=2);if(s<o)for(;;){l=this.items().eq(++i);if(l.length===0){if(!this.circular)break;l=this.items().eq(0);if(t.get(0)===l.get(0))break;c=this._visible.index(l)>=0,c&&l.after(l.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(l);if(!c){var d={};d[this.lt]=this.dimension(l),this.moveBy(d)}this._items=null}p=this.dimension(l);if(p===0)break;s+=p,f.last=l,f.visible=f.visible.add(l),h=n(l.css("margin-"+u)),s-h<=o&&(f.fullyvisible=f.fullyvisible.add(l));if(s>=o)break}if(!this.circular&&!a&&s<o){i=r;for(;;){if(--i<0)break;l=this.items().eq(i);if(l.length===0)break;p=this.dimension(l);if(p===0)break;s+=p,f.first=l,f.visible=f.visible.add(l),h=n(l.css("margin-"+u)),s-h<=o&&(f.fullyvisible=f.fullyvisible.add(l));if(s>=o)break}}return this._update(f),this.tail=0,!a&&this.options("wrap")!=="circular"&&this.options("wrap")!=="custom"&&this.index(f.last)===this.items().length-1&&(s-=n(f.last.css("margin-"+u)),s>o&&(this.tail=s-o)),this},_position:function(e){var t=this._first,n=t.position()[this.lt],r=this.options("center"),i=r?this.clipping()/2-this.dimension(t)/2:0;return this.rtl&&!this.vertical?(this.relative?n-=this.list().width()-this.dimension(t):n-=this.clipping()-this.dimension(t),n+=i):n-=i,!r&&(this.index(e)>this.index(t)||this.inTail)&&this.tail?(n=this.rtl&&!this.vertical?n-this.tail:n+this.tail,this.inTail=!0):this.inTail=!1,-n},_update:function(t){var n=this,r={target:this._target||e(),first:this._first||e(),last:this._last||e(),visible:this._visible||e(),fullyvisible:this._fullyvisible||e()},i=this.index(t.first||r.first)<this.index(r.first),s,o=function(s){var o=[],u=[];t[s].each(function(){r[s].index(this)<0&&o.push(this)}),r[s].each(function(){t[s].index(this)<0&&u.push(this)}),i?o=o.reverse():u=u.reverse(),n._trigger(s+"in",e(o)),n._trigger(s+"out",e(u)),n["_"+s]=t[s]};for(s in t)o(s);return this}})}(e,window),function(e){e.jcarousel.fn.scrollIntoView=function(t,n,r){var i=e.jCarousel.parseTarget(t),s=this.index(this._fullyvisible.first()),o=this.index(this._fullyvisible.last()),u;i.relative?u=i.target<0?Math.max(0,s+i.target):o+i.target:u=typeof i.target!="object"?i.target:this.index(i.target);if(u<s)return this.scroll(u,n,r);if(u>=s&&u<=o)return e.isFunction(r)&&r.call(this,!1),this;var a=this.items(),f=this.clipping(),l=this.vertical?"bottom":this.rtl?"left":"right",c=0,h;for(;;){h=a.eq(u);if(h.length===0)break;c+=this.dimension(h);if(c>=f){var p=parseFloat(h.css("margin-"+l))||0;c-p!==f&&u++;break}if(u<=0)break;u--}return this.scroll(u,n,r)}}(e),function(e){e.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=e.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",e.proxy(this._create,this))},this),this.onReload=e.proxy(this._reload,this),this.onEvent=e.proxy(function(t){t.preventDefault();var n=this.options("method");e.isFunction(n)?n.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var t=e.jCarousel.parseTarget(this.options("target")),n=this.carousel(),r;if(t.relative)r=n.jcarousel(t.target>0?"hasNext":"hasPrev");else{var i=typeof t.target!="object"?n.jcarousel("items").eq(t.target):t.target;r=n.jcarousel("target").index(i)>=0}return this._active!==r&&(this._trigger(r?"active":"inactive"),this._active=r),this}})}(e),function(e){e.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(e){return'<a href="#'+e+'">'+e+"</a>"},event:"click",method:"scroll"},_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=e.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",e.proxy(this._create,this))},this),this.onReload=e.proxy(this._reload,this),this.onScroll=e.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll)},_reload:function(){var t=this.options("perPage");this._pages={},this._items={},e.isFunction(t)&&(t=t.call(this));if(t==null)this._pages=this._calculatePages();else{var n=parseInt(t,10)||0,r=this.carousel().jcarousel("items"),i=1,s=0,o;for(;;){o=r.eq(s++);if(o.length===0)break;this._pages[i]?this._pages[i]=this._pages[i].add(o):this._pages[i]=o,s%n===0&&i++}}this._clear();var u=this,a=this.carousel().data("jcarousel"),f=this._element,l=this.options("item");e.each(this._pages,function(t,n){var r=u._items[t]=e(l.call(u,t,n));r.on(u.options("event")+".jcarouselpagination",e.proxy(function(){var e=n.eq(0);if(a.circular){var r=a.index(a.target()),i=a.index(e);parseFloat(t)>parseFloat(u._currentPage)?i<r&&(e="+="+(a.items().length-r+i)):i>r&&(e="-="+(r+(a.items().length-i)))}a[this.options("method")](e)},u)),f.append(r)}),this._update()},_update:function(){var t=this.carousel().jcarousel("target"),n;e.each(this._pages,function(e,r){r.each(function(){if(t.is(this))return n=e,!1});if(n)return!1}),this._currentPage!==n&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[n])),this._currentPage=n},items:function(){return this._items},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){var e=this.carousel().data("jcarousel"),t=e.items(),n=e.clipping(),r=0,i=0,s=1,o={},u;for(;;){u=t.eq(i++);if(u.length===0)break;o[s]?o[s]=o[s].add(u):o[s]=u,r+=e.dimension(u),r>=n&&(s++,r=0)}return o}})}(e),function(e){e.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_init:function(){this.onDestroy=e.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",e.proxy(this._create,this))},this),this.onAnimateEnd=e.proxy(this.start,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),this.options("autostart")&&this.start()},_destroy:function(){this.stop(),this.carousel().off("jcarousel:destroy",this.onDestroy)},start:function(){return this.stop(),this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(e.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this}})}(e)}),define("hbs!modules/common/templates/common/carousel",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="jcarousel" style="height: ',(o=n.height)?o=o.call(t,{hash:{},data:i}):(o=t&&t.height,o=typeof o===u?o.call(t,{hash:{},data:i}):o),s+=a(o)+'px; width: auto">\n    <ul></ul>\n</div>\n<a href="#" class="jcarousel-control-prev js-prev" style="top:',(o=n.top)?o=o.call(t,{hash:{},data:i}):(o=t&&t.top,o=typeof o===u?o.call(t,{hash:{},data:i}):o),s+=a(o)+'px">&lsaquo;</a>\n<a href="#" class="jcarousel-control-next js-next" style="top:',(o=n.top)?o=o.call(t,{hash:{},data:i}):(o=t&&t.top,o=typeof o===u?o.call(t,{hash:{},data:i}):o),s+=a(o)+'px">&rsaquo;</a>\n',s})}),define("modules/common/views/common/carousel",["jquery","underscore","tibbr","require/jcarousel","hbs!modules/common/templates/common/carousel"],function(t,n,r,i,s){return r.View.extend({className:"jcarousel-wrapper",initialize:function(e){this.template=e.template||s,this.id=e.id||this.cid,this.$el.attr("id",this.id)},events:{"click a.js-preview":"preview"},render:function(){var e=this.options,t=e.height||225,r=parseInt(t/2,10)-10;return this.$el.html(this.renderTemplate(this.template,{height:t,top:r})),n.isFunction(this.options.onRender)&&this.options.onRender(this),this},setHtml:function(e){return this.bind().done(function(t){t.html(e),t.jcarousel("reload")}),this},reload:function(){return this.bind().done(function(e){e.jcarousel("reload")}),this},preview:function(e){return r.Modules.View.preview(e)},append:function(e){return this.bind().done(function(t){t.find("> ul").append(e),t.jcarousel("reload")}),this},prepend:function(e){return this.bind().done(function(t){t.find("> ul").prepend(e),t.jcarousel("reload")}),this},removeItem:function(e){return this.bind().done(function(t){t.find("> ul").find(e).remove(),t.jcarousel("reload")}),this},scroll:function(e){return this.jCarousel.jcarousel("scroll",e),this},_next:function(){var e=this.options("view"),t=e.options;n.isFunction(t.beforeNext)&&t.beforeNext(this.carousel(),e),this.carousel().jcarousel("scroll",this.options("target")),n.isFunction(t.afterNext)&&t.afterNext(this.carousel(),e)},_prev:function(){var e=this.options("view"),t=e.options;n.isFunction(t.beforePrevious)&&t.beforePrevious(this.carousel(),e),this.carousel().jcarousel("scroll",this.options("target")),n.isFunction(t.afterPrevious)&&t.afterPrevious(this.carousel(),e)},bind:function(){var e=this,r=t.Deferred();return e.jCarousel?r.resolve(e.jCarousel):n.delay(function(){var i=t("#"+e.id),s=i.find(".jcarousel").jcarousel({});e.jCarousel=s,i.find(".js-prev").on("jcarouselcontrol:active",function(){t(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){t(this).addClass("disabled")}).jcarouselControl({target:"-="+(e.options.target||1),view:e,method:e._prev}),i.find(".js-next").on("jcarouselcontrol:active",function(){t(this).removeClass("disabled")}).on("jcarouselcontrol:inactive",function(){t(this).addClass("disabled")}).on("click",function(){if(e._loading)return!1}).jcarouselControl({target:"+="+(e.options.target||1),view:e,method:e._next}),i.find(".jcarousel").on("jcarousel:visiblein","li",function(t,r){n.isFunction(e.options.onItemVisible)&&e.options.onItemVisible(t,i,r)}),n.isFunction(e.options.onBind)&&e.options.onBind(this),r.resolve(s)},200),r},onLeave:function(){t("#"+this.id).find(".jcarousel").jcarousel("destroy")}})}),define("hbs!templates/announcements/announcement_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="item-content-wrap"></div>'})}),define("hbs!templates/announcements/meeting",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;s+='<div class="file-attach meeting">\n    <div class="post-content">\n        <p> ',(o=n.richContent)?o=o.call(t,{hash:{},data:i}):(o=t&&t.richContent,o=typeof o===a?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;return s+=' </p>\n    </div>\n    <div class="media-box meeting-wrap">\n        <a href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.meetingUrl),typeof o===a?o.apply(t):o))+'" class="profile-pic"><img width="52" height="52" alt="" src="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.displayImage),typeof o===a?o.apply(t):o))+'"></a>\n        <div class="asset-details info">\n            <h6><a href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.meetingUrl),typeof o===a?o.apply(t):o))+'" class="meeting-title">'+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.application_definition),o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'</a></h6>\n            <p class="ptm"> <a target="_blank" href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.meetingUrl),typeof o===a?o.apply(t):o))+'" class="tibcast-meeting"><img src="',u={hash:{},data:i},s+=f((o=n.imagePath||t&&t.imagePath,o?o.call(t,"images/resource/join-meeting.png",u):l.call(t,"imagePath","images/resource/join-meeting.png",u)))+'" alt="">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"actions.join_meeting",u):l.call(t,"t","actions.join_meeting",u)))+'</a></p>\n        </div>\n    </div>\n</div>\n<div class="announcement-footer"></div>\n',s})}),define("hbs!templates/announcements/post",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function";s+='<div class="post-content mvl rich-post">\n    <p>',(o=n.richContent)?o=o.call(t,{hash:{},data:i}):(o=t&&t.richContent,o=typeof o===u?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;return s+='</p>\n    <p class="posted-to"></p>\n</div>\n<div class="announcement-footer"></div>',s})}),define("hbs!templates/announcements/eog_resource",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div class="post-content mvl rich-post">\n    <p>',(o=n.richContent)?o=o.call(t,{hash:{},data:i}):(o=t&&t.richContent,o=typeof o===u?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;return s+='</p>\n    <!--<p class="posted-to"></p>-->\n</div>\n<div class="file-attach media-attachment">\n    <div class="eog-holder" id="eog-holder-'+a((o=(o=t&&t.model,o==null||o===!1?o:o.id),typeof o===u?o.apply(t):o))+'" style="display: none"></div>\n</div>\n<div class="announcement-footer"></div>',s})}),define("hbs!templates/announcements/image",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div class="post-content">\n    <p>',(o=n.content)?o=o.call(t,{hash:{},data:i}):(o=t&&t.content,o=typeof o===u?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;return s+='</p>\n</div>\n<div class="single-photo media-attachment" style="height: 100px; width: 220px; overflow: hidden">\n	<ul>\n		<li>\n			<a target="_blank" href="'+a((o=(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),typeof o===u?o.apply(t):o))+'" class="overlay">\n                <img src="'+a((o=(o=t&&t.model,o==null||o===!1?o:o.thumbnailUrl),typeof o===u?o.apply(t):o))+'" class="announcement-img  bordered-medium ">\n            </a>\n		</li>\n	</ul>\n</div>\n<div class="announcement-footer"></div>\n',s})}),define("hbs!templates/announcements/poll",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n    <p class="label">',s={hash:{},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"announcement.most_popular_answer",s):f.call(e,"t","announcement.most_popular_answer",s)))+'</p>\n    <ul class="poll-options clearfix">\n        <li>\n            <div class="poll-bar-wrap">      \n                <div class="poll-option-display">'+l((i=(i=e&&e.question_option,i==null||i===!1?i:i.option_label),typeof i===c?i.apply(e):i))+'<a class="vote-count mls">',s={hash:{count:(i=e&&e.question_option,i==null||i===!1?i:i.option_users_count)},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"announcement.votes",s):f.call(e,"t","announcement.votes",s)))+'</a>\n                </div>      \n                <div class="poll-bar">    \n                    <div class="poll-bar-inner" id="announcement_'+l((i=(i=e&&e.model,i==null||i===!1?i:i.id),typeof i===c?i.apply(e):i))+'"></div>\n                </div>       \n            </div>   \n        </li>\n    </ul>    \n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="post-content">\n    <p>',(o=n.content)?o=o.call(t,{hash:{},data:i}):(o=t&&t.content,o=typeof o===c?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;s+='</p>\n</div>\n<div class="poll custome-post-type">\n    <p class="poll-duration mbl">\n        <span class="end-date">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"announcement.ends",a):f.call(t,"t","announcement.ends",a)))+"  ",(u=n.expiryDate)?u=u.call(t,{hash:{},data:i}):(u=t&&t.expiryDate,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\n        &middot; \n        <span class="vot-count">',a={hash:{count:t&&t.total_votes},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"announcement.votes",a):f.call(t,"t","announcement.votes",a)))+"</span>\n    </p>\n    ",u=n["if"].call(t,t&&t.nonEmptyOption,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+='\n\n</div>\n<div class="announcement-footer"></div>',s})}),define("hbs!templates/announcements/calendar",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;s+='<div class="event-post custome-post-type">\n    <div class="calendar-wrap">\n        <div class="calendar-date-display">\n            <p>'+l((o=(o=t&&t.model,o==null||o===!1?o:o.formattedDay),typeof o===f?o.apply(t):o))+"</p>\n            "+l((o=(o=t&&t.model,o==null||o===!1?o:o.formattedNumberDate),typeof o===f?o.apply(t):o))+'\n        </div>\n        <div class="info">\n            <h4>',(u=n.richContent)?u=u.call(t,{hash:{},data:i}):(u=t&&t.richContent,u=typeof u===f?u.call(t,{hash:{},data:i}):u);if(u||u===0)s+=u;return s+='</h4>\n            <p class="time-stamp"> '+l((o=(o=t&&t.model,o==null||o===!1?o:o.formattedDateTime),typeof o===f?o.apply(t):o))+'</p>\n            <p><span class="label">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"calendar.event_duration",a):c.call(t,"t","calendar.event_duration",a)))+"</span> "+l((o=(o=t&&t.model,o==null||o===!1?o:o.formattedTime),typeof o===f?o.apply(t):o))+'</p>\n            <p><span class="label">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"calendar.location",a):c.call(t,"t","calendar.location",a)))+"</span> "+l((o=(o=t&&t.model,o==null||o===!1?o:o.location),typeof o===f?o.apply(t):o))+'</p>\n            <p class="event-desc">',a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.more_info),210,a):c.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.more_info),210,a)))+'</p>\n        </div>\n    </div>\n</div>\n<div class="announcement-footer"></div>',s})}),define("hbs!templates/announcements/link",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;r+='\n            <a href="'+f((i=(i=e&&e.model,i==null||i===!1?i:i.url),typeof i===l?i.apply(e):i))+'"   class="img file '+f((i=(i=e&&e.model,i==null||i===!1?i:i.link_type),typeof i===l?i.apply(e):i))+'"><img src="'+f((i=(i=e&&e.model,i==null||i===!1?i:i.preview_image),typeof i===l?i.apply(e):i))+'" height="48"></a>\n            <div class="info">\n                <p><a  href="'+f((i=(i=e&&e.model,i==null||i===!1?i:i.url),typeof i===l?i.apply(e):i))+'" class="active-name '+f((i=(i=e&&e.model,i==null||i===!1?i:i.link_type),typeof i===l?i.apply(e):i))+'">'+f((i=(i=e&&e.model,i==null||i===!1?i:i.title),typeof i===l?i.apply(e):i))+"</a></p>\n                ",s=n["if"].call(e,(i=e&&e.model,i==null||i===!1?i:i.description),{hash:{},inverse:c.noop,fn:c.program(2,p,t),data:t});if(s||s===0)r+=s;return r+="\n            </div>\n        ",r}function p(e,t){var r="",i,s;return r+='\n                <p class="site-desc">',s={hash:{},data:t},r+=f((i=n.truncate||e&&e.truncate,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.description),60,s):a.call(e,"truncate",(i=e&&e.model,i==null||i===!1?i:i.description),60,s)))+'<span class="continue-text" style="display: none;"> ...</span></p>\n                ',r}function d(e,t){var r="",i,s;r+='\n            <div class="info">\n                <p><a href="'+f((i=(i=e&&e.model,i==null||i===!1?i:i.url),typeof i===l?i.apply(e):i))+'" class="active-name '+f((i=(i=e&&e.model,i==null||i===!1?i:i.link_type),typeof i===l?i.apply(e):i))+'">'+f((i=(i=e&&e.model,i==null||i===!1?i:i.title),typeof i===l?i.apply(e):i))+"</a></p>\n                ",s=n["if"].call(e,(i=e&&e.model,i==null||i===!1?i:i.description),{hash:{},inverse:c.noop,fn:c.program(5,v,t),data:t});if(s||s===0)r+=s;return r+="\n            </div>\n        ",r}function v(e,t){var r="",i,s;return r+='\n                <p class="site-desc">',s={hash:{},data:t},r+=f((i=n.truncate||e&&e.truncate,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.description),200,s):a.call(e,"truncate",(i=e&&e.model,i==null||i===!1?i:i.description),200,s)))+'<span class="continue-text" style="display: none;"> ...</span></p>\n                ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<div class="post-content mv1">\n    <p>',(o=n.richContent)?o=o.call(t,{hash:{},data:i}):(o=t&&t.richContent,o=typeof o===l?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;s+='</p>\n</div>\n<div class="media-attachment link-attach">\n    <div class="media-box js-video">\n        ',u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.hasPreview),{hash:{},inverse:c.program(4,d,i),fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;return s+='\n    </div>\n</div>\n<div class="announcement-footer"></div>\n',s})}),define("hbs!templates/announcements/asset",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n                <p class="overlay file-name">\n                    ',s={hash:{},data:t},r+=l((i=n.truncate||e&&e.truncate,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.title),80,s):f.call(e,"truncate",(i=e&&e.model,i==null||i===!1?i:i.title),80,s)))+"</p>\n            ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="file-attach media-attachment">\n    <div class="post-content">\n        <p>',(o=n.richContent)?o=o.call(t,{hash:{},data:i}):(o=t&&t.richContent,o=typeof o===c?o.call(t,{hash:{},data:i}):o);if(o||o===0)s+=o;s+='</p>\n    </div>\n    <div class="media-box">\n        <p class="overlay file lfloat mrm">\n            <img src="',a={hash:{},data:i},s+=l((o=n.imagePath||t&&t.imagePath,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.imageIcon),a):f.call(t,"imagePath",(o=t&&t.model,o==null||o===!1?o:o.imageIcon),a)))+'" width="50" height="50" >\n        </p>\n        <div class="asset-details info">\n            ',u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.title),{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+='\n            <p><a href="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),typeof o===c?o.apply(t):o))+'" class="btn">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"message.download",a):f.call(t,"t","message.download",a)))+' <i class="arrow next"></i></a></p>\n        </div>\n    </div>\n</div>\n<div class="announcement-footer"></div>',s})}),define("hbs!templates/announcements/common",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function";return s+='<div class="media-box">\n    <a class="profile-pic js-publish" data-event_key="user.selected" data-event_data="',u={hash:{},data:i},s+=f((o=n.setData||t&&t.setData,o?o.call(t,t&&t.user,u):a.call(t,"setData",t&&t.user,u)))+'"  href= "',u={hash:{},data:i},s+=f((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.user,u):a.call(t,"urlFor","show",t&&t.user,u)))+'">\n        <img src="'+f((o=(o=t&&t.user,o==null||o===!1?o:o.profileImageMedium),typeof o===l?o.apply(t):o))+'" class="bordered-2 large" />\n    </a>\n    <div class="info">\n        <p><a href="',u={hash:{},data:i},s+=f((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.user,u):a.call(t,"urlFor","show",t&&t.user,u)))+'" class="profile-name js-publish" data-event_key="user.selected" data-event_data="',u={hash:{},data:i},s+=f((o=n.setData||t&&t.setData,o?o.call(t,t&&t.user,u):a.call(t,"setData",t&&t.user,u)))+'"  > '+f((o=(o=t&&t.user,o==null||o===!1?o:o.display_name),typeof o===l?o.apply(t):o))+'</a></p>\n            <p class="time-stamp"><i class="ui-inline-icon clock-icon"></i>'+f((o=(o=t&&t.model,o==null||o===!1?o:o.postedAt),typeof o===l?o.apply(t):o))+"</p>\n    </div>\n</div>",s})}),define("hbs!templates/announcements/footer",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\r\n    <span class="lfloat"><a class="see-more-link js-see-details" href="',s={hash:{},data:t},r+=f((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,s):a.call(e,"urlFor","show",e&&e.model,s)))+'">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"announcement.take_poll",s):a.call(e,"t","announcement.take_poll",s)))+"</a></span>\r\n    ",r}function h(e,t){var r="",i,s;return r+='\r\n    <span class="lfloat"><a class="see-more-link js-see-details" href="',s={hash:{},data:t},r+=f((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,s):a.call(e,"urlFor","show",e&&e.model,s)))+'">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"announcement.see_detail",s):a.call(e,"t","announcement.see_detail",s)))+"</a></span>\r\n    ",r}function p(e,t){var r="",i,s;return r+='\r\n    <span style="margin:0px 0px 0px 10px; float: right;" class="remove-status"> </span>\r\n    <a style="float: right;" class="see-more-link anouncement-delete" href="#">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"announcement.remove",s):a.call(e,"t","announcement.remove",s)))+"</a>\r\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l=this;s+='<p style="clear: both">\r\n    ',o=n["if"].call(t,t&&t.takePoll,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\r\n    ",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.canRemove),{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(u||u===0)s+=u;return s+="\r\n</p>",s})}),define("views/announcements/announcement_item",["jquery","underscore","tibbr","hbs!templates/announcements/announcement_item","hbs!templates/announcements/meeting","hbs!templates/announcements/post","hbs!templates/announcements/eog_resource","hbs!templates/announcements/image","hbs!templates/announcements/poll","hbs!templates/announcements/calendar","hbs!templates/announcements/link","hbs!templates/announcements/asset","hbs!templates/announcements/common","hbs!templates/announcements/footer","modules/dialog","modules/overlay","modules/common/views/messages/list_item","models/message"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=n.View.extend({tagName:"li",attributes:{style:"width:320px"},events:{"click a.anouncement-delete":"destroy","mouseenter div.tb-poll-result-bar":"showVotes","mouseleave div.tb-poll-result-bar":"showVotes","click a.overlay":"overlay","click a.video":"showVideo","click .js-see-details":"showDetails","click .continued":"showDetails","click a.js-action-target-link":"actionTargetLink","click a.js-hash-tag":"hashTags"},initialize:function(){t.bindAll(this,"destroy","getRichContent","showDetails"),this.bindTo(this.model,"delete",this.resetUI,this)},render:function(){this.$el.html(this.renderTemplate(r));var e=this.model.type(),t=this.$("div.item-content-wrap");t.append(this.renderTemplate(h,{user:this.model.user.forTemplate()}));switch(e){case"poll":var d=this.model.question.optionsAndVote(),m,g;m=d[0]!==undefined,g=d[1]===undefined?0:d[1],this.$(".media-box").after(this.renderTemplate(a,{expiryDate:this.model.question.expiryDate,question_option:m?d[0].forTemplate():d[0],total_votes:g,content:this.model.getContent(100),nonEmptyOption:m}));if(m){var y=parseInt(d[0].get("option_users_count")),b=d[1];this.$("#announcement_"+this.model.get("id")).css("width",y/b*100+"%")}break;case"image":this.$(".media-box").after(this.renderTemplate(u,{model:this.model.assets.first(),content:this.model.getContent(100)}));break;case"calendar":this.$(".media-box").after(this.renderTemplate(f,{model:this.model.calendar,richContent:this.getRichContent()}));break;case"link":var w=this.model.links.first(),E=w.get("description").length>200;this.$(".media-box").after(this.renderTemplate(l,{richContent:this.getRichContent(),model:w})),E&&this.$("span.continue-text").show(),w.isTibbrLink()||this.$("a:not(.continued)").attr("target","_blank"),w.isVideo()&&this.$("a").addClass("video");break;case"asset":var S=this.model.assets.first();this.$(".media-box").after(this.renderTemplate(c,{richContent:this.getRichContent(),model:this.model.assets.first()}));break;case"meeting":this.$(".media-box").after(this.renderTemplate(i,{richContent:this.getRichContent(),model:this.model.meetingResource()}));break;case"eogAction":this.$(".media-box").after(this.renderTemplate(o,{richContent:this.getRichContent()})),this.renderResource();break;default:this.$(".media-box").after(this.renderTemplate(s,{richContent:this.getRichContent()}))}var x={showEvent:"mouseenter",hideEvent:"mouseleave",fixed:!0};this.$("a.js-more-people").qtip(n.qtipConfigs.menu(this.$el,".js-more-people-list",x));var T=e==="poll"&&m&&!this.model.question.checkExpiryDate();return this.$(".announcement-footer").after(this.renderTemplate(p,{takePoll:T})),e==="poll"?m?this.$(".add_options").remove():this.$(".show-detail").remove():this.$(".add_options").remove(),this},showVideo:function(){t.delay(function(){e("#announcement-items-carousel").height(e("#announcement-items-carousel").height()+120)},100);var n=e(this.model.links.first().markup()).attr({width:"100%",height:"200"});return this.$(".js-video").html(n),!1},showDetails:function(){if(window.gadget){var e=this.model.id,t=new g({id:e});t.fetch({data:{replies_per_page:2,paginate_replies:!0}}).done(function(){d.render(m,{model:t,data:{replies_per_page:2,paginate_replies:!0},dialog:{width:700,max_height:400}})})}return!0},destroy:function(e){var t=this,r=this.options.from,i=this.options.subject_id===undefined?"":this.options.subject_id;return d.remove({text:t.t("announcement.delete_alert"),okFunction:function(){t.$("span.remove-status").first().html(n.UI.spinner),t.model.destroy(r,i)}}),!1},resetUI:function(){this.collection.remove(this.model)},showVotes:function(e){e.type=="mouseleave"?this.$(".vote-count-label").css("visibility","hidden"):this.$(".vote-count-label").css("visibility","visible")},overlay:function(){return e.fn.colorbox({href:this.$(".overlay").attr("href"),photo:!0,scalePhotos:!0,width:750,height:500}),!1},getRichContent:function(){return this.model.getRichContent(this.options.fullText,!0)}});return t.extend(y.prototype,n.Modules.View.ActionLink),t.extend(y.prototype,n.Modules.View.Resource),y}),define("hbs!templates/announcements/announcement_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3 class="announcement">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"announcement.announcements",u):a.call(t,"t","announcement.announcements",u)))+'<i class="left-corner"></i></h3>\n<div class="wrap" style="display: block;">\n    <div class= "js-announcement">\n        <p class="announcemnet-nav">\n            <span class="count">\n                <a class="prev js-prev" href="#">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.previous",u):a.call(t,"t","common.previous",u)))+'</a>\n                <i class="ui-inline active-annoucemnt"></i>\n                <i class="ui-inline">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.of",u):a.call(t,"t","common.of",u)))+'</i>\n                <i class="ui-inline total-annoucemnt"></i>\n                <a class="next js-next" href="#">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.next",u):a.call(t,"t","common.next",u)))+'</a>\n            </span>\n        </p>\n        <div id="announcement-wrap" class="jcarousel announcement-wrap mvl" style="width: 320px">\n            <ul></ul>\n        </div>\n    </div>\n</div><!--end of .wrap-->\n',s})}),define("views/announcements/announcement_list",["jquery","underscore","tibbr","modules/common/views/common/carousel","views/common/preference_view","views/announcements/announcement_item","hbs!templates/announcements/announcement_list"],function(e,t,n,r,i,s,o){return i.extend({className:"announcement block",initialize:function(){t.bindAll(this,"applyCarousel"),this.bindTo(this.collection,"reset",this.applyCarousel),this.bindTo(this.collection,"remove",this.applyCarousel),n.Event.bindTo(this,"announcement:change",this.refreshCarousel),this.subject_id=t.isUndefined(this.options.subject_id)?"":this.options.subject_id,this._super(this)},list:function(){var t=this,n=this.collection,r=e("<ul/>");return n.each(function(e){r.append(t.initChild(s,{collection:n,model:e,fullText:t.options.fullText,subject_id:t.subject_id,from:t.options.from}).render().el)}),r},applyCarousel:function(){this.carousel&&(this.carousel.leave(),this.$el.html(""),this.leaveChild());var t=this,n=this.collection.total_entries;if(n>0||this.nav.empty_text)this.carousel=(new r({onRender:function(e){e.$(".active-annoucemnt").text(1),e.$(".total-annoucemnt").text(t.collection.total_entries)},onItemVisible:function(t,n,r){n.find(".jcarousel").height(e(t.currentTarget).height()+5)},afterPrevious:function(e,t){var n=e.jcarousel("items"),r=e.jcarousel("first");t.$(".active-annoucemnt").text(n.index(r)+1)},afterNext:function(e,r){var i=e.jcarousel("items"),o=e.jcarousel("first");return r._loading?!1:(r.$(".active-annoucemnt").text(i.index(o)+1),i.index(o)+1===i.length&&i.length<n&&t.collection.page().fetch({silent:!0,beforeSend:function(){r._loading=!0,r.$(".js-next").append(spinner)}}).done(function(){r.append(t.collection.collect(function(e,n){return t.initChild(s,{collection:t.collection,model:e,fullText:t.options.fullText,subject_id:t.subject_id,from:t.options.from}).render().el})),r._loading=!1}).always(function(){r.$(".js-next").find(".spinner").remove()}),!0)},template:o,className:"announcement-carousel"})).appendTo(this.$el).setHtml(this.list());this.setToggle(),n===0&&this.handelEmpty()},refreshCarousel:function(t){var n=t.subjectId===void 0?"":t.subjectId;this.params().id&&n===""&&(n=this.params().id);var r=e(".announcement");r.is(":visible")||r.show(),e("#announcement-wrap").html(loader),this.collection.page(1).fetch()},onLeave:function(){this.carousel&&(this.carousel.leave(),this.carousel=null)}})}),define("collections/upcoming_events",["jquery","tibbr","collections/messages"],function(e,t,n){return n.extend({className:"upcoming_events",tibbrURL:{controller:"users",action:"upcoming_user_event_messages"}})}),define("collections/upcoming_subject_events",["jquery","tibbr","collections/messages"],function(e,t,n){return n.extend({className:"upcoming_subject_events",tibbrURL:{controller:"subjects",action:"upcoming_subject_event_messages"}})}),define("hbs!templates/calendars/upcoming_event_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n<div class="join-meeting">\n    <a class="lfloat" href="'+f((i=(i=(i=e&&e.model,i==null||i===!1?i:i.meeting),i==null||i===!1?i:i.meetingUrl),typeof i===a?i.apply(e):i))+'" target="_blank"><img class="meeting-icon img-shadow-frame" alt="" src="'+f((i=(i=(i=e&&e.model,i==null||i===!1?i:i.meeting),i==null||i===!1?i:i.appIcon),typeof i===a?i.apply(e):i))+'" width="18" height="18"> '+f((i=(i=(i=(i=e&&e.model,i==null||i===!1?i:i.meeting),i==null||i===!1?i:i.application_definition),i==null||i===!1?i:i.name),typeof i===a?i.apply(e):i))+'</a>\n    <a href="'+f((i=(i=(i=e&&e.model,i==null||i===!1?i:i.meeting),i==null||i===!1?i:i.meetingUrl),typeof i===a?i.apply(e):i))+'" target="_blank" class="join-meeting-link rfloat">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"actions.join_meeting",s):l.call(e,"t","actions.join_meeting",s)))+"</a>\n</div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="calendar-wrap media-box">\n    <div class="calendar-date-display"><p>'+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.calendar),o==null||o===!1?o:o.start_date_month),typeof o===a?o.apply(t):o))+"</p>\n        <span>"+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.calendar),o==null||o===!1?o:o.start_day),typeof o===a?o.apply(t):o))+'</span></div>\n    <div class="info">\n        <p><label><a class="event-response">',u=(o=(o=t&&t.model,o==null||o===!1?o:o.getRichContent),typeof o===a?o.apply(t):o);if(u||u===0)s+=u;s+='</a></label></p>\n        <p class="time-stamp"> '+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.calendar),o==null||o===!1?o:o.formattedDateTime),typeof o===a?o.apply(t):o))+"</p>\n    </div>\n</div>\n",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.meeting),{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;return s})}),define("views/calendars/upcoming_event_item",["jquery","underscore","tibbr","models/message","modules/common/views/messages/rsvp_view","hbs!templates/calendars/upcoming_event_item","modules/dialog"],function(e,t,n,r,i,s,o){return n.View.extend({tagName:"li",events:{"click .event-response":"showRSVP","click a.continued":"showRSVP"},render:function(){return this.$el.html(this.renderTemplate(s,{include:["calendar"]})),this},showRSVP:function(){return o.render(i,{model:this.model.calendar,parent:this,parentModel:this.model,dialog:{width:600,className:"event-overlay"}}),!1}})}),define("text!templates/calendars/upcoming_event_list.html",[],function(){return'<h3 class="upcoming_events">${header}<i class="ui-inline-icon arrow-up rfloat"></i></h3>\n<div class="wrap js-upcoming_events">\n    <ul id="upcoming_events" class=" phl mvl"></ul>\n        <p class="see-more">\n            <a href="#" class="remove-widget">${t("common.right_bar.remove")}</a>\n            {{if hasMorePage}}\n            <a class="see-more-link" href="${upcomingEventUrl}">{{html t(\'calendar.see_more\') }}</a>\n            {{/if}}\n        </p>\n</div>'}),define("views/calendars/upcoming_event_list",["jquery","underscore","tibbr","collections/upcoming_events","collections/upcoming_subject_events","views/common/preference_view","views/calendars/upcoming_event_item","text!templates/calendars/upcoming_event_list.html"],function(e,t,n,r,i,s,o,u){return s.extend({className:"upcoming_events block",initialize:function(){this.from=this.options.from,this.collection=this.from==="subjects"?new i([],{scopeId:this.options.id,dataParams:{params:{per_page:3}}}):new r([],{scopeId:n.currentUser.id,dataParams:{params:{per_page:3}}}),this.key=this.from==="subjects"?"subject":"user",this.bindTo(this.collection,"reset",this.renderList),this._super()},render:function(){var e={per_page:3};return e[this.key]=this.model.id,this.collection.getOrFetch({cacheKey:"upcoming_event_"+this.key+"_"+this.model.id}),this},renderList:function(){var e=this.collection,t=this.options.header||"",r=this;if(e.length>0||this.nav.empty_text){var i=this.from==="subjects"?n.url("subjects/"+this.options.model.id+"/upcoming_events"):n.url("messages/upcoming_events");this.$el.html(this.template.render(u,{header:t,hasMorePage:e.hasMorePages,upcomingEventUrl:i}));var s=this.$("#upcoming_events");e.each(function(t){s.append(r.initChild(o,{model:t,collection:e}).render().el)}),this.setToggle(),this.from==="subjects"&&this.$(".remove-widget").remove()}return e.length===0&&(this.nav.title=this.options.header,this.handelEmpty()),this}})}),define("text!templates/home/contact_sales.html",[],function(){return'<h3 class="contact-sales"><i class="left-corner"></i> ${t(\'evaluation.contact_sales.contact\')} <i class="ui-inline-icon arrow-up rfloat"></i></h3>\r\n<div class="wrap js-contact_sales">\r\n  <div class="contact-details">\r\n    <p>${t(\'evaluation.contact_sales.message\')}:</p>\r\n    <p><a class="overlay js-contact-sales btn btn-primary cboxElement">${t(\'evaluation.contact_sales.contact\')} <i class="ui-inline-icon arrow-next"></i></a></p>\r\n    <!--<p>alternatively, you can call us at (XXX) XXX-XXXX</p>-->\r\n  </div>\r\n</div>\r\n'}),define("views/home/contact_sales",["jquery","underscore","tibbr","modules/overlay","views/common/preference_view","views/common/contact_sales_form","text!templates/home/contact_sales.html"],function(e,t,n,r,i,s,o){return i.extend({className:"contact-sales",initialize:function(){t.bindAll(this,"render"),i.prototype.initialize.call(this)},events:{"click .js-contact-sales":"contactToSales"},render:function(){return this.$el.html(this.template.render(o)),this.setToggle(),this},contactToSales:function(){var e=new s;return r.view(e.render().el),this.storeChild(e),!1}})}),define("require/validate",["jquery","tibbr"],function(e,t){return function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode=="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i=="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments)):n.apply(this,arguments)}}}(e),function(t){!e.event.special.focusin&&!e.event.special.focusout&&document.addEventListener&&t.each({focus:"focusin",blur:"focusout"},function(e,n){function r(e){e=t.event.fix(e),e.type=n;try{return t.event.handle.call(this,e)}catch(e){return t.noop.call(this,e)}}t.event.special[n]={setup:function(){this.addEventListener(e,r,!0)},teardown:function(){this.removeEventListener(e,r,!0)},handler:function(e){return arguments[0]=t.event.fix(e),arguments[0].type=n,t.event.handle.apply(this,arguments)}}}),t.extend(t.fn,{validateDelegate:function(e,n,r){return this.bind(n,function(n){var i=t(n.target);if(i.is(e))return r.apply(i,arguments)})}})}(e),function(n){var r=t.i18n.defaults.validation;n.extend(n.fn,{validate:function(e){if(!this.length){e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var t=n.data(this[0],"validator");if(t)return t;this.attr("novalidate","novalidate"),t=new n.validator(e,this[0]),n.data(this[0],"validator",t);if(t.settings.onsubmit){var r=this.find("input, button");r.filter(".cancel").click(function(){t.cancelSubmit=!0}),t.settings.submitHandler&&r.filter(":submit").click(function(){t.submitButton=this}),this.submit(function(e){function r(){if(t.settings.submitHandler){if(t.submitButton)var e=n("<input type='hidden'/>").attr("name",t.submitButton.name).val(t.submitButton.value).appendTo(t.currentForm);return t.settings.submitHandler.call(t,t.currentForm),t.submitButton&&e.remove(),!1}return!0}return t.settings.debug&&e.preventDefault(),t.cancelSubmit?(t.cancelSubmit=!1,r()):t.form()?t.pendingRequest?(t.formSubmitted=!0,!1):r():(t.focusInvalid(),!1)})}return t},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var e=!0,t=n(this[0].form).validate();return this.each(function(){e&=t.element(this)}),e},removeAttrs:function(e){var t={},r=this;return n.each(e.split(/\s/),function(e,n){t[n]=r.attr(n),r.removeAttr(n)}),t},rules:function(e,t){var r=this[0];if(e){var i=n.data(r.form,"validator").settings,s=i.rules,o=n.validator.staticRules(r);switch(e){case"add":n.extend(o,n.validator.normalizeRule(t)),s[r.name]=o,t.messages&&(i.messages[r.name]=n.extend(i.messages[r.name],t.messages));break;case"remove":if(!t)return delete s[r.name],o;var u={};return n.each(t.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var a=n.validator.normalizeRules(n.extend({},n.validator.metadataRules(r),n.validator.classRules(r),n.validator.attributeRules(r),n.validator.staticRules(r)),r);if(a.required){var f=a.required;delete a.required,a=n.extend({required:f},a)}return a}}),n.extend(n.expr[":"],{blank:function(e){return!n.trim(""+e.value)},filled:function(e){return!!n.trim(""+e.value)},unchecked:function(e){return!e.checked}}),n.validator=function(e,t){this.settings=n.extend(!0,{},n.validator.defaults,e),this.currentForm=t,this.init()},n.validator.format=function(e,t){return arguments.length==1?function(){var t=n.makeArray(arguments);return t.unshift(e),n.validator.format.apply(this,t)}:(arguments.length>2&&t.constructor!=Array&&(t=n.makeArray(arguments).slice(1)),t.constructor!=Array&&(t=[t]),n.each(t,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),n)}),e)},n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,t){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,r){e.type==="radio"?this.findByName(e.name).addClass(t).removeClass(r):n(e).addClass(t).removeClass(r)},unhighlight:function(e,t,r){e.type==="radio"?this.findByName(e.name).removeClass(t).addClass(r):n(e).removeClass(t).addClass(r)}},setDefaults:function(e){n.extend(n.validator.defaults,e)},messages:{required:r.required,remote:r.remote,email:r.email,url:r.url,date:r.date,dateISO:r.dateISO,number:r.number,digits:r.digits,creditcard:r.creditcard,equalTo:r.equalTo,accept:r.accept,maxlength:n.validator.format(r.maxlength),minlength:n.validator.format(r.minlength),rangelength:n.validator.format(r.rangelength),range:n.validator.format(r.range),max:n.validator.format(r.max),min:n.validator.format(r.min)},autoCreateRanges:!1,prototype:{init:function(){function r(e){var t=n.data(this[0].form,"validator"),r="on"+e.type.replace(/^validate/,"");t.settings[r]&&t.settings[r].call(t,this[0],e)}this.labelContainer=n(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm),this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};n.each(this.settings.groups,function(t,r){n.each(r.split(/\s/),function(n,r){e[r]=t})});var t=this.settings.rules;n.each(t,function(e,r){t[e]=n.validator.normalizeRule(r)}),n(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",r).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",r),this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=n(e);var t=this.check(e);return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(e){if(e){n.extend(this.errorMap,e),this.errorList=[];for(var t in e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=n.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&n.grep(this.errorList,function(t){return t.element.name==e.name}).length==1&&e},elements:function(){var e=this,t={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in t||!e.objectLength(n(this).rules())?!1:(t[this.name]=!0,!0)})},clean:function(e){return n(e)[0]},errors:function(){return n(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=n([]),this.toHide=n([]),this.currentElements=n([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(e){e=this.validationTargetFor(this.clean(e));var t=n(e).rules(),r=!1;for(var i in t){var s={method:i,parameters:t[i]};try{var o=n.validator.methods[i].call(this,e.value.replace(/\r/g,""),e,s.parameters);if(o=="dependency-mismatch"){r=!0;continue}r=!1;if(o=="pending"){this.toHide=this.toHide.not(this.errorsFor(e));return}if(!o)return this.formatAndAdd(e,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+e.id+", check the '"+s.method+"' method",u),u}}if(r)return;return this.objectLength(t)&&this.successList.push(e),!0},customMetaMessage:function(e,t){if(!n.metadata)return;var r=this.settings.meta?n(e).metadata()[this.settings.meta]:n(e).metadata();return r&&r.messages&&r.messages[t]},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor==String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customMetaMessage(e,t),!this.settings.ignoreTitle&&e.title||undefined,n.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(t,n){var r=this.defaultMessage(t,n.method),i=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.format(r.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:r,element:t}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,n=this.validElements();n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var r=this.errorsFor(e);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.attr("generated")&&r.html(t)):(r=n("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(e)):r.insertAfter(e))),!t&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return n(this).attr("for")==t})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){var t=this.currentForm;return n(document.getElementsByName(e)).map(function(n,r){return r.form==t&&r.name==e&&r||null})},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return n("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(e,t){return!!n(e,t.form).length},"function":function(e,t){return e(t)}},optional:function(e){return!n.validator.methods.required.call(this,n.trim(e.value),e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&this.pendingRequest==0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!t&&this.pendingRequest==0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return n.data(e,"previousValue")||n.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor==String?this.classRuleSettings[e]=t:n.extend(this.classRuleSettings,e)},classRules:function(e){var t={},r=n(e).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(t,n.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t={},r=n(e);for(var i in n.validator.methods){var s;i==="required"&&typeof n.fn.prop=="function"?s=r.prop(i):s=r.attr(i),s?t[i]=s:r[0].getAttribute("type")===i&&(t[i]=!0)}return t.maxlength&&/-1|2147483647|524288/.test(t.maxlength)&&delete t.maxlength,t},metadataRules:function(e){if(!n.metadata)return{};var t=n.data(e.form,"validator").settings.meta;return t?n(e).metadata()[t]:n(e).metadata()},staticRules:function(e){var t={},r=n.data(e.form,"validator");return r.settings.rules&&(t=n.validator.normalizeRule(r.settings.rules[e.name])||{}),t},normalizeRules:function(e,t){return n.each(e,function(r,i){if(i===!1){delete e[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!n(i.depends,t.form).length;break;case"function":s=i.depends.call(t,t)}s?e[r]=i.param!==undefined?i.param:!0:delete e[r]}}),n.each(e,function(r,i){e[r]=n.isFunction(i)?i(t):i}),n.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),n.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),n.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if(typeof e=="string"){var t={};n.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,r){n.validator.methods[e]=t,n.validator.messages[e]=r!=undefined?r:n.validator.messages[e],t.length<3&&n.validator.addClassRules(e,n.validator.normalizeRule(e))},methods:{required:function(e,t,r){if(!this.depend(r,t))return"dependency-mismatch";switch(t.nodeName.toLowerCase()){case"select":var i=n(t).val();return i&&i.length>0;case"input":if(this.checkable(t))return this.getLength(e,t)>0;default:return n.trim(e).length>0}},remote:function(e,t,r){if(this.optional(t))return"dependency-mismatch";var i=this.previousValue(t);this.settings.messages[t.name]||(this.settings.messages[t.name]={}),i.originalMessage=this.settings.messages[t.name].remote,this.settings.messages[t.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(this.pending[t.name])return"pending";if(i.old===e)return i.valid;i.old=e;var s=this;this.startRequest(t);var o={};return o[t.name]=e,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+t.name,dataType:"json",data:o,success:function(r){s.settings.messages[t.name].remote=i.originalMessage;var o=r===!0;if(o){var u=s.formSubmitted;s.prepareElement(t),s.formSubmitted=u,s.successList.push(t),s.showErrors()}else{var a={},f=r||s.defaultMessage(t,"remote");a[t.name]=i.message=n.isFunction(f)?f(e):f,s.showErrors(a)}i.valid=o,s.stopRequest(t,o)}},r)),"pending"},minlength:function(e,t,r){return this.optional(t)||this.getLength(n.trim(e),t)>=r},maxlength:function(e,t,r){return this.optional(t)||this.getLength(n.trim(e),t)<=r},rangelength:function(e,t,r){var i=this.getLength(n.trim(e),t);return this.optional(t)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(e))return!1;var n=0,r=0,i=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s),r=parseInt(o,10);i&&(r*=2)>9&&(r-=9),n+=r,i=!i}return n%10==0},accept:function(e,t,n){return n=typeof n=="string"?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},equalTo:function(e,t,r){var i=n(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(t).valid()});return e==i.val()}}}),n.format=n.validator.format}(e)}),define("models/evaluation",["underscore","tibbr","modules/dialog"],function(e,t,n){return t.Model.extend({baseName:"evaluations",initialize:function(){e.bindAll(this,"inviteTenantPeople")},inviteTenantPeople:function(e){var e=e||{},t=this;this.url="evaluations/invite",this.save({params:e},{complete:function(t){t.status===200?e.success&&"function"==typeof e.success&&e.success():n.alert({text:$.parseJSON(t.responseText).error})}})}})}),define("text!templates/home/invite_people.html",[],function(){return'\n    <div id="suggest-to-people">\n        <h3>${t(\'invite_to_join.invite_to_join\')}</h3>\n        <div class="error" id="client_error"></div>\n        <div id="suggest_people_message"></div>\n        <form class="invite-people-form">\n            <div style="margin:0;padding:0;display:inline">\n            </div>\n            <fieldset>\n                <ul id=" " class="email-address">\n                    <li>\n                        <label class="">${t("subject.invite_people.email_address")}</label>\n                    </li>\n                    <li>\n                        <input type="text" size="30" name="emails[]" id="email_0" class=" email  text external-email">\n                    </li>\n                    <li>\n                        <input type="text" size="30" name="emails[]" id="email_1" class=" email  text external-email">\n                    </li>\n                    <li>\n                        <input type="text" size="30" name="emails[]" id="email_2" class=" email  text external-email">\n                    </li>\n                    <li>\n                        <input type="text" size="30" name="emails[]" id="email_3" class=" email  text external-email">\n                    </li>\n                    <li>\n                        <a id="add_more_email" class="add-subject-email" href="#">${t("subject.invite_people.add_more")}</a>\n                    </li>\n                </ul>\n            </fieldset>\n            <fieldset>\n                <label class="grid_13 omega alpha">${t("subject.invite_people.add_personal_message")} :</label>\n            </fieldset>\n            <fieldset>\n                <textarea rows="5" name="suggest[message]" id="suggest_message" cols="41" class="grid_12 omega alpha text"></textarea>\n            </fieldset>\n            <fieldset class="action">\n                <button type="submit" name="commit" class="btn btn-submit tib-btn js-submit-btn">${t(\'invite_to_join.invite_button\')}<span class="arrow next"></span></button>\n            </fieldset>\n        </form>\n    </div>\n'}),define("views/home/invite_people",["jquery","underscore","tibbr","require/validate","modules/dialog","models/evaluation","text!templates/home/invite_people.html"],function(e,t,n,r,i,s,o){return n.View.extend({initialize:function(){t.bindAll(this,"render")},events:{"click .js-submit-btn":"invite_submit","click a#add_more_email":"add_email"},add_email:function(t){var r=6;return this.$(".external-email").length<r?(this.$("#add_more_email").before('<li> <input type="text" class=" email  text external-email" name="emails[]" size="30"></li>'),n.overlay.resize()):(e(t.target).hide(),e(t.target).after('<label class="error">'+n.translate("evaluation.invite_limit_exceed",{count:r})+"</label>")),!1},invite_submit:function(r){var o=this;e(".invite-people-form").validate({rules:{"emails[]":{required:!0,email:!0}},submitHandler:function(){e(r.target).append(n.UI.spinner);var u=[],a=e("#suggest_message").val();o.$(".external-email").each(function(){u.push(this.value)});if(a==="")return i.alert({text:n.translate("evaluation.invite_message_blank")}),o.$(".spinner").hide(),!1;var f={};u=t.compact(u),f.emails=u.join(","),f.message=a,f.success=function(){n.tracker.trackSend("invite colleagues","Signup"),i.alert({text:n.translate("evaluation.invitation_sent",{emails:u.join(",")})}),n.overlay.close()},f.error=function(){i.alert({text:n.translate("evaluation.invitation_not_sent")}),o.$(".spinner").hide()};var l=new s;return l.inviteTenantPeople(f),o.$(".spinner").hide(),!1}})},render:function(){return e(this.el).html(this.template.render(o)),n.overlay.resize(),this}})}),define("text!templates/home/eval_stat_hover.html",[],function(){return'<div class="eval-stats-tips">\r\n    <div class="media-box">\r\n        <div class="counter lfloat">\r\n        </div>\r\n        <div class="info">\r\n            <p><span class="heading">Days remaining</span></p>\r\n        </div>\r\n    </div>\r\n    <div class="details clearfix">\r\n        <p>You are in the day ${daysUsed} of your network\'s ${totalDays< 0?daysUsed:totalDays} day tibbr trial</p>\r\n        <table class="profile-progress-wrap">\r\n            <tr>\r\n                <td class="profile-completion-wrap">\r\n                    <div class="profile-completion progress-bar">\r\n                        <div class="bar" style="width:${percentage}%;"></div>\r\n                        <div class="completion-percentage"><span>${daysUsed} out of ${totalDays < 0?daysUsed:totalDays}</span></div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n\r\n        <div class="overdued-warning">\r\n            <p>Your trial expires in <strong>${expiresIn < 0?0:expiresIn} days</strong></p>\r\n            <p class="note">All your data will be deleted upon expiration</p>\r\n        </div>\r\n        <!--<p class="action-link ptm"><a class="js-invite-colleagues"><strong>invite colleagues</strong></a></p>-->\r\n    </div>\r\n</div>\r\n\r\n'}),define("views/home/eval_stat_hover",["jquery","underscore","tibbr","modules/overlay","views/home/invite_people","text!templates/home/eval_stat_hover.html"],function(e,t,n,r,i,s){return n.View.extend({initialize:function(){t.bindAll(this,"render")},render:function(){var t=n.currentUser.get("tenant"),r=t.default_duration+t.days_rewarded,i=t.expires_in,o=r-i,u=o*100/r;return e(this.el).html(this.template.render(s,{totalDays:r,expiresIn:i,daysUsed:o,percentage:u})),this.expiry_ticker({expiresin:i}),this},expiry_ticker:function(e){var n={},r=this.$(".counter");return n={digits:[],expiry_days:""+e.expiresin,extract_digits:function(){var e=0;if(n.expiry_days.indexOf("-")!==-1)return n.digits=[0,0],n.render_digits(),!1;var t=n.expiry_days,e=0;while(e<n.expiry_days.length)n.digits.push(t%10),t/=10,t=(t+"").split("."),t=t[0],e+=1;return n.render_digits(),!1},render_digits:function(){return n.digits=n.digits.reverse(),t.each(n.digits,function(e){r.append('<div class="number" >'+e+"</div>")}),!1}},n.extract_digits(),!1},events:{"click a.js-invite-colleagues":"invitePeople"},invitePeople:function(){var e=new i;return r.view(e.render().el),this.storeChild(e),!1}})}),define("text!templates/home/eval_statistics.html",[],function(){return'<div class="clearfix phl mvl">\r\n    <div class="media-box">\r\n        <div class="date-display">\r\n            <p> {{html t(\'common.right_bar.eval.days_left\') }}</p>\r\n            {{html tenant.expires_in < 0 ? 0 :tenant.expires_in}}\r\n        </div>\r\n        <div class="info">\r\n            <p class="desc">\r\n{{html t(\'common.right_bar.eval.left_days\', {\'count\': tenant.expires_in < 0 ? 0 :tenant.expires_in }) }}\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/home/eval_statistics",["jquery","underscore","tibbr","modules/overlay","views/common/preference_view","views/home/eval_stat_hover","views/home/invite_people","text!templates/home/eval_statistics.html"],function(e,t,n,r,i,s,o,u){return i.extend({initialize:function(){t.bindAll(this,"render"),i.prototype.initialize.call(this)},render:function(){return e(this.el).html(this.template.render(u,{tenant:n.currentUser.get("tenant")})),this.evalStatsHover(),this.expiry_ticker(),this.changeFont(),this},expiry_ticker:function(){var e={},n=this.$(".counter");return e={digits:[],expiry_days:""+n.data("expiry"),extract_digits:function(){var t=0;if(e.expiry_days.indexOf("-")!==-1)return e.digits=[0,0],e.render_digits(),!1;var n=e.expiry_days,t=0;while(t<e.expiry_days.length)e.digits.push(n%10),n/=10,n=(n+"").split("."),n=n[0],t+=1;return e.render_digits(),!1},render_digits:function(){return e.digits=e.digits.reverse(),t.each(e.digits,function(e){n.append('<div class="number" >'+e+"</div>")}),!1}},e.extract_digits(),!1},evalStatsHover:function(){this.$(".js-days-left-wrap .counter").qtip(n.qtipConfigs.profile(s,{my:"right top",at:"left top"}))},events:{"click a.js-invite-colleagues":"invitePeople"},invitePeople:function(){var e=new o;return r.view(e.render().el),this.storeChild(e),!1},changeFont:function(){var e=n.currentUser.get("tenant");return(e.users_count.toString().length>=5||e.posts_count.toString().length>=5)&&this.$(".stats-num strong").attr("style","font-size:48px !important"),!1}})}),define("text!templates/home/invite_colleagues.html",[],function(){return'<style type="text/css">.error{display: block;}</style>\r\n<form class="add-invitees phl mvl">\r\n        <ul>\r\n            <li class="title"><p>${t(\'invite_to_join.email_address\')}</p></li>\r\n            <li>\r\n                <input type="text" tabindex="1" class=" email  text external-email" id="email_0" name="emails[]" size="30">\r\n            </li>\r\n            <li>\r\n                <input type="text" class=" email  text external-email" id="email_1" name="emails[]" size="30">\r\n            </li>\r\n            <li>\r\n                <input type="text" class=" email  text external-email" id="email_2" name="emails[]" size="30">\r\n            </li>\r\n            <li>\r\n                <input type="text" class=" email  text external-email" id="email_3" name="emails[]" size="30">\r\n            </li>\r\n        <li><a href="#" class="add-more-email">${t("subject.invite_people.add_more")}</a></li>\r\n            <li class="action-link">\r\n                <input type="submit" class="btn btn-submit" value="${t(\'invite_to_join.invite_button\')}">\r\n            </li>\r\n        </ul>\r\n</form>\r\n\r\n'}),define("views/home/invite_colleagues",["jquery","underscore","tibbr","modules/dialog","text!templates/home/invite_colleagues.html"],function(e,t,n,r,i){return n.View.extend({className:"profile-wrap",render:function(){return this.$el.html(this.template.render(i,{model:this.model})),this},events:{"click input:submit":"inviteSubmit","click a.add-more-email":"addMoreEmailAddress"},inviteSubmit:function(){var i=this;e(".add-invitees").validate({rules:{"emails[]":{required:!0,email:!0}},submitHandler:function(){var e=[];i.$(".external-email").each(function(){e.push(this.value)});var s=i.$(".action-link .btn-submit");return s.attr("disabled",!0).after(n.UI.spinner),n.currentUser.inviteToJoin(t.compact(e)).done(function(e){r.alert({text:n.translate("invite_to_join.sent")}),n.overlay.close()}).fail(function(e){r.alert({text:n.currentUser.parseError(e).join("<br />")})}).always(function(){s.attr("disabled",!1),i.updateView()}),!1}})},addMoreEmailAddress:function(t){return this.$(".external-email").length<6?(this.$(".add-more-email").before('<li><input type="text" size="30" name="emails[]" id="email_4" class=" email  text external-email"></li>'),n.overlay.resize()):e(t.target).html(this.t("invite_to_join.max_limit")),!1},bind:function(){var e=this;this.$(".remote").validate({rules:{"email[]":{required:function(e){return!0},email:!0}},messages:{"email[]":{required:"This field is required",email:"Please enter a valid email address"}}})},updateView:function(){n.tracker.trackSend("invite colleagues","Signup"),this.$(".spinner").remove(),this.$(".external-email").val("")}})}),define("hbs!templates/home/invite_colleagues_button",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3 class="invite_to_tibbr"><i class="people-icon ui-inline-icon"></i>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_colleagues",u):a.call(t,"t","invite_to_join.invite_colleagues",u)))+'<i class="left-corner"></i><i class="arrow"></i></h3>\r\n    <div class="js-invite_to_tibbr wrap">\r\n    <div class="media-box"></div>\r\n    <p class="see-more"><a href="#" class="remove-widget">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",u):a.call(t,"t","common.right_bar.remove",u)))+"</a></p>\r\n</div><!--end of .wrap-->",s})}),define("views/home/invite_colleagues_button",["jquery","underscore","tibbr","modules/overlay","views/common/preference_view","views/home/invite_colleagues","hbs!templates/home/invite_colleagues_button"],function(e,t,n,r,i,s,o){return i.extend({className:"invite_to_tibbr block",initialize:function(){t.bindAll(this,"render"),i.prototype.initialize.call(this)},render:function(){return this.$el.html(this.renderTemplate(o)),this.$(".media-box").html(this.initChild(s).render().el),this.setToggle(),this}})}),define("hbs!templates/subjects/timeline_start",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+="\n            ",o={hash:{},inverse:h.program(4,v,t),fn:h.program(2,d,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,e&&e.monthName,"===",e&&e.cm,o):c.call(e,"compare",e&&e.monthName,"===",e&&e.cm,o));if(s||s===0)r+=s;r+='\n            <div class="stats">\n                <span><i class="ui-inline-icon like-icon"></i>',(s=n.likes)?s=s.call(e,{hash:{},data:t}):(s=e&&e.likes,s=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(s)+'</span>\n                <span><i class="ui-inline-icon reply-icon"></i>',(s=n.posts)?s=s.call(e,{hash:{},data:t}):(s=e&&e.posts,s=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(s)+"</span>\n            </div>\n        </div>\n            ",o={hash:{},inverse:h.noop,fn:h.program(6,m,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,(i=e&&e.followers,i==null||i===!1?i:i.length),">",0,o):c.call(e,"compare",(i=e&&e.followers,i==null||i===!1?i:i.length),">",0,o));if(s||s===0)r+=s;return r+="\n        </li>\n        ",r}function d(e,t){var r="",i,s;return r+='\n            <li class="first active js-outer-list" id="',(i=n.month)?i=i.call(e,{hash:{},data:t}):(i=e&&e.month,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+"-",(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e&&e.year,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+'">\n            <div class="wrap js-timeline">\n                <span class="lfloat">',s={hash:{},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"subject.timeline.now",s):c.call(e,"t","subject.timeline.now",s)))+"</span>\n            ",r}function v(e,t){var r="",i;return r+='\n            <li class="js-outer-list" id="',(i=n.month)?i=i.call(e,{hash:{},data:t}):(i=e&&e.month,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+"-",(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e&&e.year,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+'">\n            <div class="wrap js-timeline">\n                <span class="lfloat">',(i=n.monthName)?i=i.call(e,{hash:{},data:t}):(i=e&&e.monthName,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+"</span>\n            ",r}function m(e,t){var r="",i,s,o;r+='\n                <div class="followers-wrap">\n                    <h4>',o={hash:{},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"subject.timeline.new_followers",o):c.call(e,"t","subject.timeline.new_followers",o)))+'</h4>\n                    <ul class="followers-list">\n                        ',s=n.each.call(e,e&&e.followers,{hash:{},inverse:h.noop,fn:h.program(7,g,t),data:t});if(s||s===0)r+=s;return r+="\n                    </ul>\n                </div>\n            ",r}function g(e,t){var r="",i,s,o;return r+='\n                            <li><a href="',o={hash:{},data:t},r+=l((i=n.url||e&&e.url,i?i.call(e,"users",e&&e.id,o):c.call(e,"url","users",e&&e.id,o)))+'" class="profile-pic" title="',(s=n.display_name)?s=s.call(e,{hash:{},data:t}):(s=e&&e.display_name,s=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(s)+'">\n                                <img src="',o={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,e&&e.profile_image_url,3,o):c.call(e,"assetImage",e&&e.profile_image_url,3,o)))+'" alt="',(s=n.display_name)?s=s.call(e,{hash:{},data:t}):(s=e&&e.display_name,s=typeof s===f?s.call(e,{hash:{},data:t}):s),r+=l(s)+'" class="medium"></a>\n                            </li>\n                        ',r}function y(e,t){var r="",i;return r+='\n            <li class="js-outer-list js-year" id="',(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e&&e.year,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+'">\n                <div class="wrap js-timeline">',(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e&&e.year,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+"</div>\n            </li>\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+="<style>.sidebar .block li.js-outer-list {\n    padding: 0\n}</style>\n<h3>",a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"subject.widgets.timeline",a):c.call(t,"t","subject.widgets.timeline",a)))+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\n<div class="timeline-nav js-timeline">\n    <ul id="recent" class="outer-list">\n        ',u=n.each.call(t,t&&t.months,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n        ",u=n.each.call(t,t&&t.years,{hash:{},inverse:h.noop,fn:h.program(9,y,i),data:i});if(u||u===0)s+=u;return s+='\n        <li class="" id="li_created">\n            <div class="wrap js-timeline">',a={hash:{createdDate:t&&t.createdDate},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"subject.timeline.created_on",a):c.call(t,"t","subject.timeline.created_on",a)))+"</div>\n        </li>\n\n    </ul>\n</div>",s})}),define("hbs!templates/subjects/timeline_year",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i,s,o;r+='\n    <li class="js-inner-list" id="',(i=n.month)?i=i.call(e,{hash:{},data:t}):(i=e&&e.month,i=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=f(i)+"-",(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e&&e.year,i=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=f(i)+'" style="display: block;">\n        <div class="wrap">',(i=n.monthName)?i=i.call(e,{hash:{},data:t}):(i=e&&e.monthName,i=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=f(i)+'\n            <div class="stats">\n                <span><i class="ui-inline-icon like-icon"></i>',(i=n.likes)?i=i.call(e,{hash:{},data:t}):(i=e&&e.likes,i=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=f(i)+'</span>\n                <span><i class="ui-inline-icon reply-icon"></i>',(i=n.posts)?i=i.call(e,{hash:{},data:t}):(i=e&&e.posts,i=typeof i===l?i.call(e,{hash:{},data:t}):i),r+=f(i)+"</span>\n            </div>\n        </div>\n        ",o={hash:{},inverse:c.noop,fn:c.program(2,p,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,(i=(i=e&&e.data,i==null||i===!1?i:i.followers),i==null||i===!1?i:i.length),">",0,o):a.call(e,"compare",(i=(i=e&&e.data,i==null||i===!1?i:i.followers),i==null||i===!1?i:i.length),">",0,o));if(s||s===0)r+=s;return r+="\n    </li>\n    ",r}function p(e,t){var r="",i,s,o;r+='\n        <div class="followers-wrap">\n            <h4>',o={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"subject.timeline.new_followers ",o):a.call(e,"t","subject.timeline.new_followers ",o)))+'</h4>\n            <ul class="followers-list">\n                ',s=n.each.call(e,e&&e.followers,{hash:{},inverse:c.noop,fn:c.program(3,d,t),data:t});if(s||s===0)r+=s;return r+="\n            </ul>\n        </div>\n        ",r}function d(e,t){var r="",i,s,o;return r+='\n                <li><a href="',o={hash:{},data:t},r+=f((i=n.url||e&&e.url,i?i.call(e,"users",e&&e.id,o):a.call(e,"url","users",e&&e.id,o)))+'" class="profile-pic" title="',(s=n.display_name)?s=s.call(e,{hash:{},data:t}):(s=e&&e.display_name,s=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(s)+'">\n                    <img src="',o={hash:{},data:t},r+=f((i=n.assetImage||e&&e.assetImage,i?i.call(e,e&&e.profile_image_url,3,o):a.call(e,"assetImage",e&&e.profile_image_url,3,o)))+'" alt="',(s=n.display_name)?s=s.call(e,{hash:{},data:t}):(s=e&&e.display_name,s=typeof s===l?s.call(e,{hash:{},data:t}):s),r+=f(s)+'" class="medium"></a></li>\n                ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<ul class="sub-nav">\n    ',u=n.each.call(t,(o=t&&t.year,o==null||o===!1?o:o.months),{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;return s+="\n</ul>",s})}),define("views/subjects/timeline",["jquery","tibbr","views/common/preference_view","hbs!templates/subjects/timeline_start","hbs!templates/subjects/timeline_year","require/moment"],function(t,n,r,i,s,o){return r.extend({className:"block",id:"timeline_nav",initialize:function(e){var t=new Date;this.months_years=e.months_years,this.created_at=e.created_at,this.msgFilters=e.msgFilters,this.monthNames=this.t("defaults.date.months"),this.current_year=t.getFullYear(),this.current_month=this.monthNames[t.getMonth()],this.msgFilters.monthName=this.current_month,this.msgFilters.year=this.current_year,this.fetched=[],this.returned=[];var r=this.months_years;this.recent=r.months[r.months.length-1],_.bindAll(this,"render","_reduceData","prefetchYear","_loadYear"),this.on("timeline:click",function(e){var t=e.currentTarget.id.split("-"),r="01",i=t[1],s=t[0],u=o(i+"-"+(s.length===1?"0"+s:s)+"-"+r).endOf("month").format("YYYY-MM-DD"),a=t[0],f={};this.current_month=this.msgFilters.monthName=f.monthName=a,this.current_year=this.msgFilters.year=f.year=i,f.activities_before=u,this.msgFilters.messages_less_than=u,_.isUndefined(s)||(_.isFunction(this.options.searchFunction)&&this.options.searchFunction(f,!0),n.application.wallTabView.show(0)),n.Event.trigger("wallFilter:reset",this)},this),this._super(e)},events:{"click .js-year":"_loadYear","click li":"_navRequest","click .timeline-nav .js-inner-list":"_playAccordianInner","click .timeline-nav .js-outer-list":"_playAccordianOuter","click a.profile-pic":"_userRequest"},render:function(){return this.appendTemplate(i,this._reduceData(t.extend(!0,{},this.months_years))),this.setToggle(),this},_reduceData:function(e){return e.months=_.filter(e.months,function(e){return e.posts!==0}),_.each(e.months,function(t,n){t.followers=t.followers.items,t.followers=t.followers.slice(0,5),_.each(t.followers,function(e,n){e=_.pick(e,"id","display_name","profile_image_url"),t.followers[n]=e}),t=_.pick(t,"followers","likes","month","posts","year"),t.monthName=this.monthNames[t.month-1],t.month_year=t.monthName+"-"+t.year,e.months[n]=t},this),_.extend({},e,{cy:this.current_year},{cm:this.current_month},{createdDate:o(this.created_at).format(n.dateFormat.DDDDD)})},_navRequest:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.currentTarget);return!n.hasClass("js-year")&&!n.hasClass("active")&&n.attr("id")!=="li_created"&&this.trigger("timeline:click",e),!1},_userRequest:function(e){n.stopPropagation(e)},_playAccordianOuter:function(e){return n.stopPropagation(e),this.$el.find(".active").removeClass("active"),t(e.currentTarget).addClass("active"),!1},_playAccordianInner:function(e){n.stopPropagation(e);var r=t(e.currentTarget);return r.siblings().removeClass("active"),r.addClass("active"),!1},prefetchYear:function(e){try{e=e||this.months_years.years[0].year.toString();var n=t("#"+e,this.$el),r={};n.length===1&&(r.currentTarget=n[0],r.fakeClick=!0),this._loadYear(r)}catch(i){}},_loadYear:function(e){n.stopPropagation(e),n.preventDefault(e);var r=e.currentTarget.id,i=t(".js-timeline",e.currentTarget);!e.fakeClick&&!this.returned[r]&&!this.fetched[r]&&i.append(n.UI.spinner);if(this.fetched[r]||!r)return!1;this.fetched[r]=!0;var o=n.path("/subjects/"+this.model.id+"/timeline_metadata.json?params[year]="+r),u=this;return t.getJSON(o).done(function(e){t(".spinner",i).hide(),u.returned[r]=!0;var n=u._reduceData(e),o=_.extend({},{year:n},{cy:r}),a=u.renderTemplate(s,o);t("#"+r,u.$el).append(a)}),!1}})}),define("models/analytic",["underscore","tibbr"],function(e,t){return t.Model.extend({baseName:"analytics"})}),define("collections/analytics",["jquery","tibbr","models/analytic"],function(e,t,n){return t.Collection.extend({className:"Analytics",model:n,tibbrURL:function(){return{controller:"analytics",action:this.action}},parse:function(e){return this.data=e,[]}})}),define("hbs!templates/home/what_happening",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n                <img class="figure" src="',s={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,(i=e&&e.week_user_by_post,i==null||i===!1?i:i.profile_image_url),5,s):f.call(e,"assetImage",(i=e&&e.week_user_by_post,i==null||i===!1?i:i.profile_image_url),5,s)))+'" height="74" width="74">\n                <div class="details">\n                    ',s={hash:{count:(i=e&&e.week_user_by_post,i==null||i===!1?i:i.total)},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"analytics.home.main_user_posts",s):f.call(e,"t","analytics.home.main_user_posts",s)))+"\n                </div>\n                ",r}function d(e,t){var r="",i,s;return r+='\n                <img class="figure" src="',s={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,(i=e&&e.user_by_likes,i==null||i===!1?i:i.profile_image_url),5,s):f.call(e,"assetImage",(i=e&&e.user_by_likes,i==null||i===!1?i:i.profile_image_url),5,s)))+'" height="74" width="74">\n                <div class="details">\n                    ',s={hash:{count:(i=e&&e.user_by_likes,i==null||i===!1?i:i.total)},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"analytics.home.main_user_likes",s):f.call(e,"t","analytics.home.main_user_likes",s)))+"\n                </div>\n                ",r}function v(e,t){var r="",i,s;return r+='\n                <img src="',s={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,(i=e&&e.week_user_by_comments,i==null||i===!1?i:i.profile_image_url),5,s):f.call(e,"assetImage",(i=e&&e.week_user_by_comments,i==null||i===!1?i:i.profile_image_url),5,s)))+'" class="figure" height="74" width="74">\n                <div class="details">\n                    ',s={hash:{count:(i=e&&e.week_user_by_comments,i==null||i===!1?i:i.total)},data:t},r+=l((i=n.t||e&&e.t,i?i.call(e,"analytics.home.main_user_comments",s):f.call(e,"t","analytics.home.main_user_comments",s)))+"\n                </div>\n                ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='\n<h3 class="what_happening"><i class="left-corner"></i>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.what_happening",a):f.call(t,"t","common.right_bar.what_happening",a)))+' <i class="ui-inline-icon arrow-up rfloat"></i></h3>\n\n<div class="wrap js-what_happening">\n    <section class="collage">\n        <div class="tred-block box-1" style="cursor: default">\n            ',a={hash:{count:t&&t.this_week_subjects_count},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.home.main_subject_created",a):f.call(t,"t","analytics.home.main_subject_created",a)))+'\n        </div>\n        <div class="tred-block box-2" style="cursor: default">\n            ',a={hash:{count:t&&t.total_posts_last_7_days},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.home.main_total_posts",a):f.call(t,"t","analytics.home.main_total_posts",a)))+'\n\n        </div>\n        <div class="tred-block box-4" style="cursor: default"></div>\n        <div style="cursor: default" class="tred-block box-5"></div>\n        <div style="cursor: default" class="tred-block box-6"></div>\n        <div class="tred-block box-7" style="cursor: default">\n            <div class="posts-count pic rollover">\n\n                ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,(o=t&&t.week_user_by_post,o==null||o===!1?o:o.total),"!==",0,a):f.call(t,"compare",(o=t&&t.week_user_by_post,o==null||o===!1?o:o.total),"!==",0,a));if(u||u===0)s+=u;s+='\n            </div>\n            <div class="likes-count pic rollover">\n                ',a={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,(o=t&&t.user_by_likes,o==null||o===!1?o:o.total),"!==",0,a):f.call(t,"compare",(o=t&&t.user_by_likes,o==null||o===!1?o:o.total),"!==",0,a));if(u||u===0)s+=u;s+='\n            </div>\n            <div class="comments-count last pic rollover">\n                ',a={hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,(o=t&&t.week_user_by_comments,o==null||o===!1?o:o.total),"!==",0,a):f.call(t,"compare",(o=t&&t.week_user_by_comments,o==null||o===!1?o:o.total),"!==",0,a));if(u||u===0)s+=u;return s+='\n            </div>\n        </div>\n        <div class="tred-block box-8" style="cursor: default">\n            ',a={hash:{count:t&&t.this_week_profile_update_count},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.home.main_profile_update",a):f.call(t,"t","analytics.home.main_profile_update",a)))+'\n                  </div>\n        <div class="tred-block box-9" style="cursor: default">\n            ',a={hash:{count:t&&t.total_users_count},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.home.home_users",a):f.call(t,"t","analytics.home.home_users",a)))+'        </div>\n        <div class="tred-block box-11" style="cursor: default">\n            ',a={hash:{count:t&&t.this_week_document_count},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.home.main_documents",a):f.call(t,"t","analytics.home.main_documents",a)))+'\n        </div>\n    </section>\n    <p class="see-more"><a href="#" class="remove-widget">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",a):f.call(t,"t","common.right_bar.remove",a)))+'</a> <a href="'+l((o=t&&t.url,typeof o===h?o.apply(t):o))+'" class="see-more-link">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"subject.see_more",a):f.call(t,"t","subject.see_more",a)))+"</a></p>\n</div>\n",s})}),define("views/home/what_happening",["jquery","underscore","tibbr","collections/analytics","views/common/preference_view","hbs!templates/home/what_happening"],function(e,t,n,r,i,s){return i.extend({className:"what_happening block",events:{"click .collage":"redirect","click a.see-more-link":"redirect"},initialize:function(){this._super(),this.collection=new r,this.data={},this.collection.action="home_page_data"},render:function(r){var i=this;return r=r?r.data:n.data.get("home_data","analytic"),this.$el.html(this.renderTemplate(s,this.getData(r))),t.delay(function(){i.$(".js-resize").each(function(){var t=e(this).text(),n=e(this).width();e(this).html(e("<span/>",{text:t})).data("width",n).textfill({maxFontPixels:n})}),i.setToggle(),i.$(".details").css("display",""),i.$(".collage .tred-block").css("cursor","pointer")},100),this},getData:function(e){return e=e||{},t.isObject(e.this_week_user_by_comments)?(e.week_user_by_comments=e.this_week_user_by_comments[0],e.week_user_by_comments.total=e.this_week_user_by_comments[1]):(e.week_user_by_comments={},e.week_user_by_comments.total=0),t.isObject(e.this_week_user_by_likes)?(e.user_by_likes=e.this_week_user_by_likes[0],e.user_by_likes.total=e.this_week_user_by_likes[1]):(e.user_by_likes={},e.user_by_likes.total=0),t.isObject(e.this_week_user_by_post)?(e.week_user_by_post=e.this_week_user_by_post[0],e.week_user_by_post.total=e.this_week_user_by_post[1]):(e.week_user_by_post={},e.week_user_by_post.total=0),e.this_week_subjects_count=e.this_week_subjects_count||0,e.total_posts_last_7_days=e.total_posts_last_7_days||0,e.this_week_profile_update_count=e.this_week_profile_update_count||0,e.this_week_document_count=e.this_week_document_count||0,e.total_users_count=e.total_users_count||0,e.url=n.url("insight/what_happening"),e},redirect:function(e){window.gadget&&(n.publish("redirect",n.url("insight/what_happening",{host:n.host(),gadget:!1})),e.preventDefault()),n.redirectTo("insight/what_happening")}})}),define("hbs!templates/home/conversation",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var n="",r;return n+="\r\n            "+l((r=(r=(r=e&&e.model,r==null||r===!1?r:r.user),r==null||r===!1?r:r.display_name),typeof r===f?r.apply(e):r))+"\r\n        ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="media-box" style="cursor: pointer;">\r\n    <a class="profile-pic" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",(o=t&&t.model,o==null||o===!1?o:o.user),a):c.call(t,"urlFor","show",(o=t&&t.model,o==null||o===!1?o:o.user),a)))+'">\r\n        ',a={hash:{"class":"bordered-large large"},data:i},u=(o=n.imageTag||t&&t.imageTag,o?o.call(t,(o=(o=t&&t.model,o==null||o===!1?o:o.user),o==null||o===!1?o:o.profileImageMedium),a):c.call(t,"imageTag",(o=(o=t&&t.model,o==null||o===!1?o:o.user),o==null||o===!1?o:o.profileImageMedium),a));if(u||u===0)s+=u;s+='\r\n    </a>\r\n    <div class="info">\r\n        <p>\r\n        ',a={hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i},u=(o=n.linkTo||t&&t.linkTo,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.user),a):c.call(t,"linkTo",(o=t&&t.model,o==null||o===!1?o:o.user),a));if(u||u===0)s+=u;s+="\r\n            <div  class='jsMsgContent rich-post'>",u=(o=(o=t&&t.model,o==null||o===!1?o:o.getRichContent),typeof o===f?o.apply(t):o);if(u||u===0)s+=u;return s+='</div>\r\n        </p>\r\n        <ul class="stats entry">\r\n            <li><a class="like-link js-like-action-message"></a><span class="mid-dot">·</span><span class="count likeCount">',(u=n.like_count)?u=u.call(t,{hash:{},data:i}):(u=t&&t.like_count,u=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span></li>\r\n            <li><a class="reply-link"></a><span class="mid-dot">·</span><span class="count">',(u=n.reply_count)?u=u.call(t,{hash:{},data:i}):(u=t&&t.reply_count,u=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span></li>\r\n            <li class="js-overlay"><a class="js-gotoPost" href="',(u=n.messageUrl)?u=u.call(t,{hash:{},data:i}):(u=t&&t.messageUrl,u=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(u)+'">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.go_to_post",a):c.call(t,"t","common.go_to_post",a)))+"</a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n",s})}),define("views/home/conversation_list_item",["jquery","underscore","tibbr","models/message","hbs!templates/home/conversation"],function(e,t,n,r,i){var s=n.View.extend({tagName:"li",events:{"click a.continued":"continuedText","click .info":"showPost"},initialize:function(){this.model=new r(this.model),this.bindTo(this.model,"change",this.render,this)},render:function(){return this.$el.html(this.renderTemplate(i,{include:["user"],reply_count:this.options.reply_count,like_count:this.options.like_count,messageUrl:this.model.showUrl()})),this.options.type===undefined&&this.$("li.js-overlay").remove(),this},continuedText:function(){return this.$(".jsMsgContent:first").html(this.model.getRichContent(!0)),!1},showPost:function(e){e.preventDefault();if(window.gadget){n.publish("redirect",n.url("messages/"+this.model.id,{host:n.host(),gadget:!1}));return}n.redirectTo(this.model.showUrl())}});return s}),define("hbs!templates/home/popular_conversation_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\r\n            <a class="js-see-more-conversation see-more-link more">',o={hash:{},data:t},s=(i=n.t||e&&e.t,i?i.call(e,"subject.see_more",o):f.call(e,"t","subject.see_more",o));if(s||s===0)r+=s;return r+="</a>\r\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l="function",c=this.escapeExpression,h=this;s+='<h3 class="'+c((o=(o=t&&t.nav,o==null||o===!1?o:o.key),typeof o===l?o.apply(t):o))+'">',a={hash:{},data:i},s+=c((o=n.t||t&&t.t,o?o.call(t,"common",(o=t&&t.nav,o==null||o===!1?o:o.key),a):f.call(t,"t","common",(o=t&&t.nav,o==null||o===!1?o:o.key),a)))+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\r\n<div class="js-'+c((o=(o=t&&t.nav,o==null||o===!1?o:o.key),typeof o===l?o.apply(t):o))+' wrap">\r\n    <ul id="conversation" class="phl"></ul>\r\n    <p class="see-more"><a class="remove-widget">',a={hash:{},data:i},s+=c((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",a):f.call(t,"t","common.right_bar.remove",a)))+"</a>\r\n        ",u=n["if"].call(t,t&&t.hasMorePage,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+="\r\n    </p>\r\n</div>\r\n",s})}),define("views/home/popular_conversation_list",["jquery","underscore","tibbr","views/common/preference_view","views/home/conversation_list_item","hbs!templates/home/popular_conversation_list"],function(e,t,n,r,i,s){return r.extend({className:"popular-conversations block",tmpl:'<div class="wrap mts"><ul id="conversionOverlay"></ul></div>',lastTenTmpl:'<p class="last-posts mts">'+n.translate("analytics.what_happening.popular_conversation_sub_heading")+"</p>",initialize:function(){this._super()},render:function(){var e=this.collection.data.rows,n,r=this,o=this.collection.data.totals,u;if(e.length>0||this.nav.empty_text)this.options.nav!==undefined?(e=e.slice(0,3),this.$el.html(this.renderTemplate(s,{hasMorePage:o>3,nav:this.options.nav})),n=this.$("#conversation")):(this.$el.html(this.template.render(this.tmpl)).addClass("popular-conversations-overlay").removeClass("popular-conversations, block"),this.dialogTitle=this.t("common.popular_conversations_heading"),n=this.$("#conversionOverlay"),u="overlay"),e.length>=10&&n.append(this.lastTenTmpl),t.collect(e,function(e){n.append(r.initChild(i,{model:e[0],reply_count:e[1],like_count:e[2],type:u,from:r.options.from}).render().el)});return this.setToggle(),e.length===0&&(this.nav.title=this.t("common.popular_conversations"),this.handelEmpty()),this}})}),define("hbs!modules/common/templates/resource/assets_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n    <a class="profile-pic img-wrap overlay" href="',s={hash:{},data:t},r+=l((i=n.asset||e&&e.asset,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s):f.call(e,"asset",(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s)))+'"  style="overflow:hidden; width:22px; height:22px;">\n    <img src="',s={hash:{},data:t},r+=l((i=n.asset||e&&e.asset,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.thumbnailUrl),s):f.call(e,"asset",(i=e&&e.model,i==null||i===!1?i:i.thumbnailUrl),s)))+'" width="auto" height="22">\n        </a>\n    ',r}function d(e,t){var r="",i,s;return r+='\n    <img src="',s={hash:{},data:t},r+=l((i=n.asset||e&&e.asset,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s):f.call(e,"asset",(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s)))+'" width="auto" height="22">\n    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+="<td>\n    ",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.isImage),{hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;return s+='\n</td>\n<td>\n    <span title="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.title),typeof o===h?o.apply(t):o))+'">\n      ',a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.title),25,a):f.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.title),25,a)))+"\n    </span>\n      &nbsp; "+l((o=(o=t&&t.model,o==null||o===!1?o:o.fileSize),typeof o===h?o.apply(t):o))+"\n</td>\n<td>"+l((o=(o=t&&t.model,o==null||o===!1?o:o.createdAt),typeof o===h?o.apply(t):o))+'</td>\n<td class="last">\n    <p>\n        <a href="',a={hash:{},data:i},s+=l((o=n.asset||t&&t.asset,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),a):f.call(t,"asset",(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),a)))+'" target="_blank" style="" class="btn download">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"message.download",a):f.call(t,"t","message.download",a)))+' <i class="ui-icon arrow next"></i></a>\n    </p>\n</td>',s})}),define("modules/common/views/resource/assets_list_item",["jquery","underscore","tibbr","hbs!modules/common/templates/resource/assets_list_item"],function(e,t,n,r){return n.View.extend({tagName:"tr",render:function(){return this.$el.html(this.renderTemplate(r,{model:this.model,collection:this.collection})),this},events:{"click a.overlay":"preViewImage"},preViewImage:function(t){return this.$("a.overlay").colorbox({onOpen:function(){e("#colorbox").css("z-index",99999)},onClosed:function(){e("#colorbox").css("z-index",9999)},photo:!0,open:!0,scalePhotos:!0,opacity:"0.45",width:"500px",height:"500px"}),this.$(".see-more-wrap").hide(),!1}})}),define("modules/tags/observer_input",["jquery","underscore","tibbr"],function(e,t,n){return n.View.extend({tagName:"input",initialize:function(e){t.bindAll(this,"change","check","reset"),this._trigger=!0,this.el.type="text"},frequency:600,render:function(){return this._prevVal=this.$el.val(),this.observerFiled(),this},change:function(){this.trigger("change",this.$el.val())},setValue:function(e,t){t=t||!1,t===!1&&(this._prevVal=e,this.clear()),this.$el.val(e)},observerFiled:function(){this.clear(),this.check(),this._setInterval=setInterval(this.check,this.frequency),this.$el.on("keyup",this.reset)},reset:function(){var e=this;this._trigger=!0,this._setInterval&&(clearInterval(e._setInterval),e._setInterval=setInterval(this.check,this.frequency))},clear:function(){this._setInterval&&clearInterval(this._setInterval)},check:function(){var e=this.$el,t=e.val();this._prevVal!==t&&(this._prevVal=t,e.map(this.change))},onLeave:function(){this.clear()}})}),define("hbs!modules/common/templates/common/pagination",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<p class="pagination clearfix">\n    <a  class="btn prev-btn disable js-prev"><i class="arrow prev"></i>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.previous",a):f.call(t,"t","common.previous",a)))+'</a>\n			<span class="mhxl">\n				<input class="js-page"> <span>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.of",a):f.call(t,"t","common.of",a)))+'</span> <span class="total-page mlm">',(u=n.total_pages)?u=u.call(t,{hash:{},data:i}):(u=t&&t.total_pages,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\n			</span>\n    <a  class="btn next-btn disable js-next">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.next",a):f.call(t,"t","common.next",a)))+'<i class="arrow next"></i></a>\n</p>',s})}),define("modules/common/views/common/page_scroll",["jquery","underscore","tibbr","modules/tags/observer_input","hbs!modules/common/templates/common/pagination"],function(e,t,n,r,i){return n.View.extend({className:"pagination parent_pagination pager mtm",initialize:function(n){this.type=t.isUndefined(n.type)?"scroll":n.type,this.type==="scroll"&&(this.event.bindTo(this,"scrolled_to_end",this.scrollPage),this.$el.css({cursor:"pointer"})),this.type==="bar"&&(this._input=this.initChild(r,{attributes:{style:"max-width:25px"}}).on("change",t.bind(this.changePage,this)));if(this.type==="div_scroll"){var i=this;n.$div.on("scroll",function(){e(this).scrollTop()+e(this).innerHeight()>=this.scrollHeight&&i.scrollPage()})}},events:{click:"nextPage","click .js-next":"next","click .js-prev":"prev"},render:function(){return this[this.type](),this},scroll:function(){this.$el.html(this.t("common.pagination",{range:this.range(),total_entries:this.collection.total_entries})),this.collection.total_pages===1&&this.$(".down-arrow").remove()},div_scroll:function(){this.scroll()},bar:function(){this.$el.html(this.renderTemplate(i,{page:this.collection.current_page,total_pages:this.collection.total_pages||1})),this.$(".js-page").replaceWith(this._input.render().el),this._input.setValue(this.collection.current_page),this.collection.hasMorePages&&this.$(".js-next").removeClass("disable"),this.collection.hasPreviousPage&&this.$(".js-prev").removeClass("disable")},range:function(){var e=this.collection.current_page*this.collection.per_page;return e>this.collection.total_entries&&(e=this.collection.total_entries),"1 - "+e},reset:function(){return this.render()},scrollPage:function(){this.$el.is(":visible")&&this.nextPage()},scrollDiv:function(){this.nextPage()},nextPage:function(){if(this.type==="bar")return;var e=this;if(e.fetching||!this.collection.nextPage)return;this.fetch({beforeSend:function(){e.$el.append(window.spinner)}}).done(function(){e.$(".js-range").text(" "+e.range()+" "),e.collection.current_page===e.collection.total_pages&&e.$(".down-arrow").remove()})},fetch:function(e){var t=this;return this.collection.page(e.page).fetch({silent:!0,beforeSend:function(){e.beforeSend(),t.fetching=!0}}).done(function(){t.collection.trigger("paginate"),t.$("input").val(t.collection.current_page)}).always(function(){t.$(".spinner").remove(),t.fetching=!1})},next:function(){var e=this.$(".js-next"),t=this,n=this.collection.current_page;if(e.hasClass("disable"))return;if(this.fetching||!this.collection.hasMorePages)return;if(n>=this.collection.total_pages)return;this.fetch({beforeSend:function(){e.append(spinner)}}).done(function(){t.collection.hasMorePages||e.addClass("disable"),t.collection.current_page>1&&t.$(".js-prev").removeClass("disable")})},prev:function(){var e=this.$(".js-prev"),t=this,n=this.collection.current_page;if(e.hasClass("disable"))return;if(this.fetching||!this.collection.hasPreviousPage)return;if(n<1)return;this.fetch({page:this.collection.previousPage,beforeSend:function(){e.append(spinner)}}).done(function(){t.collection.hasPreviousPage||e.addClass("disable"),t.collection.current_page<t.collection.total_pages&&t.$(".js-next").removeClass("disable")})},changePage:function(e){this.$("input").removeClass("error");var r=this,i=parseInt(e,10);t.isNumber(i)&&i!==0&&i<=this.collection.total_pages?i!==this.collection.current_page&&r.fetch({page:i,beforeSend:function(){r.$("input").after(n.UI.spinner)}}):r.$("input").addClass("error")}})}),define("hbs!modules/common/templates/resource/assets_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div id="main-content">\n    <div class="grid_16">\n        <div id="list-tab">\n            <table class="table-style-1">\n                <thead>\n                <tr>\n                    <th class="pic"></th>\n                    <th class="full-name">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.name",u):a.call(t,"t","subject.name",u)))+'</th>\n                    <th class="see-more-created-at">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.created_at",u):a.call(t,"t","subject.created_at",u)))+'</th>\n                    <th class="asset-download-link"></th>\n                </tr>\n                </thead>\n                <tbody id="asset-subject-list" class="asset-subject-list" style="align: center" data-page="1"\n                       data-total-pages="1">\n                <tr></tr>\n                </tbody>\n            </table>\n            <div class="pagination parent_pagination pager" data-update="list-view-div-list" id="pagination_list_view"></div>\n\n\n        </div>\n        <!--#list-tab-->\n    </div>\n    <!--#company-dir-tab-->\n</div>\n\n',s})}),define("modules/common/views/resource/assets_list",["jquery","underscore","tibbr","modules/common/views/resource/assets_list_item","modules/common/views/common/page_scroll","hbs!modules/common/templates/resource/assets_list"],function(e,t,n,r,i,s){return n.View.extend({className:"see-more-wrap",events:{},initialize:function(e){t.bindAll(this,"render"),this.bindTo(this.collection,"reset",this.render),this.bindTo(this.collection,"paginate",this.render)},render:function(){this.$el.html(this.renderTemplate(s,{title:this.options.title}));var e=this.collection,t=this,n=this.$("#asset-subject-list");return e.each(function(i){n.append(t.initChild(r,{model:i,collection:e}).render().el)}),t.renderScrollPagination({type:"bar"}),this}})}),define("text!modules/common/templates/resource/link_asset.html",[],function(){return'<div id="link-attachment" class="link link-attachment">\n    <h4>{{imageTag \'images/link-icon.png\', {width: 8, height: 12} }} ${t(\'common.asset.edit_link\')}</h4>\n    <table class="edit-link">\n        <tr>\n            <td id="link-partial" class="link-partial label">\n                <label for="link_url">${t(\'common.url\')} </label>\n            </td>\n            <td colspan="2">\n                <input id="link_url" class="link_url optional" name="url" type="text" placeholder="${model.get(\'url\')}" disabled=true />\n            </td>\n        </tr>\n        <tr>\n            <td class="label">\n                <label>${t(\'common.asset.link_title\')}</label>\n            </td>\n            <td class="take-remaining-space">\n                <input id="link_title" class="title" name="title" placeholder="${model.get(\'title\')}" type="text"/>\n            </td>\n            <td>\n                <button id="js-save-btn" class="btn btn-submit" type="submit" name="commit"> ${t(\'common.asset.save\')}</button>\n            </td>\n        </tr>\n    </table>\n</div>\n'}),define("modules/common/views/resource/link_asset",["jquery","underscore","tibbr","text!modules/common/templates/resource/link_asset.html"],function(e,t,n,r){return n.View.extend({events:{"click #js-save-btn":"save"},render:function(){return this.$el.html(this.template.render(r,{model:this.model})),this.$("[placeholder]").simplePlaceholder(),this},save:function(){this.$("#js-save-btn").attr("disabled","disabled").after(spinner);var e=this;this.model.set({title:this.$(".title").val()}).update().done(function(){e.closeDialog()})}})}),define("hbs!modules/common/templates/resource/links_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n        <a class="js-edit-link mts">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"subject.edit",s):a.call(e,"t","subject.edit",s)))+"</a>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<td>\n    <a target="_blank" href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.url),typeof o===l?o.apply(t):o))+'"><i class="ui-inline-icon"></i>'+f((o=(o=t&&t.model,o==null||o===!1?o:o.title),typeof o===l?o.apply(t):o))+"</a>\n</td>\n<td>"+f((o=(o=t&&t.model,o==null||o===!1?o:o.createdAt),typeof o===l?o.apply(t):o))+"\n    ",u=n["if"].call(t,t&&t.isOwner,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;return s+="\n</td>",s})}),define("modules/common/views/resource/links_list_item",["jquery","underscore","tibbr","modules/overlay","modules/common/views/resource/link_asset","hbs!modules/common/templates/resource/links_list_item"],function(e,t,n,r,i,s){return n.View.extend({tagName:"tr",events:{"click .js-edit-link":"edit"},initialize:function(){t.bindAll(this,"render")},render:function(){return this.$el.html(this.renderTemplate(s,{model:this.model,collection:this.collection,storeKey:"templates_subjects_links_list_item_html",isOwner:this.options.isOwner})),this},edit:function(){return r.render(i,{model:this.model}),e("#colorbox").css("z-index",99999),this}})}),define("text!modules/common/templates/resource/links_list.html",[],function(){return'<div id="main-content">\n    <div class="grid_16">\n        <div id="list-tab">\n            <table class="links-list table-style-1">\n                <thead>\n                <tr>\n                    <th class="full-name" style="width: 80%">${t(\'subject.name\')}</th>\n                    <th class="subscription-link">${t(\'subject.created_at\')}</th>\n                </tr>\n                </thead>\n                <tbody  data-total-pages="1" data-page="1" style="align: center" class="link-subject-list" id="link-subject-list">\n                <tr></tr>\n                </tbody>\n            </table>\n            <div class="pagination parent_pagination pager" data-update="list-view-div-list" id="pagination_list_view">  </div>\n        </div><!--#list-tab-->\n    </div><!--#company-dir-tab-->\n</div>'}),define("modules/common/views/resource/links_list",["jquery","underscore","tibbr","modules/common/views/resource/links_list_item","modules/common/views/common/page_scroll","text!modules/common/templates/resource/links_list.html"],function(e,t,n,r,i,s){return n.LinksListView=n.View.extend({className:"see-more-wrap",initialize:function(){this.bindTo(this.collection,"paginate",this.renderList)},render:function(){return this.$el.html(this.template.render(s,{model:this.model,collection:this.collection,title:this.options.title})),this.renderList(),this.renderScrollPagination({type:"bar"}),this},renderList:function(){var e=this.collection,t=this.$("#link-subject-list").empty(),n=this;return e.each(function(i){t.append(n.initChild(r,{model:i,collection:e,isOwner:n.options.isOwner}).render().el)}),this}})}),define("modules/common/collections/messages",["jquery","underscore","tibbr","../models/message"],function(e,t,n,r){return n.Collection.extend({className:"messages",tibbrURL:{controller:"users",action:"messages"},model:r,type:null,data:function(e){e=e||{},this.msgTypes=this.msgTypes||e.msgTypes;var t={page:(this.current_page||0)+1,set_actions:!0,user_id:this.userId||this.scopeId,like_by:e.like_by,include_replies:e.include_replies,start_after:this.startAfter,sort_id_less_than:this.startAfter,msg_types:this.msgTypes,subject_id:this.subjectId(),only_actions:"like,msg_reply,reply,star"};return e.user_profile&&(delete e.user_profile,delete t.user_id),this.type&&(t.include_wall_message_types=this.type),t},subjectId:function(){},load:function(e){var n={data:{params:this.data(e)}};return e&&(n=t.extend(n,e)),n.cacheKey="current_user:"+this.className,n.expire_after="30.seconds",this.getOrFetch(n)},getMoreMessages:function(e){var t=this.data(e);t.per_page=this.scroll_per_page,this.fetch({data:{params:t}})},getLatestUnreadMessage:function(e){e=t.isUndefined(e)?!0:e;var n=this.filter(function(e){return e.getMessageType()!="question"||!!e.isUnread()||!!e.hasUnreadReply()});return e?t.first(n):t.last(n)}})}),define("hbs!modules/common/templates/connect/comment_box",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="js-post-box"></div>\n<div class="js-comment-list"></div>'})}),define("hbs!modules/common/templates/connect/link",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function c(e,t){var n="",r;return n+='<a class="img js-link js-connect-link"  href="'+f((r=(r=e&&e.model,r==null||r===!1?r:r.url),typeof r===a?r.apply(e):r))+'" target="_blank"><img src="'+f((r=(r=e&&e.model,r==null||r===!1?r:r.image),typeof r===a?r.apply(e):r))+'" alt="" width="60"></a>',n}function h(e,t){var n="",r;return n+='\n            <h5><a  href="'+f((r=(r=e&&e.model,r==null||r===!1?r:r.url),typeof r===a?r.apply(e):r))+'" target="_blank">'+f((r=(r=e&&e.model,r==null||r===!1?r:r.title),typeof r===a?r.apply(e):r))+"</a></h5>\n            ",n}function p(e,t){var n="",r,i;n+="\n            <p>",i=(r=(r=e&&e.model,r==null||r===!1?r:r.description),typeof r===a?r.apply(e):r);if(i||i===0)n+=i;return n+=" </p>\n            ",n}function d(e,t){var r="",i,s;r+='\n              <i class="ui-inline-icon link-icon"></i><a href="'+f((i=(i=e&&e.model,i==null||i===!1?i:i.url),typeof i===a?i.apply(e):i))+'" ',s=n["if"].call(e,(i=e&&e.model,i==null||i===!1?i:i.isTibbrLink),{hash:{},inverse:l.program(10,m,t),fn:l.program(8,v,t),data:t});if(s||s===0)r+=s;return r+=" > "+f((i=(i=e&&e.model,i==null||i===!1?i:i.url),typeof i===a?i.apply(e):i))+"</a>\n                ",r}function v(e,t){return' target="_self" '}function m(e,t){return'target="_blank" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this;s+="<fieldset>\n",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.image),{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(u||u===0)s+=u;s+='\n<div class="info-app js-connect-link">\n    <div class="media-box">\n        <div class="info">\n            ',u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.title),{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(u||u===0)s+=u;s+="\n            ",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.description),{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(u||u===0)s+=u;s+="\n            <p><span>\n                ",u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.url),{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(u||u===0)s+=u;return s+='\n            </span>\n            </p>\n\n        </div>\n    </div>\n</div>\n</fieldset>\n<input class="js-og-resource" type="hidden"/>\n\n',s})}),define("modules/common/views/messages/comment",["jquery","underscore","backbone","tibbr","../../collections/messages","./list","../post/post","hbs!modules/common/templates/connect/comment_box","hbs!modules/common/templates/connect/link"],function(e,t,n,r,i,s,o,u,a){return r.View.extend({initialize:function(e){t.bindAll(this,"renderResource"),r.Event.trigger("invoke:parent","widgetEvents","commentbox:initialize:"),r.subscribe("resource.render",this.renderResource),this.resource=e.resource||{},this.show_post_box=e.post_box,this.from=e.from||"comments",this.getCollection(),this.collection.getMoreMessages=function(e){return this.dataParams.start_after=this.startAfter,this.dataParams.page=this.nextPage,this.fetch()}},getCollection:function(){var e=t.clone(this.resource);delete e.action_links,delete e.custom_properties;var n={};params.cq&&t.each(params.cq,function(e){var r=t.keys(e);t.each(r,function(t){n[t]=e[t]})}),params.group_keys&&(n.resource_group_keys=params.group_keys);if(params.action_type){var r={search_filter:n,client_id:this.resource.app_id,set_actions:!0,params:{set_actions:!0}};params.include_resource==="true"&&(r.resource=e),this.collection=new i([],{tibbrURL:"resources/"+params.action_type,dataParams:r})}else this.resource.key||this.resource.url?this.collection=new i([],{tibbrURL:"resources/conversations",dataParams:{resource:e,set_actions:!0,params:{set_actions:!0},search_filter:n,client_id:this.resource.app_id}}):(n=t.extend(n,{resource_type:this.resource.type}),this.collection=new i([],{tibbrURL:"resources/search_comments",dataParams:{set_actions:!0,params:{set_actions:!0},search_filter:n,client_id:this.resource.app_id}}))},render:function(){this.$el.append(this.renderTemplate(u));var e=this;if(this.show_post_box){var n=this.postView=this.initChild(o,{resource:this.resource,actionUrl:r.path("/actions/publish?action_type=og:comment&client_id="+this.resource.app_id),placeholder:e.t("common.post.leave_comment"),postTo:!1,asset:params.asset!=="false",privacy:!1});r.Event.bindTo(n,"message:created",function(t){e.trigger("update:comment:count",1),r.Event.trigger("invoke:parent","updateCommentCount",1)}),r.Event.bindTo(n,"message:deleted",function(t){e.trigger("update:comment:count",-1),r.Event.trigger("invoke:parent","updateCommentCount",-1)}),this.$(".js-post-box").append(n.render().el),n.$("#post-tabs").hide(),n.display(),t.delay(function(){n.postBoxView.showFooter()},100),this.renderResource("event",this.resource)}return this.$(".js-comment-list").append(this.initChild(s,{collection:this.collection,from:this.from}).render().el),this.collection.fetch({beforeSend:function(){e.$(".js-comment-list").append(r.UI.loader)}}).always(function(){e.$(".js-comment-list").find(".line-loader").remove()}),r.Event.trigger("invoke:parent","widgetEvents","commentbox:rendered"),this},renderResource:function(e,t){this.postView.$(".preview-resource").addClass("resource-post").html(this.postView.renderTemplate(a,{model:t,view_btn:!1})).end().find("input.js-og-resource").data("resources",t)}})}),define("connect/views/comment",["jquery","underscore","tibbr","modules/common/views/messages/comment"],function(e,t,n,r){return r.extend()}),define("models/link",["underscore","tibbr","modules/common/models/link"],function(e,t,n){return n.extend({})}),define("models/resource",["underscore","tibbr","modules/common/models/resource","../collections/subject_group_subscribers","../collections/subject_group_owners"],function(e,t,n,r,i){return n.extend({parse:function(e){return e?(this.follower_groups=(new r)._set(e.subscriber_groups,{scopeId:e.id,tibbrURL:{controller:"resources",action:"follower_groups"}}),this.owner_groups=(new i)._set(e.owner_groups,{scopeId:e.id,tibbrURL:{controller:"resources",action:"owner_groups"}}),this._super(e)):e}})}),define("text!connect/templates/plugins/shared_successful.html",[],function(){return'<div id="logo" class="logo" style="margin: 60px 0 0 200px;padding-bottom: 30px;">\n    <h1><a href="#" title="home" class="">tibbr</a></h1>\n</div>\n<h2 style="text-align: center;"> tibbr has shared your post.  </h2>\n\n{{if redirectBackUrl}}\n <p> Click <a href="${redirectBackUrl}"> here</a> to go back </p>\n {{/if}}\n\n\n'}),define("connect/views/plugins/shared_successful",["jquery","underscore","backbone","tibbr","text!connect/templates/plugins/shared_successful.html"],function(e,t,n,r,i){return r.View.extend({attributes:{style:"height: 200px; width: 550px;"},tagName:"p",initialize:function(){t.bindAll(this,"render")},render:function(){return this.$el.html(this.template.render(i,{redirectBackUrl:this.options.redirectTo})),this}})}),define("connect/views/share_box",["jquery","underscore","backbone","tibbr","models/link","models/resource","views/common/post","modules/common/views/messages/resources/eog_item","connect/views/plugins/shared_successful","hbs!modules/common/templates/connect/link"],function(e,t,n,r,i,s,o,u,a,f){return r.View.extend({initialize:function(){t.bindAll(this,"renderResource"),r.Event.bindTo(this,"message:created",this.resetShareBox),r.Event.trigger("invoke:parent","widgetEvents","sharebox:initialize:"),r.subscribe("resource.render",this.renderResource)},render:function(){var n=this,s=this.options,u=e.isPlainObject(this.options.resource)?this.options.resource:JSON.parse(this.options.resource);s.placeholder=this.t("common.post.say_something"),s.asset=!1,s.id="share_box_view",s.inputClass="share_box_view",this.postView=new o(s);var a=this.postView;return this.$el.html(a.render().el),a.$("#post-tabs").hide(),a.display(),params.content&&t.defer(function(){a.$(".ts-redactor").focus(),a.$(".redactor").setCode(params.content)}),r.plugin==="share-bookmark"?(a.$(".preview-resource").addClass("resource-post").html("<p style='text-align: center;'>"+r.UI.spinner+"</p>").show(),(new i).getPreview(u.url,function(e){var t={type:"og:link",image:e.get("preview_image"),title:e.get("title"),url:e.get("url"),description:e.get("description")};a.$(".preview-resource").html(a.renderTemplate(f,{model:t,view_btn:!1})).end().find("input.js-og-resource").data("resources",t)})):this.renderResource(undefined,u),t.defer(function(){a.$("#posting_tags").insertBefore(a.$(".js-main"))}),r.plugin==="share"&&e('<button class="btn-small btn cancel" type="reset"><span>'+this.t("common.post.cancel")+"</span></button>").click(function(){r.Event.trigger("invoke:parent","closeWindow","sharebox:close")}).prependTo(e(".submit-btn-holder")),this.resource=u,r.Event.trigger("invoke:parent","widgetEvents","sharebox:rendered"),this},renderResource:function(e,t){this.resource=t,this.postView.$(".preview-resource").addClass("resource-post").html(this.postView.renderTemplate(f,{model:t,view_btn:!1})).find(".js-connect-link").remove().end().append(this.initChild(u,{model:new s(t)}).render().el).find("img.app-icon").remove().end().find("input.js-og-resource").data("resources",t).end().show()},resetShareBox:function(e){var t,n=r.host();switch(this.resource.type){case"og:file":t="file";break;case"og:idea":t="idea";break;default:t="default"}if(r.plugin==="share"||r.plugin==="external-share")try{n.substr(n.length-1)==="/"&&(n=n.substring(0,n.length-1));var i="<p style='font-size:20px; font-weight: 200;padding:5px 110px;text-align: left;'>"+this.t("message.connect.common.shared_resource."+t)+"</p> <p style='font-size:20px; font-weight:200;padding:5px 110px;text-align: left;'>"+this.t("message.connect.common.shared_file_successful_show",{id:e.id,host:n})+"</p>";this.$el.html(i),r.Event.trigger("invoke:parent","resetShareBox",undefined),r.Event.trigger("invoke:parent","updateShareCount",this.resource)}catch(s){}else r.plugin==="share-bookmark"?(n.substr(n.length-1)==="/"&&(n=n.substring(0,n.length-1)),i="<div id='logo' class='logo' style='margin: 60px 0 0 200px;padding-bottom: 30px;'><h1><a href='#' title='home'>tibbr</a></h1></div><h3 style='text-align: center;'>"+this.t("message.connect.common.shared_successful",{id:e.id,host:n})+"</h3>",this.$el.html(i)):(n.substr(n.length-1)==="/"&&(n=n.substring(0,n.length-1)),i="<div id='logo' class='logo' style='margin: 60px 0 0 200px;padding-bottom: 30px;'><h1><a href='#' title='home'>tibbr</a></h1></div><h3 style='text-align: center;'> You just shared this page on tibbr. Click <a href='"+n+"/#!/messages/"+e.id+"' target='_blank'> here </a> to view the post.</h3>",this.$el.html(i));r.Event.trigger("invoke:parent","messagePosted",undefined)}})}),define("hbs!templates/files/list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;return s+='<td>\n    <a title="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.title),typeof o===f?o.apply(t):o))+'" href="'+l((o=(o=(o=t&&t.model,o==null||o===!1?o:o.default_link),o==null||o===!1?o:o.link),typeof o===f?o.apply(t):o))+'" class="js-action-target-link file-title"\n       data-action_link="',a={hash:{},data:i},s+=l((o=n.stringify||t&&t.stringify,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.default_link),a):c.call(t,"stringify",(o=t&&t.model,o==null||o===!1?o:o.default_link),a)))+'"\n       data-target="'+l((o=(o=(o=t&&t.model,o==null||o===!1?o:o.default_link),o==null||o===!1?o:o.display_target),typeof o===f?o.apply(t):o))+'"\n       data-native="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.isNative),typeof o===f?o.apply(t):o))+'" data-app_id='+l((o=(o=t&&t.model,o==null||o===!1?o:o.app_id),typeof o===f?o.apply(t):o))+'>\n        <div style="overflow:hidden; width:24px; height:24px;float: left;margin-right: 5px;margin-top: -2px;">\n            <img src="',a={hash:{},data:i},s+=l((o=n.imagePath||t&&t.imagePath,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.thumbnailUrl),a):c.call(t,"imagePath",(o=t&&t.model,o==null||o===!1?o:o.thumbnailUrl),a)))+'" height="24">\n        </div>\n        <span class="file-name" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">',a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.title),45,a):c.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.title),45,a)))+"</span>\n    </a>\n</td>\n<td>\n    ",a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=(o=t&&t.model,o==null||o===!1?o:o.application_definition),o==null||o===!1?o:o.name),20,a):c.call(t,"truncate",(o=(o=t&&t.model,o==null||o===!1?o:o.application_definition),o==null||o===!1?o:o.name),20,a)))+'\n</td>\n<td class="js-comment-action">\n    <ul class="stats">\n        <li><a><i class="reply-link js-tibbr-comments"> </i>\n            <span class="mid-dot">·</span>\n            <span class="count js-count">',(u=n.share_count)?u=u.call(t,{hash:{},data:i}):(u=t&&t.share_count,u=typeof u===f?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\n        </a>\n\n        </li>\n    </ul>\n    <a class="js-block"></a>\n</td>\n<td>\n    <p class="shared-info">',a={hash:{},data:i},s+=l((o=n.moment||t&&t.moment,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.og_share_created_at),t&&t.date_format,a):c.call(t,"moment",(o=t&&t.model,o==null||o===!1?o:o.og_share_created_at),t&&t.date_format,a)))+" <span>",a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.share_user_name),12,a):c.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.share_user_name),12,a)))+"</span></p>\n</td>",s})}),define("hbs!templates/files/file_properties",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="file-properties-dialog">\n    <ul class="file-properties">\n\n    </ul>\n    <p class="actions-wrap">\n        <a class="btn btn-submit js-close">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"dialog.common.ok",u):a.call(t,"t","dialog.common.ok",u)))+"</a>\n    </p>\n</div>",s})}),define("views/files/list_item",["jquery","underscore","tibbr","modules/tags/select","modules/dialog","require/moment","connect/views/comment","modules/common/views/messages/copy_link","connect/views/share_box","hbs!templates/files/list_item","hbs!templates/files/file_properties"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.View.extend({tagName:"tr",initialize:function(){this.dropDownMenu=this.initChild(r,this.items()),this.bindTo(this.dropDownMenu,"change",this.navigate,this)},events:{"click .js-tibbr-comments":"comments","click a.js-action-target-link":"actionTargetLink"},render:function(){this.model.set("title",decodeURIComponent(this.model.get("title")));var e=this.model.get("action_counts");return this.$el.html(this.renderTemplate(f,{share_count:this.model.get("conversations_count")||1,date_format:this.parent&&this.parent.options.date_format||"LL"})),window.gadget&&this.$(".js-comment-action").hide(),this.$(".js-block").replaceWith(this.dropDownMenu.render().el),this},navigate:function(e){return t.isUndefined(e.method)?e.model&&this.actionTargetLink(e.model):this[e.method](),!1},items:function(){var r=this,i={defaultOption:{text:"   ",className:"more-action-link"},updateDefault:!1,selectedOptionHide:!1,selectedOptionCheck:!1,qtipClassName:"actions-dropdown-tooltip qtip-light",qtip:{position:{at:"bottom right",my:"top right",adjust:{x:8,y:-26}},show:{event:"click",solo:!0,modal:{on:!1,effect:!0,blur:!0,keyboard:!0}},hide:{event:"unfocus"}},options:t.map(["share","link","properties"],function(e){return{text:this.t("files.action."+e),method:e,icon:e+"-icon",className:e}},this),onShow:function(i){i.find("ul").wrap("<div class='actions-dropdown'/>"),i.find(".actions-dropdown").prepend('<a class="action-lbl" href="javascript:void(0)"><span>'+r.t("files.actions")+'</span><i class="arrow up"></i></a>'),t.delay(function(){i.find("a.link").data("copy",r.asset(r.model.defaultLink.link(),n.Helper.domain())).zclip({path:n.path("/images/swf/ZeroClipboard.swf"),copy:function(){return e(this).data("copy")},afterCopy:function(){e(this).trigger("copied")}})},20),i.find(".action-lbl").on("click",function(){r.dropDownMenu.hideMe()})}};return this.model.actionLinks.each(function(e){e.set("isNative",r.model.isTibbrFile(),{silent:!0}),i.options.unshift({text:e.get("label"),url:e.link(),icon:e.get("locale_key")+"-icon",model:e})}),i},link:function(){var e=this;return i.render(u,{copyText:e.asset(this.model.defaultLink.link(),n.Helper.domain()),dialog:{width:510,height:210,title:e.t("files.action.link"),className:"share-dialog"}}),!1},properties:function(){var n=this,r=e(this.renderTemplate(l));t.each(this.model.get("custom_properties"),function(e){t.include(["file_icon_image","file_original_height","file_original_width","file_preview_height","file_preview_width","file_thumbnail_height","file_thumbnail_width"],e.name)&&(e.value=null),e.name.match(/_url$/)&&(e.value=null),e.name==="file_size"&&t.isNumber(e.value)&&(e.value=Math.floor(e.value/1020)+"KB"),t.isEmpty(e.value)||r.find(".file-properties").append('<li><span class="label">'+e.label+":</span>"+'<div class="detail"><span>'+e.value+"</span></div></li>")});var s=i.view(r,{width:500,title:n.t("files.action.properties"),className:"share-dialog"});r.on("click",".js-close",function(){s.dialog("close")})},share:function(){var e=this,r=this.model,s={title:r.get("title"),url:r.isTibbrFile()?e.asset(r.get("url"),{host:n.host()}):e.asset(r.get("url")),image:r.thumbnailUrl(),description:r.get("description"),scope:r.get("scope"),app_id:r.get("app_id"),type:"og:file",key:r.get("key"),action_links:t.collect(r.get("action_links"),function(e){return t.omit(e,"id","eog_resource_id","external_ref_id","json_class")}),custom_properties:r.get("custom_properties")};i.render(a,{resource:s,actionUrl:n.path("/actions/publish?action_type=og:share&client_id="+r.get("app_id")),dialog:{width:600},complete:function(t){t.postView.postBoxView.showFooter(),e.model.get("scope")==="private"&&t.postView.postBoxView.privacyView.changeTo("private"),n.Event.bindTo(t,"invoke:parent",function(n){n==="messagePosted"&&(t.closeDialog(),e.$(".js-count").text(parseInt(e.$(".js-count").text(),10)+1))}),t.bind()}})},comments:function(){var e=this,t=this.model;return i.render(o,{post_box:!t.isTibbrFile(),resource:{title:t.get("title"),url:e.asset(t.get("url")),image:t.thumbnailUrl(),description:t.get("description"),app_id:t.get("app_id"),type:"og:file",scope:t.get("scope"),key:t.get("key"),action_links:t.get("action_links"),custom_properties:t.get("custom_properties")},complete:function(t){e.bindTo(t,"update:comment:count",function(){e.$(".js-count").text(parseInt(e.$(".js-count").text(),10)+1)})},dialog:{className:"share-dialog",width:700,max_height:500,position:["top",100],title:'<i class="ui-inline-icon comment-icon"></i><span>'+e.t("files.action.comments")+"</span>"}}),!1}});return t.extend(c.prototype,n.Modules.View.ActionLink),c}),define("hbs!templates/files/list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<thead>\n<tr>\n    <th class="title js-sort-by" style="padding-left: 5px;">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"files.title",u):a.call(t,"t","files.title",u)))+'<i class="arrow byTitle down"></i>\n    </th>\n    <th class="source">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"files.source",u):a.call(t,"t","files.source",u)))+'</th>\n    <th class="states js-comment-action"></th>\n    <th class="shared js-sort-by">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"files.last_shared",u):a.call(t,"t","files.last_shared",u)))+'<i\n            class="arrow byDate down"></i></th>\n</tr>\n</thead>\n<tbody class="file-listings"></tbody>\n',s})}),define("views/files/list",["jquery","underscore","tibbr","views/files/list_item","hbs!templates/files/list"],function(t,n,r,i,s){return r.View.extend({tagName:"table",className:"table striped",initialize:function(){this.bindTo(this.collection,"add",this.addItem),this.bindTo(this.collection,"paginate",this.renderList,this),this.type=this.options.type||"scroll",this.$el.html(this.renderTemplate(s))},render:function(){var e=this;return window.gadget&&this.$(".js-comment-action").hide(),(this.dialog||this.$tab)&&this.$(".arrow").hide(),this.renderList(),this.$el.afterRenderToDom().done(function(){e.renderPagination()}),this},renderList:function(){var e,t=this,n=this.collection,r=document.createDocumentFragment();n.each(function(s){e=t.initChild(i,{model:s,collection:n});try{r.appendChild(e.render().el)}catch(o){console.error("FileListView ",o)}}),this.type==="bar"&&this.$("tbody").empty(),this.$("tbody").append(r)},renderPagination:function(){this.renderScrollPagination({$el:this.$el.parent(),type:this.type})},addItem:function(e){this.collection.total_entries+=1,this.collection.per_page+=1,this.collection.trigger("reset:pagination"),this.$el.prepend(this.initChild(i,{model:e}).render().el)}})}),define("hbs!templates/subjects/right_block",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\n        <a class="see-more-link more" >',o={hash:{},data:t},s=(i=n.t||e&&e.t,i?i.call(e,"subject.see_more",o):f.call(e,"t","subject.see_more",o));if(s||s===0)r+=s;return r+="</a>\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l="function",c=this.escapeExpression,h=this;s+="<h3>",(o=n.header)?o=o.call(t,{hash:{},data:i}):(o=t&&t.header,o=typeof o===l?o.call(t,{hash:{},data:i}):o),s+=c(o)+' <span class="count">(',(o=n.total_entries)?o=o.call(t,{hash:{},data:i}):(o=t&&t.total_entries,o=typeof o===l?o.call(t,{hash:{},data:i}):o),s+=c(o)+')</span><i class="ui-inline-icon arrow-up rfloat"></i></h3>\n<div class="wrap js-',(o=n.key)?o=o.call(t,{hash:{},data:i}):(o=t&&t.key,o=typeof o===l?o.call(t,{hash:{},data:i}):o),s+=c(o)+'">\n    <ul class="',(o=n.key)?o=o.call(t,{hash:{},data:i}):(o=t&&t.key,o=typeof o===l?o.call(t,{hash:{},data:i}):o),s+=c(o)+'-list phl mvl" id="',(o=n.key)?o=o.call(t,{hash:{},data:i}):(o=t&&t.key,o=typeof o===l?o.call(t,{hash:{},data:i}):o),s+=c(o)+'"></ul>\n    <p class="see-more">\n\n        ',a={hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,t&&t.total_entries,">",t&&t.perPage,a):f.call(t,"compare",t&&t.total_entries,">",t&&t.perPage,a));if(u||u===0)s+=u;return s+="\n    </p>\n</div>",s})}),define("views/subjects/right_list",["jquery","underscore","tibbr","modules/dialog","collections/og_files","modules/common/models/message","views/common/preference_view","modules/common/views/resource/assets_list","modules/common/views/resource/links_list","views/files/list","hbs!templates/subjects/right_block"],function(e,t,n,r,i,s,o,u,a,f,l){return o.extend({events:{"click a.see-more-link":"renderList"},initialize:function(e){this.bindTo(this.collection,"reset",this.render),this.bindTo(this.collection,"add",this.render),this.bindTo(this.collection,"remove",this.updateList),this.itemView=this.options.itemView,this.perPage=this.options.perPage||5,this.$el.addClass(this.options.nav.className||this.options.nav.key),this._super();var t=this;n.Event.bindTo(this,"message:created reply:created",function(e){t.collection.checkForMessage("add",e)}),n.Event.bindTo(this,"message:deleted reply:deleted",function(e){t.collection.checkForMessage("remove",e)}),e.tibbrView||(n.subscribe("message.created",function(e){var n=new s(e);t.collection.checkForMessage("add",n)}),n.subscribe("reply.created",function(e){var n=new s(e);t.collection.checkForMessage("add",n)}))},render:function(){var e=this,t=this.collection;e.$el.empty();if(t.length>0||this.nav.empty_text){this.appendTemplate(l,{model:this.options.model,key:this.options.nav.key,header:this.options.header,hasMorePage:t.hasMorePages,isOwner:this.options.isOwner,perPage:this.perPage,total_entries:t.total_entries,ulId:this.options.ulId}).$el.addClass("block").show(),window.gadget&&this.$(".remove-widget").remove();var n=this.$("ul");t.each(function(r,i){i<e.perPage&&n.append(e.initChild(e.itemView,{model:r,isOwner:e.options.isOwner,collection:t,subject:e.model}).render().el)})}return t.length===0&&this.handelEmpty(),this.setToggle(),this},updateList:function(){if(this.collection.length<5&&this.collection.total_entries>5){var e=this;this.collection.fetch().done(function(){e.render()})}else this.render()},renderFiles:function(){if(this.model.get("modelType")==="Subject"&&n.currentSubject){n.currentSubject.trigger("navigate:tab","files");return}if(this.loading)return;var t=this.model.get("modelType")==="Resource"?this.model.id:n.currentUser.id,r=this.model.get("modelType")==="Resource"?"resources/<scopeId>/shared_files":"users/<scopeId>/search_resources",s=this,o=new i([],{tibbrURL:r,scopeId:t,dataParams:{page:1,per_page:15,params:{type:"og:file",sort_by:"og_share_date",sort_order:"desc",include_action_count:"og:share,og:comment",include_recent_actions:"og:share",subject_filters:{og_share_on_id:this.model.id},page:1,per_page:15}}});n.application.wallTabView.add({title:this.t("subject.files"),id:"subject-files-"+this.model.id,className:"no-zoomed",view:{context:this,View:f,options:{collection:o,useAPI:this.useAPI,date_format:"DDDDDD"}},close:!0,onRender:function(t){t.$el.wrap("<div class='tibbr-files' style='background: white'><div class='files-list' style='margin: 0'></div></div> "),t.collection.fetch({beforeSend:function(){s.loading=!0,e(".tibbr-files").append(loader)}}).done(function(){s.loading=!1,t.collection.trigger("paginate"),t.renderPagination(),e(".line-loader").remove()}).always(function(){e(".line-loader").remove()})},"switch":!0});try{window.scrollTo(0,0)}catch(u){console.log(u)}},renderFilesInDialog:function(){var e=t.clone(this.collection);e.fetched=!1,r.render(f,{useAPI:this.useAPI,type:"bar",collection:e,fetch:e,complete:function(e){e.$el.wrap("<div class='tibbr-files'><div class='files-list' style='margin: 0'></div></div> ")},dialog:{height:450,width:700,position:["center"],className:"follower-dialog-wrap",title:this.t("subject.files")}})},renderLinks:function(){if(n.currentSubject){n.currentSubject.trigger("navigate:tab","links");return}var e=t.clone(this.collection);e.fetched=!1,r.render(a,{useAPI:this.useAPI,type:"bar",collection:e,fetch:e,isOwner:this.options.isOwner,dialog:{height:450,width:700,position:["center"],className:"follower-dialog-wrap",title:this.t("subject.links")}})},renderList:function(){this.options.ulId==="files"?window.gadget?this.renderFilesInDialog():this.renderFiles():this.renderLinks()}})}),define("hbs!modules/common/templates/resource/links_right_nav",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var n="",r;return n+='\n        <img src="'+f((r=(r=e&&e.model,r==null||r===!1?r:r.preview_image),typeof r===a?r.apply(e):r))+'">\n    ',n}function p(e,t){var r="",i,s;return r+='\n        <img src="',s={hash:{},data:t},r+=f((i=n.themeImagePath||e&&e.themeImagePath,i?i.call(e,"/link-big-gray.png",s):l.call(e,"themeImagePath","/link-big-gray.png",s)))+'">\n    ',r}function d(e,t){var r="",i,s;return r+='\n                <a class="js-edit-link">',s={hash:{},data:t},r+=f((i=n.t||e&&e.t,i?i.call(e,"subject.edit",s):l.call(e,"t","subject.edit",s)))+"</a>\n            ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='<div class="media-box">\n    <a class="profile-pic" href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.url),typeof o===a?o.apply(t):o))+'">\n    ',u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.hasImage),{hash:{},inverse:c.program(3,p,i),fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;s+='\n    </a>\n    <div class="info">\n        <h6 class="asset-name"><a target="_blank" href="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.url),typeof o===a?o.apply(t):o))+'">'+f((o=(o=t&&t.model,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+'</a></h6>\n        <p class="posted-at time-stamp">'+f((o=(o=t&&t.model,o==null||o===!1?o:o.createdAt),typeof o===a?o.apply(t):o))+'</p>\n        <p class="mts">\n            ',u=n["if"].call(t,t&&t.isOwner,{hash:{},inverse:c.noop,fn:c.program(5,d,i),data:i});if(u||u===0)s+=u;return s+="\n        </p>\n    </div>\n</div>",s})}),define("modules/common/views/resource/links_right_nav",["jquery","underscore","tibbr","modules/dialog","modules/common/views/resource/link_asset","hbs!modules/common/templates/resource/links_right_nav"],function(e,t,n,r,i,s){return n.View.extend({tagName:"li",events:{"click .js-edit-link":"edit"},initialize:function(){t.bindAll(this,"edit"),this.bindTo(this.model,"change",this.saved,this)},render:function(){return this.$el.html(this.renderTemplate(s,{model:this.model,isOwner:this.options.isOwner})),this},saved:function(){this.render()},edit:function(){return r.render(i,{model:this.model}),this}})}),define("hbs!modules/common/templates/resource/assets_right_nav",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n    <a class="profile-pic img-wrap overlay" href="',s={hash:{},data:t},r+=l((i=n.asset||e&&e.asset,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s):f.call(e,"asset",(i=e&&e.model,i==null||i===!1?i:i.previewUrl),s)))+'">\n        <img src="',s={hash:{},data:t},r+=l((i=n.asset||e&&e.asset,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.thumbnailUrl),s):f.call(e,"asset",(i=e&&e.model,i==null||i===!1?i:i.thumbnailUrl),s)))+'">\n    </a>\n    ',r}function d(e,t){var n="",r;return n+='\n    <a class="profile-pic img-wrap " >\n        <img src="'+l((r=(r=e&&e.model,r==null||r===!1?r:r.imageIcon),typeof r===c?r.apply(e):r))+'">\n    </a>\n    ',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div id="link-'+l((o=(o=t&&t.model,o==null||o===!1?o:o.id),typeof o===c?o.apply(t):o))+'" class="media-box">\n    ',u=n["if"].call(t,(o=t&&t.model,o==null||o===!1?o:o.isImage),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+='\n    <div class="info">\n        <h6><a target="_blank" href="',a={hash:{},data:i},s+=l((o=n.asset||t&&t.asset,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),a):f.call(t,"asset",(o=t&&t.model,o==null||o===!1?o:o.downloadUrl),a)))+'">'+l((o=(o=t&&t.model,o==null||o===!1?o:o.title),typeof o===c?o.apply(t):o))+'</a></h6>\n        <p class="posted-at time-stamp">  '+l((o=(o=t&&t.model,o==null||o===!1?o:o.createdAt),typeof o===c?o.apply(t):o))+"</p>\n    </div>\n</div>\n",s})}),define("modules/common/views/resource/assets_right_nav",["jquery","underscore","tibbr","hbs!modules/common/templates/resource/assets_right_nav"],function(e,t,n,r){return n.View.extend({tagName:"li",events:{"click a.overlay":"preViewImage"},render:function(){return this.$el.html(this.renderTemplate(r,{model:this.model})),this},preViewImage:function(t){t.preventDefault();if(window.gadget){n.publish("redirect",this.model.previewUrl());return}return e.colorbox({photo:!0,href:this.$("a.overlay").attr("href"),scalePhotos:!0,opacity:"0.45",width:"850px",height:"600px"}),!1}})}),define("hbs!templates/subjects/recent_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function";return s+='<div class="media-box">\r\n  <a class="profile-pic" href="',u={hash:{},data:i},s+=f((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,u):a.call(t,"urlFor","show",t&&t.model,u)))+"\">\r\n      <img src='"+f((o=(o=t&&t.model,o==null||o===!1?o:o.profileImageMedium),typeof o===l?o.apply(t):o))+'\' class="subject-pic bordered-medium large" alt="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===l?o.apply(t):o))+'">\r\n  </a>\r\n  <div class="info">\r\n      <h4><a class="strong subject-name js-publish" data-event_key="subject.selected" data-event_data="',u={hash:{},data:i},s+=f((o=n.setData||t&&t.setData,o?o.call(t,t&&t.model,u):a.call(t,"setData",t&&t.model,u)))+'" href="',u={hash:{},data:i},s+=f((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,u):a.call(t,"urlFor","show",t&&t.model,u)))+'" title="'+f((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===l?o.apply(t):o))+'">',u={hash:{},data:i},s+=f((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.display_name),30,u):a.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.display_name),30,u)))+'</a>\r\n      </h4>\r\n      <p class="desc">'+f((o=(o=t&&t.model,o==null||o===!1?o:o.description),typeof o===l?o.apply(t):o))+"</p>\r\n\r\n      <p> ",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.created_by_small",u):a.call(t,"t","subject.created_by_small",u)))+'<a href="',u={hash:{},data:i},s+=f((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",(o=t&&t.model,o==null||o===!1?o:o.user),u):a.call(t,"urlFor","show",(o=t&&t.model,o==null||o===!1?o:o.user),u)))+'" class="people-name" title="'+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.user),o==null||o===!1?o:o.display_name),typeof o===l?o.apply(t):o))+'">'+f((o=(o=(o=t&&t.model,o==null||o===!1?o:o.user),o==null||o===!1?o:o.display_name),typeof o===l?o.apply(t):o))+'</a></p>\r\n      <p class="time-stamp">'+f((o=(o=t&&t.model,o==null||o===!1?o:o.createdAt),typeof o===l?o.apply(t):o))+"</p>\r\n  </div>\r\n</div>",s})}),define("views/subjects/recent_list_item",["jquery","underscore","tibbr","modules/common/views/common/hover_profile","hbs!templates/subjects/recent_list_item"],function(e,t,n,r,i){var s=n.View.extend({tagName:"li",events:{"click a.js-hash-tag":"hashTags"},initialize:function(){t.bindAll(this,"render")},render:function(){return this.model.build(),this.$el.html(this.renderTemplate(i)),this.$(".js-desc").html(n.Helper.hashToUrl(this.model.description())),this.profileHover(),this},profileHover:function(){this.$(".profile-pic").qtip(n.qtipConfigs.hovercard(r,{model:this.model}))}});return t.extend(s.prototype,n.Modules.View.ActionLink),s}),define("hbs!templates/subjects/recent_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s,o;r+='\r\n        <a class="see-more-link more" href="',(i=n.recentListUrl)?i=i.call(e,{hash:{},data:t}):(i=e&&e.recentListUrl,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+'">',o={hash:{},data:t},s=(i=n.t||e&&e.t,i?i.call(e,"subject.see_more",o):c.call(e,"t","subject.see_more",o));if(s||s===0)r+=s;return r+="</a>\r\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<h3 class="'+l((o=(o=t&&t.nav,o==null||o===!1?o:o.key),typeof o===f?o.apply(t):o))+'">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common",(o=t&&t.nav,o==null||o===!1?o:o.key),a):c.call(t,"t","common",(o=t&&t.nav,o==null||o===!1?o:o.key),a)))+'<i class="ui-inline-icon arrow-up rfloat"></i></h3>\r\n<div class="js-'+l((o=(o=t&&t.nav,o==null||o===!1?o:o.key),typeof o===f?o.apply(t):o))+' wrap">\r\n    <ul id="recommendations" class="phl mvl"></ul>\r\n    <p class="see-more"><a class="remove-widget">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.right_bar.remove",a):c.call(t,"t","common.right_bar.remove",a)))+"</a>\r\n        ",u=n["if"].call(t,t&&t.hasMorePage,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;return s+="\r\n    </p>\r\n</div>\r\n",s})}),define("views/subjects/recent_list",["jquery","underscore","tibbr","views/common/preference_view","views/subjects/recent_list_item","hbs!templates/subjects/recent_list"],function(e,t,n,r,i,s){return r.extend({className:"recent_subjects block",events:{"click .see-more-link":"redirect"},initialize:function(e){this.bindTo(this.collection,"reset",this.render),r.prototype.initialize.call(this)},render:function(){var e=this.collection;if(e.length>0){var t=n.url("subjects/recent_subjects"),r=this;this.$el.html(this.renderTemplate(s,{header:this.options.header,hasMorePage:e.hasMorePages,recentListUrl:t,nav:this.options.nav})),e.each(function(t){r.$("#recommendations").append(r.initChild(i,{model:t,collection:e}).render().el)})}return this.setToggle(),this},redirect:function(){n.publish("redirect",n.url("subjects/recent_subjects",{host:n.host(),gadget:!1}))}})}),define("hbs!templates/subjects/popular_list_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<div class="media-box">\n    <a class="profile-pic js-publish"  data-event_key="subject.selected" data-event_data="',a={hash:{},data:i},s+=l((o=n.setData||t&&t.setData,o?o.call(t,t&&t.model,a):f.call(t,"setData",t&&t.model,a)))+'" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):f.call(t,"urlFor","show",t&&t.model,a)))+"\">\n        <img src='"+l((o=(o=t&&t.model,o==null||o===!1?o:o.profileImageMedium),typeof o===c?o.apply(t):o))+'\' class="bordered-medium large" alt="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===c?o.apply(t):o))+'">\n    </a>\n    <div class="info">\n        <h4 class=" ellipsis"><a class="strong subject-name js-publish"   data-event_key="subject.selected" data-event_data="',a={hash:{},data:i},s+=l((o=n.setData||t&&t.setData,o?o.call(t,t&&t.model,a):f.call(t,"setData",t&&t.model,a)))+'" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):f.call(t,"urlFor","show",t&&t.model,a)))+'" title="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===c?o.apply(t):o))+'">'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===c?o.apply(t):o))+'</a>\n        </h4>\n        <ul class="stats">\n          <li>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.recent_posts",a):f.call(t,"t","common.recent_posts",a)))+" <span>",(u=n.posts)?u=u.call(t,{hash:{},data:i}):(u=t&&t.posts,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+"</span> </li>\n          <li>",a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"common.likes",a):f.call(t,"t","common.likes",a)))+" <span>",(u=n.likes)?u=u.call(t,{hash:{},data:i}):(u=t&&t.likes,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+" </span> </li>\n        </ul>\n    </div>\n</div>",s})}),define("views/subjects/popular_list_item",["jquery","underscore","tibbr","models/subject","modules/common/views/common/hover_profile","hbs!templates/subjects/popular_list_item"],function(e,t,n,r,i,s){return n.View.extend({tagName:"li",render:function(){var e=new r(this.model.get("0"));return this.$el.html(this.renderTemplate(s,{model:e,posts:this.model.get("1"),likes:this.model.get("2")})),this.profileHover(e),this},profileHover:function(e){if(window.gadget)return;this.$(".profile-pic").qtip(n.qtipConfigs.hovercard(i,{model:e}))}})}),define("views/subjects/popular_list",["jquery","underscore","tibbr","views/common/preference_view","views/subjects/popular_list_item","hbs!templates/subjects/recent_list"],function(e,t,n,r,i,s){return r.extend({className:"popular_subjects block",initialize:function(e){t.bindAll(this,"render"),this.bindTo(this.collection,"reset",this.render),this._super(e)},render:function(){var t=this.collection;if(t.length>0){var r=n.url("subjects/popular_subjects"),o=this;this.$el.html(this.renderTemplate(s,{header:this.options.header,recentListUrl:r,hasMorePage:t.length>3,nav:this.options.nav}));var u=this.$("#recommendations");t.each(function(n,r){r<3&&u.append(e(o.initChild(i,{model:n,collection:t}).render().el))})}return this.setToggle(),this}})}),define("hbs!modules/common/templates/common/users_list",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i;return r+=' href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e&&e.href,i=typeof i===f?i.call(e,{hash:{},data:t}):i),r+=l(i)+'" ',r}function d(e,t){var r="",i,s;return r+='\n            <img src="',s={hash:{},data:t},r+=l((i=n.imagePath||e&&e.imagePath,i?i.call(e,"images/online-icon.png",s):c.call(e,"imagePath","images/online-icon.png",s)))+'" style="position: absolute; margin-top: -15px; margin-left: 3px;"/>\n        ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+=' <a class="js-profile-pic profile-pic" title="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===f?o.apply(t):o))+'"',u=n["if"].call(t,t&&t.href,{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+=">\n        <img alt='"+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===f?o.apply(t):o))+"' src='",a={hash:{},data:i},s+=l((o=n.asset||t&&t.asset,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.mediumImage),a):c.call(t,"asset",(o=t&&t.model,o==null||o===!1?o:o.mediumImage),a)))+'\' class="medium bordered-medium"/>\n        ',a={hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.presence),"===","online",a):c.call(t,"compare",(o=t&&t.model,o==null||o===!1?o:o.presence),"===","online",a));if(u||u===0)s+=u;return s+="\n</a>\n",s})}),define("views/subjects/users_list",["jquery","underscore","tibbr","modules/common/views/common/hover_profile","hbs!modules/common/templates/common/users_list"],function(e,t,n,r,i){return n.View.extend({tagName:"li",initialize:function(){this.bindTo(this.model,"change:presence",this.render,this)},render:function(){var e=this.model,t=e.get("modelType"),r=n.hasGroup,s=n.hasInteractiveGroup,o=t==="Group",u=(!r||!s)&&o,a=t==="application_definition";return this.$el.html(this.renderTemplate(i,{model:this.model,href:u?null:a?n.Helper.url("apps",e.id,"details"):e.urlFor("show"),nonInteractiveGroup:u,isApplicationDefinition:a})),e.get("deleted")&&this.$(".js-profile-pic").addClass("ex-employee-pic"),this.options.link===!1&&this.$(".js-profile-pic").removeAttr("href").css("cursor","default"),t!=="application_definition"&&this.profileHover(),t==="User"&&this.$("a").addClass("js-publish").data({event_key:"user.selected",event_data:e.toJSON()}),this},profileHover:function(){if(!n.hoverCard)return;this.$(".js-profile-pic").qtip(n.qtipConfigs.hovercard(r,{model:this.model,link:this.options.link,useAPI:this.options.useAPI}))}})}),define("models/role",["underscore","tibbr"],function(e,t){return t.Model.extend({baseName:"roles",initialize:function(){e.bindAll(this,"add_users","remove_users")},find_by_rolename_and_context:function(t,n,r,i,s){s=s||{};var o=this,u=s.success;delete s.success,this.url="roles/find_by_rolename_and_context",this.fetch(e.extend(s,{data:{params:{context_id:r,context_type:i,include_members:!0,include_privileges:"true",rolename:n}},complete:function(e){e.status===200?(u||t.trigger("role:memberModifed"),u&&"function"==typeof u&&u(o)):t.trigger("role:error",JSON.parse(e.responseText))}}))},find_group:function(){this.action("groups","get",{data:{id:this.get("id"),params:{page:1,per_page:10}},complete:function(e){e.status===200}})},roleGroup:function(e){this.action("groups","get",{data:{id:this.get("id"),params:{page:1,per_page:10}},complete:function(t){t.status===200&&e.trigger("role:groupFound")}})},add_users:function(e,t,n,r){r=r||{};var i=this,s=r.success;delete r.success,this.action("add_members","update",{data:{id:this.get("id"),params:{user_ids:t,group_ids:n}},complete:function(t){t.status===200?s&&"function"==typeof s&&s(i):e.trigger("role:error",JSON.parse(t.responseText))}})},remove_users:function(e,t,n,r){r=r||{};var i=this,s=r.success;return delete r.success,this.action("remove_members","update",{data:{id:this.get("id"),params:{group_ids:n,user_ids:t}},complete:function(t){t.status===200?(s||e.trigger("role:memberModifed"),s&&"function"==typeof s&&s(i)):e.trigger("role:error",JSON.parse(t.responseText))}})}})}),define("text!templates/common/user_item.html",[],function(){return'<td>\r\n    <a class="profile-pic js-publish" data-event_key="user.selected" data-event_data="{{= setData(user.attributes) }}" href="${user.showUrl}">\r\n        {{html _imageTag(user.get("profileImageMedium"), {\'alt\': user.get("display_name"), \'class\': "medium subject-pic",\'id\': user.get("id") }) }}\r\n    </a>\r\n    <h4><a href="${user.showUrl()}" class="subject-name js-publish" data-event_key="user.selected" data-event_data="{{= setData(user.attributes) }}" title="${user.get(\'display_name\')}">${helper.str.truncate(user.get("display_name"), 20)}</a></h4>\r\n</td>\r\n<td class="no-gadget js-no-compact">\r\n    ${user.get(\'department\')}\r\n</td>\r\n<td class="no-gadget js-no-compact">\r\n    ${user.get(\'title\')}\r\n</td>\r\n<td class="action">\r\n    <p class="action-button js-can-follow"></p>\r\n    <div class="action js-remove">\r\n        <p id="${model.get(\'id\')}" class="remove-button"><a>${t(\'user.remove\')}</a></p>\r\n    </div>\r\n</td>\r\n'}),define("text!templates/explore/subject_item.html",[],function(){return'    <td class="profile_info">\n        <div class="popup-wrap subject-popup-wrap js-no-compact">\n            <span class="about-btn"></span>\n            <div class="subject-popup">\n                <a class="profile-image" href="#">\n                    <img src=\'${model.get("profileImageMedium")}\' class="bordered-small" alt="${model.displayName}" width="50" height="50">\n                </a>\n                <div class="info js-no-compact">\n                    <h3><a href="#">${model.displayName}</a></h3>\n                    <p></p>\n                    <p></p>\n\n                </div>\n            </div><!-- .subject-popup (hidden)-->\n        </div><!-- .popup-wrap-->\n        <a class="large profile-image" href="${subject.showUrl}"> <img src=\'${model.get("profileImageMedium")}\' class="bordered-small" alt="${model.displayName}" width="50" height="50"></a>\n    </td>\n    <td colspan="2">\n        <h4 class="people-name"><a href="${subject.showUrl}" class="people_name" title=${subject.get(\'display_name\')}>${helper.str.truncate(subject.get(\'display_name\'), 100)}</a> </h4>\n\n        <p class="js-no-compact description"></p>\n    </td>\n    <td class="js-no-compact"></td>\n    <td class="js-no-compact"></td>\n    <td class="action-button js-can-follow">\n\n    </td>\n'}),define("text!templates/explore/group_item.html",[],function(){return'<td class="profile-details">\n    {{if (groups_enabled && interactive_groups )}}\n        <a class="profile-pic profile-image group-tip small" href="${group.showUrl()}">\n            <img src=\'${group.get("profileImageMedium")}\' class="bordered-medium small" alt="${group.get(\'name\')}">\n        </a>\n    {{else}}\n        <a class="profile-pic profile-image group-tip small">\n            <img src=\'${group.get("profileImageMedium")}\' class="bordered-medium small" alt="${group.get(\'name\')}">\n        </a>\n    {{/if}}\n\n    <div class="info">\n        <h6 class="people-name">&nbsp;&nbsp;&nbsp;&nbsp;\n            {{if (groups_enabled && interactive_groups )}}\n            <a href="${group.showUrl()}" title="${group.get(\'name\')}" class="people_name">${helper.str.truncate(group.get(\'name\'), 20)}</a>\n            {{else}}\n                <a class="people_name" title="${group.get(\'name\')}">${helper.str.truncate(group.get(\'name\'), 20)}</a>\n            {{/if}}\n        </h6>\n    </div>\n</td>\n<td class="desc js-no-compact"> ${helper.str.truncate(group.get(\'description\'), 18)}</td>\n<td class="js-no-compact">\n    <a href="${group.owners.first().showUrl}">${group.owners.first().attributes.display_name}</a>\n</td>\n<td class="js-no-compact">${group.createdAt()}</td>\n\n<td class="action">\n    <p class="action-button js-can-follow"></p>\n    <div class="action js-remove">\n        <p id="${model.get(\'id\')}" class="remove-button"><a>${t(\'groups.remove\')}</a></p>\n    </div>\n    <!-- handle the follow and unfollow -->\n    <!--   <a href="/tibbr/groups/follow?section=directory&amp;type=follow&amp;group_id=" class="follow-link remote group_action_link" rel="update">&nbsp;&nbsp;Follow&nbsp;&nbsp;</a>    -->\n</td>'}),define("text!templates/common/app_item.html",[],function(){return'<td>\r\n    <a class="profile-pic" href="${model.showUrl}">\r\n        <img src="${model.image(3)}" alt="${model.get(\'name\')}" class="medium bordered-medium"/>\r\n    </a>\r\n    <h4><a href="${model.showUrl()}" class="subject-name js-publish" title="${model.get(\'name\')}">${model.get("name")}</a></h4>\r\n</td>\r\n<td class="no-gadget js-no-compact">\r\n    ${model.get(\'name\')}\r\n</td>\r\n<td class="action" style="display:none">\r\n    <p class="action-button"></p>\r\n    <div class="action js-remove">\r\n        <p id="${model.get(\'id\')}" class="remove-button"><a>${t("user.apps_tab.remove")}</a></p>\r\n    </div>\r\n</td>'}),define("views/common/list_item",["jquery","underscore","tibbr","models/role","modules/dialog","modules/common/views/common/follow_button","text!templates/common/user_item.html","text!templates/explore/subject_item.html","text!templates/explore/group_item.html","text!templates/common/app_item.html"],function(e,t,n,r,i,s,o,u,a,f){return n.View.extend({tagName:"tr",initialize:function(){this.context=this.options.context,t.bindAll(this,"render"),this.bindTo(this.model,"change",this.render,this)},events:{"click .js-remove":"removeModel"},qtipConfig:n.qtipConfigs.popup,render:function(){var t,r=this.options.compact,i=this.options.canRemove,l=this.options.canFollow;this.modelType=this.model.get("modelType");switch(this.modelType){case"User":this.$el.html(this.template.render(o,{user:this.model,canRemove:i,compact:r,userHierarchyEnable:n.isHierarchy})),t=this.initChild(s,{model:this.model}),this.$(".action-button").append(t.render().el),this.renderPopup(),e(".user-tip",this.$el).qtip(this.qtipConfig(e(this.el)));break;case"Subject":this.$el.html(this.template.render(u,{subject:this.model})),t=this.initChild(s,{model:this.model}),this.$(".action-button").append(t.render().el);break;case"Group":this.$el.html(this.template.render(a,{group:this.model,groups_enabled:n.hasGroup,interactive_groups:n.hasInteractiveGroup})),t=this.initChild(s,{model:this.model}),this.$(".action-button").append(t.render().el);break;case"application_definition":this.$el.html(this.template.render(f,{model:this.model}))}return i||this.$(".js-remove").remove(),l||this.$(".js-can-follow").remove(),n.gadget&&this.$(".no-gadget").remove(),this.options.compact&&this.$(".js-no-compact").remove(),this},removeModel:function(t){var r=e(t.target),s=this;return r.append(n.UI.spinner),this.options.role?this.options.role.action("remove_members","update",{data:{params:{user_ids:this.model.id}}}).done(function(){s.collection.remove(s.model),r.find(".spinner").remove()}).fail(function(e){var t=n.$.parseJSON(e.responseText).errors.error;r.find(".spinner").remove(),i.alert({text:t})}):this.context.get("modelType")==="Resource"?this.modelType==="Group"?this.context.unsubscribeGroup(this.model.id).done(function(){s.collection.remove(s.model),r.find(".spinner").remove(),s.context.trigger("group_follower:removed","follower_groups")}).fail(function(e){var t=s.context.parseError(e.responseText);r.find(".spinner").remove(),i.alert({text:t})}):this.context.unsubscribe(this.model.id).done(function(){var e={};e[s.modelType]=s.model.id,s.collection.remove(s.model),r.find(".spinner").remove(),s.context.trigger("follower:removed","followers"),n.pub("remove_subject_follower",e)}).fail(function(e){var t=s.context.parseError(e.responseText);r.find(".spinner").remove(),i.alert({text:t})}):this.modelType==="Group"?n.currentUser.action("unsubscribe","update",{data:{params:{group_id:this.model.id,subject_id:this.context.id}}}).done(function(){s.collection.remove(s.model),r.find(".spinner").remove(),s.context.trigger("group_follower:removed","subscriber_groups")}).fail(function(e){var t=n.$.parseJSON(e.responseText).errors.error;r.find(".spinner").remove(),i.alert({text:t})}):n.currentUser.action("unsubscribe","update",{data:{params:{user_id:this.model.id,subject_id:this.context.id,section:"private_subject",type:"unsubscribe"}}}).done(function(){var e={};e[s.modelType]=s.model.id,s.collection.remove(s.model),s.context.trigger("follower:removed","followers"),r.find(".spinner").remove(),n.pub("remove_subject_follower",e)}).fail(function(e){var t=n.$.parseJSON(e.responseText).errors.error;r.find(".spinner").remove(),i.alert({text:t})}),!1},renderPopup:function(){}})}),define("hbs!templates/common/traditional_pagination",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<p class="pagination clearfix">\n    <a  class="btn prev-btn  trad_page_link js-prev"  rel="'+f((o=(o=t&&t.collection,o==null||o===!1?o:o.previousPage),typeof o===a?o.apply(t):o))+'"><i class="arrow prev"></i>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.previous",u):l.call(t,"t","common.previous",u)))+'</a>\n			<span class="mhxl">\n			<input class="active-page" id="go-to-page" style="width:auto;width:15px;" value="'+f((o=(o=t&&t.collection,o==null||o===!1?o:o.current_page),typeof o===a?o.apply(t):o))+' "/>\n                ',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.of",u):l.call(t,"t","common.of",u)))+'<span class="total-page mlm">'+f((o=(o=t&&t.collection,o==null||o===!1?o:o.total_pages),typeof o===a?o.apply(t):o))+'</span>\n			</span>\n    <a  class="btn next-btn  trad_page_link js-next" rel="'+f((o=(o=t&&t.collection,o==null||o===!1?o:o.nextPage),typeof o===a?o.apply(t):o))+'">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.next",u):l.call(t,"t","common.next",u)))+'<i class="arrow next"></i></a>\n</p>',s})}),define("views/common/traditional_pagination",["jquery","underscore","tibbr","hbs!templates/common/traditional_pagination"],function(e,t,n,r){return n.View.extend({tagName:"p",className:"pager",collection:null,events:{"click a.trad_page_link":"paginate","click span#active-page":"prepareGoToPage","keyup input#go-to-page":"goToPageObserver"},render:function(){var e=[];for(var t=1;t<this.collection.total_pages+1;t++)e.push(t);return this.collection.length>0&&this.$el.html(this.renderTemplate(r,{pages:e,collection:this.collection})),this.collection.hasPreviousPage?this.$(".js-prev").removeClass("disable").show():this.$(".js-prev").addClass("disable").hide(),this.collection.hasMorePages?this.$(".js-next").removeClass("disable").show():this.$(".js-next").addClass("disable").hide(),this},paginate:function(t){t.preventDefault();var r=e(t.target),i=r.attr("rel");if(r.hasClass("disable"))return;r.append(n.UI.spinner),r.attr("style","cursor:default!important;pointer-events: none;"),this.fetchPage(i)},fetchPage:function(e){var n=this.collection.getParams();n=t.extend(n,{page:e}),n.params=t.extend(n.params||{},{page:e}),delete n.beforeSend,this.collection.paginate(n,{})},prepareGoToPage:function(){var e=this.collection.total_pages.toString().length;this.$("input#go-to-page").attr("maxlength",e).width(e*10).show(),this.$("span#active-page").hide()},goToPageObserver:function(){this.observerHandle&&window.clearTimeout(this.observerHandle),this.$("input#go-to-page").removeClass("error");var e=this,r=parseInt(e.$("input#go-to-page").val(),10);t.isNumber(r)&&r!==0&&r<=this.collection.total_pages?r!==this.collection.current_page&&(this.observerHandle=setTimeout(function(){e.$("input#go-to-page").after(n.UI.spinner),e.fetchPage(r)},2e3)):e.$("input#go-to-page").addClass("error")}})}),define("hbs!templates/subjects/list_subject_follower",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n<h2 class="directory">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e&&e.title,i=typeof i===a?i.call(e,{hash:{},data:t}):i),r+=f(i)+'&nbsp(<span class="js-follower-count">'+f((i=(i=e&&e.collection,i==null||i===!1?i:i.total_entries),typeof i===a?i.apply(e):i))+"</span>) </h2>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;o=n["if"].call(t,t&&t.title,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+='\n\n<table class="recent-subject-list mvm">\n    <thead class="js-no-compact">\n    <tr>\n        <th class="subject-name">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"user.name",u):c.call(t,"t","user.name",u)))+'</th>\n        <th class="description no-gadget"> ',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"user.department",u):c.call(t,"t","user.department",u)))+'</th>\n        <th class="subject-owner no-gadget">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"user.job_title",u):c.call(t,"t","user.job_title",u)))+"</th>\n        <th class=\"subject-status\"></th>\n    </tr>\n    </thead>\n    <tbody id=\"list-items\">\n\n    </tbody>\n</table>\n<div class=\"pagination parent_pagination pager\"></div>\n\n<!--p class='tib-cast'>\n    <a  title='tibCast' href='_key1&params[signOutURL]=<%= (t=app_config(:site, :site_root)).include?('/tibbr') ? t.gsub('/tibbr', '/a/web') : t+='/a/web' %>/end_event?message_id=<%= link.url.match('JoinPresenterDirect') ? link.linkable.try(:thread_key).to_s.gsub('tibcast:participant_id:','') : nil%>' data-ended='<%= link.url.match('params\\[ended\\]=true')? true : false%>' class='video_conference<%= link.url.match('\\[recorded\\]=true')? '_recorded' : ''%> <%= link.url.match('params\\[mode\\]=4194304')? ' new-window' : ''%> <%=link.url.match('JoinPresenterDirect')? 'presenter' : 'participant' %>  <%= app_config(:video_conference, :adapter)=='fuzebox' ? 'new-window' : '' %> '>\n    <img src='images/tib_cast<%= link.url.match('\\[ended\\]=true')? '_close' : (link.url.match('\\[recorded\\]=true')? '_play' : '')%>.png' title='tibCast'/><strong> tibCast </strong> </a>\n    <strong><% if !link.url.match('\\[recorded\\]=true')%>  <a href=<%=app_config(:video_conference, :url)+'/portal/setup.jsp'%> target='blank'> <%=  I18n.t('shared.right_sidenav.ready_for_tibcast') %></a> <% end %></strong>\n</p-->\n",s})}),define("views/common/list_follower",["jquery","underscore","tibbr","views/common/list_item","views/common/traditional_pagination","hbs!templates/subjects/list_subject_follower"],function(e,t,n,r,i,s){return n.View.extend({className:"see-more-wrap clearfix mhxl",initialize:function(){t.bindAll(this,"render","renderList"),this.bindTo(this.collection,"reset",this.renderList),this.bindTo(this.collection,"remove",this.renderList),this.bindTo(n.currentUser.idols,"change:follow",this.updateCount),this.$el.html(this.renderTemplate(s,{collection:this.collection,title:this.options.title,storeKey:"templates_subjects_list_subject_follower_html"}))},render:function(){return n.gadget&&this.$(".no-gadget").remove(),this.$("#list-items").html(n.UI.loader),this.renderList(),this.$(".js-follower-count").html(this.options.total),this},renderList:function(){this.leaveChild(),this.$(".js-follower-count").html(this.options.total||this.collection.total_entries);var t=this.collection,n=this.$(".action-button"),s=this.$("#list-items").empty(),o=this,u=this.$(".pagination");t.each(function(e){s.append(o.initChild(r,{model:e,role:o.options.role,context:o.options.context,collection:o.collection,canRemove:o.options.canRemove,compact:o.options.compact,canFollow:o.options.canFollow}).render().el)});var a=e(".js-ProfileString").val();try{this.collection.dataParams.params.search_str=a}catch(f){}return this.options.compact&&this.$(".js-no-compact").remove(),this.pagination=this.pagination||new i({collection:this.collection,el:u}),this.pagination.render(),this},updateCount:function(e,t){if(this.collection.className!=="idols")return;this.collection.total_entries+=e,e===-1?this.collection.remove(t):this.collection.add(t)},onLeave:function(){this.pagination&&(this.pagination.leave(),this.pagination=null)}})}),define("text!templates/subjects/search_follower.html",[],function(){return'\r\n<div class="edit-subject-followers clearfix" style="display: block;">\r\n\r\n    <h3>\r\n        {{if collectionType=="user" }}\r\n        ${t("subject.find_follower.view_follower_list")}\r\n        {{else}}\r\n        ${t("subject.find_follower.view_group_list")}\r\n        {{/if}}\r\n        <i class="close-btn js-close"></i> </h3>\r\n    <div class="followers-wrap">\r\n        <div class="search-box mvm">\r\n            <form id="search_people" action="#" method="get">\r\n                <fieldset>\r\n                    {{if collectionType=="user" }}\r\n                    <input type="text" placeholder="${t(\'subject.find_follower.find_people\')}"  id="search_str" name="search_str"  class="search-string">\r\n                    {{else}}\r\n                    <input type="text" placeholder="${t(\'subject.find_follower.find_group\')}"  id="search_str" name="search_str"  class="search-string">\r\n\r\n                    {{/if}}\r\n                    <button class="search-btn" id="js-search-btn" title="${t(\'subject.find_follower.search\')}" type="button"></button>\r\n                </fieldset>\r\n            </form>\r\n        </div>\r\n        <ul class="followers-list" id="js-searched-follower">\r\n\r\n\r\n        </ul>\r\n        <p><a class="btn close js-close" href="#">${t("subject.find_follower.close")}</a></p>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n'}),define("text!templates/common/add_role_member.html",[],function(){return'\r\n    <div class="media-box">\r\n        <a class="profile-pic" href="#">\r\n            {{html _imageTag(model.image(3),{"class":"medium bordered-medium","alt": model.get(\'display_name\')} ) }}\r\n\r\n        </a>\r\n        <div class="info">\r\n            <div class="delete-admin">\r\n                {{if is_owner }}\r\n                 ${t("subject.assign_subject_owner.owner")}\r\n                {{else}}\r\n                <a rel="update" class="remote remove_user" id="${model.get(\'id\')}">${t("subject.assign_subject_owner.remove")}</a>\r\n            </div>\r\n            {{/if}}\r\n            <h6><a class="people_name strong" title=\'${model.get("display_name")}\' href=\'${model.showUrl()}\'>${helper.str.truncate(model.get("display_name"), 30)}</a></h6>\r\n            <p>${model.get("department")}</p>\r\n            <p> ${model.get("title")}</p>\r\n        </div>\r\n    </div>\r\n'}),define("text!templates/subjects/searched_follower_list.html",[],function(){return'\r\n    <div class="media-box">\r\n        <a class="profile-pic" href="${model.showUrl()}">   {{html _imageTag(model.image(3),{"class":"medium bordered-medium","alt": model.get(\'display_name\')} ) }}</a>\r\n            <div class="info">\r\n            <a class="profile-name" href="${model.showUrl()}">${model.get(\'display_name\')}</a>\r\n            <p class="dept">${model.get("department")}</p>\r\n        </div>\r\n    </div>\r\n    {{if is_owner }}\r\n    <span class="remove-link" >${t("subject.assign_subject_owner.owner")}</span>\r\n    {{else}}\r\n    <a class="remove-link remove_user" href="#" id="${model.get(\'id\')}">${t("subject.assign_subject_owner.remove")}</a>\r\n    {{/if}}\r\n'}),define("text!templates/groups/add_role_member.html",[],function(){return'{{if model.baseName === "users"}}\n\n<td><input type="hidden" value="1" name="user_ids[]" id="user_ids_">\n    <a class="profile-pic js-people-name" href="${model.showUrl()}" title="${model.get(\'display_name\')}">\n        <img src="${model.image(3)}" alt="${model.get(\'display_name\')}" class="small"/>\n    </a>\n    <div class="info">\n        <h4>\n			<a class="people_name strong js-people-name" title=\'${model.get("display_name")}\' href="${model.showUrl()}">${model.get("display_name")}</a> \n        </h4>\n    </div>\n</td>\n<td>\n    <div class="info">\n        <p>\n			${model.get("department")}\n        </p>\n    </div>\n</td>\n<td>\n    <div class="info">\n        <p> ${model.get("title")}</p>\n    </div>\n</td>\n<td>\n\n    <div class="delete-admin">\n        <a rel="update" class="remote remove_user" href="#" id="${model.get(\'id\')}">${t("subject.assign_subject_owner.remove")}</a>\n    </div>\n</td>\n\n{{else}}\n\n<div class="media-box">\n    {{if (groups_enabled && interactive_groups )}}\n    <a class="profile-pic" href="${model.showUrl}"> {{html _imageTag(model.image(3),{"class":"medium\n        bordered-medium","alt": model.get(\'name\')} ) }}</a>\n    {{else}}\n    <a class="profile-pic"> {{html _imageTag(model.image(3),{"class":"medium bordered-medium","alt": model.get(\'name\')}\n        ) }}</a>\n    {{/if}}\n    <div class="info">\n        {{if (groups_enabled && interactive_groups )}}\n        <a class="profile-name" href="${model.showUrl}">${model.get("name")}</a>\n        {{else}}\n        <a class="profile-name">${model.get("name")}</a>\n        {{/if}}\n        <p class="dept">${model.get("description")}</p>\n    </div>\n</div>\n\n<a class="remove-link remove_user" href="#" id="${model.get(\'id\')}">${t("subject.assign_subject_owner.remove")}</a>\n\n{{/if}}'}),define("views/common/add_role_member",["jquery","underscore","tibbr","text!templates/common/add_role_member.html","text!templates/subjects/searched_follower_list.html","text!templates/groups/add_role_member.html"],function(e,t,n,r,i,s){return n.View.extend({tagName:"li",initialize:function(){t.bindAll(this,"render","renderSearchedUser")},events:{"click a.js-people-name":"closeOverlay"},render:function(){return this.options.is_group==1?e(this.el).html(this.template.render(s,{model:this.model,groups_enabled:n.appConfig("groups","enable"),interactive_groups:n.appConfig("groups","interactive_groups")})):this.$el.html(this.template.render(r,{is_owner:this.options.is_owner})),this},renderSearchedUser:function(){return this.$el.html(this.template.render(i,{is_owner:this.options.is_owner})),this},closeOverlay:function(){n.overlay.close()}})}),define("views/subjects/find_subject_follower",["jquery","underscore","tibbr","models/user","text!templates/subjects/search_follower.html","collections/users_search","views/common/add_role_member"],function(e,t,n,r,i,s,o){return n.View.extend({observerHandle:null,events:{"click #js-search-btn":"searchInputObserver","keyup form#search_people input#search_str":"searchInputObserver","click .remove_user":"unfollowSubject"},initialize:function(){t.bindAll(this,"render","userList"),console.log(this.options,"uuu"),this.options.resultList.off("reset",this.userList),this.options.resultList.on("reset",this.userList)},update_follower_list:function(e){e.get("id")==this.model.get("id")&&(this.options.resultList.fetch(),this.render())},render:function(){return this.$el.html(this.template.render(i,{collectionType:"user"})),this.userList(),this},userList:function(){var e=this.$("#js-searched-follower"),n=this.model.getSubjectOwner(),r=this,i=this.options.resultList;e.empty(),i.each(function(i){e.append(r.initChild(o,{model:i,is_owner:t.include(n,i.id)}).renderSearchedUser().el)})},searchInputObserver:function(e){this.observerHandle&&window.clearTimeout(this.observerHandle);var t=this;this.resetUI();var r=t.$("form#search_people input#search_str").val(),i={search_str:r,subscriptions:this.model.id,set_actions:!0};return this.options.resultList.tibbrURL={controller:"users",action:"search_users"},this.options.resultList.setParams(i),this.observerHandle=setTimeout(function(){t.$("span.search-status").first().html(n.UI.spinner),t.options.resultList.fetch({data:{params:i}})},500),!1},resetUI:function(){this.$("ul.filters-list li").removeClass("active"),this.$("ul.filters-list li").has("img.spinner").find("img.spinner").remove(),this.$("span.search-status").first().html("")},unfollowSubject:function(e){var t=e.target.id;return n.currentUser.action("unsubscribe","update",{data:{params:{user_id:t,subject_id:this.model.id,section:"private_subject",type:"unsubscribe"}}}),this.$(e.target).parent().remove(),!1},close_follower_popup:function(){return e("#js-subject-followers-list").show(),e("#js-manage_user").hide(),!1}})}),define("hbs!templates/subjects/add_followers",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+="<!--<h3>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.add_more_followers",u):a.call(t,"t","subject.add_more_followers",u)))+"</h3>-->\n<fieldset>\n    <label>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.find_people",u):a.call(t,"t","subject.find_people",u)))+'</label>\n    <div class="auto-suggest"></div>\n</fieldset>\n<fieldset>\n    <label class="grid_13 omega alpha">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.add_personal_message",u):a.call(t,"t","subject.add_personal_message",u)))+'</label>\n    <textarea class="grid_12 omega alpha text" cols="41"  name="recommendation_text[message]" rows="5"></textarea>\n</fieldset>\n<button type="submit" name="commit" class="btn btn-submit tib-btn js-save">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.submit",u):a.call(t,"t","subject.submit",u)))+'\n    <span class="arrow next"></span></button>',s})}),define("hbs!templates/subjects/add_group_followers",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+="<h3>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.add_more_groups",u):a.call(t,"t","subject.add_more_groups",u)))+"</h3>\n<label>",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.find_group",u):a.call(t,"t","subject.find_group",u)))+'</label>\n<div class="auto-suggest"></div>\n<button type="submit" name="commit" class="btn btn-submit tib-btn js-save">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"subject.submit",u):a.call(t,"t","subject.submit",u)))+'<span class="arrow next"></span></button>\n\n',s})}),define("views/subjects/add_followers",["jquery","underscore","tibbr","modules/dialog","modules/common/views/common/auto_suggest","hbs!templates/subjects/add_followers","hbs!templates/subjects/add_group_followers"],function(e,t,n,r,i,s,o){return n.View.extend({className:"suggest-to-people clearfix",initialize:function(){t.bindAll(this,"render","add");var e=this.options.type||"users",n=e==="groups"?o:s;this.error_message=e==="groups"?this.t("subject.submit_group_error"):this.t("subject.submit_error"),this.$el.html(this.renderTemplate(n)),this.page=this.options.page||{},this.model.get("modelType")==="Resource"?this.users_filters={exclude_following_resources:this.model.get("id")}:this.users_filters={exclude_subscriptions:this.model.get("id")},this.autoSuggest=this.initChild(i,{params:{type:e,value_type:this.options.value_type||"login",groups_filters:{exclude_subscriptions:this.model.get("id")},users_filters:this.users_filters},attributes:{name:e+"_following_list",style:"width:300px"}})},events:{"click .js-save":"add"},render:function(){return this.$(".auto-suggest").html(this.autoSuggest.render().el),this},bind:function(){this.autoSuggest.bind()},add:function(){var e=this;if(this.autoSuggest.getValueInArray().length===0)r.alert({text:this.error_message});else{this.$(".js-save").attr("disabled","disabled").after(spinner);var t=this.autoSuggest.getValue(),i=this.$("textarea").val();this.options.type==="groups"?this.page==="resource-profile"?this.model.subscribeGroup(this.model,t,i).done(function(){e.$(".js-save").removeAttr("disabled","disabled"),e.$(".spinner").hide(),e.model.trigger("group_follower:added","follower_groups"),e.autoSuggest.closeAll()}):n.currentUser.action("subscribe","update",{data:{params:{group_ids:this.autoSuggest.getValueInArray(),recommendation_text:"recommendation_text",subject_id:this.model.id}},complete:function(){e.$(".js-save").removeAttr("disabled","disabled"),e.$(".spinner").hide(),e.model.trigger("group_follower:added","subscriber_groups"),e.autoSuggest.closeAll()}}):this.model.addFollowers(this.model,t,i).done(function(){e.model.trigger("follower:added","followers"),e.autoSuggest.closeAll()}).done(function(e){n.pub("add_subject_follower",{Follower:t})}).error(function(e){r.alert({text:n.Modules.Error.parse(e).join(" ")})}).always(function(){e.$(".js-save").removeAttr("disabled","disabled"),e.$(".spinner").hide()})}}})}),define("text!templates/subjects/subject_follower_list.html",[],function(){return'<div id="js-subject-followers-list" class="subject-followers">\n    <h3>\n        <span id="js-header-text">${t(\'subject.follower\')}</span>\n        <span class="count">(${collection.total_entries})</span>\n        <a class="edit-followers edit-link hidden" href="#">${t("subject.edit")}<i class="ui-inline-icon edit"></i></a>\n        <i class="arrow"></i>\n        <i class="left-corner"></i>\n    </h3>\n    <div class="wrap js-{{= nav.key}}">\n        <ul class="people-grid" id="js-subject-followers">\n        </ul>\n        <p class="see-more js-more hidden"><a class="see-more-link" href="#">{{html t("subject.see_more") }}</a></p>\n    </div>\n</div>\n<div id="js-manage_user"></div>\n<div class="submit-btn-holder rfloat js-only-owner hidden" style="clear:both">\n    <button class="btn btn-submit tib-btn js-add-link" name="commit" type="submit">\n        ${t(\'subject.add_more_followers\')}<span class="arrow next"></span>\n    </button>\n</div>'}),define("views/subjects/right_side_subject_follower",["jquery","underscore","tibbr","views/common/preference_view","collections/users","views/subjects/users_list","views/common/list_follower","views/subjects/find_subject_follower","views/subjects/add_followers","text!templates/subjects/subject_follower_list.html","modules/overlay"],function(e,t,n,r,i,s,o,u,a,f,l){return r.extend({qtipConfig:n.qtipConfigs.menu,className:"subject-followers block",initialize:function(){t.bindAll(this,"render"),this.bindTo(this.model,"change",this.render),this.bindTo(this.model,"role:memberAdd",this.close_follower_popup,this),this.bindTo(this.collection,"reset",this.render),this.bindTo(this.collection,"add",this.added,this),this.bindTo(n.currentUser.subjects,"change:count",this.close_follower_popup,this),this.options.nav={key:this.options.nav.key||"subject-followers"},this.collection.dataParams&&(this.collection.dataParams.resource=this.model.forApi()),r.prototype.initialize.call(this)},events:{"click a.see-more-link":"subjectFollower","click .edit-link":"openFollowerPopup","click .js-add-link":"addFollowers","click .js-close":"close_follower_popup"},openFollowerPopup:function(){return this.collection.off("reset",this.render),this.searchSubjectFollower(),!1},render:function(){this.$el.html(this.template.render(f,{collection:this.collection,nav:this.options.nav})),this.options.seeMoreUrl&&this.$(".js-more > a").attr("href",this.options.seeMoreUrl),this.options.title&&this.$("#js-header-text").html(this.options.title);var e=this.$("#js-subject-followers"),t=this;return this.collection.each(function(n){e.append(t.initChild(s,{model:n}).render().el)}),this.setToggle(),this.collection.hasMorePages?this.$(".js-more").show():this.$(".js-more").hide(),this.options.canEdit!==!1&&this.model.get("scope")!=="public"&&this.model.get("scope")!=="broadcast"&&this.model.isOwner?this.$(".js-only-owner").show():this.$(".js-only-owner").hide(),this},addFollowers:function(){return l.render(a,{model:this.model,collection:this.collection,dialog:{width:400,height:350}}),this},searchSubjectFollower:function(){var e=this.initChild(u,{model:this.model,params:{},resultList:this.collection});this.$("#js-subject-followers-list").hide(),this.$("#js-manage_user").html(e.render().el),this.$("#js-manage_user").show()},subjectFollower:function(){if(this.options.seeMoreUrl)return!0;var t=new i;return t.tibbrURL={controller:"users",action:"subscribers"},t.scopeId=n.currentUser.id,t.paginate({params:{set_actions:!0,page:1,per_page:10,subject_id:this.model.id}}),e("#content").html(this.initChild(o,{collection:t,model:this.model,modelType:"Subject",title:n.translate("subject.subject_follower")}).render().el),!1},close_follower_popup:function(e){this.$("#js-subject-followers-list").show(),this.$("#js-manage_user").hide();var e=e||{};return t.isEmpty(e.owners)||this.model.set("owners",e.owners.models),this.bindTo(this.collection,"reset",this.render),this.collection.tibbrURL={controller:"users",action:"subscribers"},this.collection.fetch({data:{params:{page:1,per_page:10,set_actions:!0,subject_id:this.model.id}},success:function(e){n.currentUser.subjects.trigger("update:count",{subscribers:e})}}),!1}})}),define("text!templates/resource/share_user_item.html",[],function(){return'<!--Rename this to share_users_list.html-->\n<a class="profile-pic" href="{{= url}}">\n    <img src="{{= context.image(1)}}" class="small">\n</a>\n'}),define("views/resource/share_user_item",["jquery","underscore","tibbr","models/user","modules/common/views/common/hover_profile","text!templates/resource/share_user_item.html"],function(e,t,n,r,i,s){return n.View.extend({tagName:"li",className:"media-box",initialize:function(){t.bindAll(this,"render")},render:function(){var e=this,t=this.model,n=t.isUser()?t.userShowProfileUrl(t.get("user_id")):t.showUrl();return e.$el.append(e.template.render(s,{context:t,url:n})),this.profileHover(),this},profileHover:function(){var e=this.model;if(e.isUser()){var s=t.clone(e.attributes);s.id=e.get("user_id"),s.display_name=e._display_name,delete s.modelType,delete s.json_class,e=new r(s)}this.$(".profile-pic").qtip(n.qtipConfigs.hovercard(i,{model:e}))}})}),define("text!templates/resource/share_user_list.html",[],function(){return'<div class="media-box">\n    <a class="profile-pic" href="${user.showUrl}">\n        <img src=\'${user.get("profileImageMedium")}\' class="bordered-medium medium"\n             alt="${user.get(\'display_name\')}">\n    </a>\n\n    <div class="info">\n        <h6 class=" ellipsis">\n            <a class="strong subject-name" href="${user.showUrl}" title="${user.get(\'display_name\')}">${user.get(\'display_name\')}</a>\n            ${t(\'resource.shared_this_with\')}\n        </h6>\n        <ul class="stats js-people-share-list people-list">\n        </ul>\n    </div>\n</div>\n'}),define("views/resource/share_user_list",["jquery","underscore","tibbr","models/message","collections/messages","views/resource/share_user_item","modules/common/views/common/hover_profile","text!templates/resource/share_user_list.html"],function(e,t,n,r,i,s,o,u){return n.View.extend({className:"share mbm",initialize:function(e){this.bindTo(this.model,"og:shares",this.render,this),this.resourceActions=new n.Collection,t.bindAll(this,"renderList")},render:function(){return this.collection.fetch().done(this.renderList),this},renderList:function(r){var a=this,f=this.$el,l=e("<ul/>");f.empty(),this.leaveChild(),this.resourceActions._set(r).each(function(r){var c=new i(r.get("message"));c.each(function(r){t.defer(function(){var t=r.user,i=e("<li />").append(a.template.render(u,{user:t}));i.find(".profile-pic").qtip(n.qtipConfigs.hovercard(o,{model:t})),r.subjects.each(function(e){i.find(".js-people-share-list").append(a.initChild(s,{model:e}).render().el)}),l.append(i),f.append(l)})})})}})}),define("hbs!templates/apps/resource_insight",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function";return s+='<h3><i class="left-corner"></i>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.app_insight",a):f.call(t,"t","apps.resource.app_insight",a)))+'</h3>\r\n<div class="wrap">\r\n    <ul class="app-stats">\r\n        <li class="comments">\r\n            <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.comments",a):f.call(t,"t","apps.resource.comments",a)))+'</p>\r\n            <span class="count">',(u=n.og_comments)?u=u.call(t,{hash:{},data:i}):(u=t&&t.og_comments,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\r\n        </li>\r\n        <li class="shares">\r\n            <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.shares",a):f.call(t,"t","apps.resource.shares",a)))+'</p>\r\n            <span class="count">',(u=n.og_shares)?u=u.call(t,{hash:{},data:i}):(u=t&&t.og_shares,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\r\n        </li>\r\n        <li class="likes">\r\n            <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.likes",a):f.call(t,"t","apps.resource.likes",a)))+'</p>\r\n            <span class="count">',(u=n.og_likes)?u=u.call(t,{hash:{},data:i}):(u=t&&t.og_likes,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\r\n        </li>\r\n        <li class="users last">\r\n            <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.users",a):f.call(t,"t","apps.resource.users",a)))+'</p>\r\n            <span class="count">',(u=n.users)?u=u.call(t,{hash:{},data:i}):(u=t&&t.users,u=typeof u===c?u.call(t,{hash:{},data:i}):u),s+=l(u)+'</span>\r\n        </li>\r\n    </ul>\r\n    <ul class="popular-post">\r\n        <li>\r\n            <p>',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.most_comments",a):f.call(t,"t","apps.resource.most_comments",a)))+'</p>\r\n            <p class="post-photo"><img src="'+l((o=(o=t&&t.mostComments,o==null||o===!1?o:o.image),typeof o===c?o.apply(t):o))+'" alt=""></p>\r\n            <p class="post-desc">'+l((o=(o=t&&t.mostComments,o==null||o===!1?o:o.name),typeof o===c?o.apply(t):o))+"</p>\r\n        </li>\r\n        <li>\r\n            <p>",a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.most_likes",a):f.call(t,"t","apps.resource.most_likes",a)))+'</p>\r\n            <p class="post-photo"><img src="'+l((o=(o=t&&t.mostLikes,o==null||o===!1?o:o.image),typeof o===c?o.apply(t):o))+'" alt=""></p>\r\n            <p class="post-desc">'+l((o=(o=t&&t.mostLikes,o==null||o===!1?o:o.name),typeof o===c?o.apply(t):o))+"</p>\r\n        </li>\r\n        <li>\r\n            <p>",a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.most_shares",a):f.call(t,"t","apps.resource.most_shares",a)))+'</p>\r\n            <p class="post-photo"><img src="'+l((o=(o=t&&t.mostShares,o==null||o===!1?o:o.image),typeof o===c?o.apply(t):o))+'" alt=""></p>\r\n            <p class="post-desc">'+l((o=(o=t&&t.mostShares,o==null||o===!1?o:o.name),typeof o===c?o.apply(t):o))+'</p>\r\n        </li>\r\n    </ul>\r\n    <!--<p class="see-more"><a class="see-more-link" href="javascript:void(0);">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"apps.resource.see_more",a):f.call(t,"t","apps.resource.see_more",a)))+' <i class="chevron">»</i></a></p>-->\r\n</div>\r\n',s})}),define("views/apps/resource_insight",["jquery","underscore","tibbr","hbs!templates/apps/resource_insight"],function(e,t,n,r){return n.View.extend({className:"app-insight",initialize:function(e){t.bindAll(this,"render","buildScope"),this.scope=this.buildScope(this.model)},render:function(){return this.$el.html(this.renderTemplate(r,this.scope)),this},buildScope:function(e){var t={},n,n=e.get("action_counts");return t.mostComments=e.get("resources_with_most_actions").og_comment,t.mostLikes=e.get("resources_with_most_actions").og_like,t.mostShares=e.get("resources_with_most_actions").og_share,t.og_comments=n.og_comment,t.og_shares=n.og_share,t.og_likes=n.og_like,t.users=0,t}})}),define("collections/chart_overlay_data",["jquery","tibbr","collections/messages"],function(e,t,n){return n.extend({className:"chart_data",tibbrURL:{controller:"analytics",action:"chart_data"},parse:function(e){return e.rows}})}),define("models/reply",["underscore","tibbr","modules/common/models/reply"],function(e,t,n){return n.extend({})}),define("collections/replies",["jquery","tibbr","models/reply"],function(e,t,n){return t.Collection.extend({className:"replies",tibbrURL:{action:"messages"},model:n})}),define("text!templates/analytics/message_stats_tab.html",[],function(){return'<ul class="stats-tabs">\n    <li class=\'like_li\'><a href="${model.showUrl()}" class="overlay-close"><span id="like_count"></span></a></li>\n    <li class="last"> <span  id="comment-count"></span></li>\n</ul>'}),define("views/analytics/overlay_list_item",["jquery","underscore","tibbr","backbone","collections/replies","modules/common/views/messages/mixed_asset_list","modules/common/views/messages/calendar_view","modules/common/views/messages/question","modules/common/views/messages/link_list","hbs!modules/common/templates/messages/message","text!templates/analytics/message_stats_tab.html"],function(e,t,n,r,i,s,o,u,a,f,l){return n.View.extend({tagName:"tr",tmpl:'<td class="list-no">${count}</td><td class="post-details"></td>',initialize:function(){t.bindAll(this,"render"),this.bindTo(this.model,"change",this.render,this),this.replies=new i((this.model.get("messages")||[]).reverse())},events:{"click a.continued":"continuedText","click a:not(.continued,.js-more-people)":"closeDialog"},render:function(){this.$el.html(this.template.render(this.tmpl,{count:this.options.count})),this.$el.find(".post-details").html(this.renderTemplate(f)),this.setAnalytics(),this.$(".action-links").remove();if(this.model.getMessageType()==="calendar"&&this.model.calendar)this.$(".m-holder").append(this.initChild(o,{model:this.model.calendar,parent:this}).render().el).show();else if(this.model.getMessageType()==="question"&&this.model.question){var e=new u({model:this.model.question,parent:this});this.$(".poll-wrap").append(e.render().el).show(),this.storeChild(e)}this.model.parseResources();if(this.model.assets){var r=new s({collection:this.model.assets});this.$("div.asset-attachment").append(r.render().el).show(),this.storeChild(r)}if(this.model.links){var i=new a({collection:this.model.links});this.$("div.asset-attachment").append(i.render().el).show(),this.storeChild(i)}t.isEmpty(this.model.get("application_definition_name"))&&this.$(".stream-icon").not(".private").remove();var l={showEvent:"mouseenter",hideEvent:"mouseleave",fixed:!0};return this.$("a.js-more-people").qtip(n.qtipConfigs.menu(this.$el,".js-more-people-list",l)),this},continuedText:function(){return this.$(".tib-content:first").html(this.model.getRichContent(!0)),!1},setAnalytics:function(){this.options.readOnly&&(this.$(".not-analytics, .no-reply").remove(),this.$el.find(".post-details").find(".info").append(this.template.render(l)),this.model.get("likes_count")>0&&this.$("#like_count").html(this.t("analytics.leader_board.likeCount",{moreCount:this.getFormattedLines(this.model.get("likes_count")).count,count:this.model.get("likes_count")})),this.replies.length>0?this.$("#comment-count").html(this.t("analytics.leader_board.commentCount",{moreCount:this.getFormattedLines(this.replies.length).count,count:this.replies.length})):this.$(".like_li").css("border","none"))},getFormattedLines:function(e){return e==1?{count:"",is:"is"}:{count:"s",is:"were"}},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("text!templates/analytics/poll_list.html",[],function(){return'<td class="post-details">\r\n    <div class="media-box">\r\n        {{imageTag model.user.profileImageMedium, {\'class\':\'profile-pic large\'} }}\r\n    <div class="info">\r\n        <p>{{html model.get(\'rich_content\')}} </p>\r\n\r\n        <div class="poll-wrap">\r\n\r\n        </div>\r\n        <ul class="js-people-list more-actions-menu" style="display:none">\r\n            {{each model.postedWith().unKnownList}}\r\n            <li>\r\n                <a title="{{= t(\'message.go_to_link\', {\'name\': name})}}" href="${url}"><img src="${image}" width="25" height="25" style="vertical-align: middle; padding-right: 2px;">${name}</a>\r\n            </li>\r\n            {{/each}}\r\n        </ul>\r\n        <p class="posted-to">\r\n            {{if model.get(\'subjects\').length > 0 }}\r\n            ${t(\'analytics.home.message.posted_to\')}:\r\n            {{each model.postedWith().knowList}}\r\n            <i class="ui-inline-icon ${icon} not-analytics"></i>\r\n            <a title="{{= t(\'message.go_to_link\', {\'name\': name})}}" class="js-publish" data-event_key="subject.selected"\r\n               data-event_data="{{= setData({name:  login}) }}" href="${url}">${name}</a>\r\n            {{/each}}\r\n            {{if model.postedWith().unKnownList.length > 0}}\r\n            <b> ${t(\'common.and\')}</b>\r\n            <a class="js-more-people">{{= t(\'message.more_targets\', {\'count\': model.postedWith().unKnownList.length}) }}</a>\r\n            {{/if}}\r\n            {{/if}}\r\n\r\n        </p>\r\n\r\n        <ul class="stats-tabs">\r\n            <li><p><span>{{= t(\'analytics.leader_board.likeCount\', {\'count\': model.get(\'like_to\').length }) }}</span></p></li>\r\n            <li class="last"><p> <span>{{= t(\'analytics.leader_board.commentCount\', {\'count\': model.get(\'replies_count\') }) }}</span></p></li>\r\n        </ul>\r\n    </div>\r\n    </div>\r\n</td>'}),define("views/analytics/poll_list",["jquery","underscore","tibbr","backbone","modules/common/views/messages/question","text!templates/analytics/poll_list.html","require/moment"],function(e,t,n,r,i,s,o){return n.View.extend({tagName:"tr",tmpl:'<td class="list-no">${count}</td>',events:{"click a:not(.continued)":"closeDialog"},initialize:function(){this.bindTo(this.model,"change",this.render,this)},render:function(){e(".see_more").remove(),this.$el.html(this.template.render(this.tmpl,{count:this.options.count})),this.$el.last().append(this.template.render(s,{model:this.model}));var t={showEvent:"mouseenter",hideEvent:"mouseleave",fixed:!0};return this.$(".poll-wrap").append(this.initChild(i,{model:this.model.question,parent:this}).render().el).show(),this.$("a.js-more-people").qtip(n.qtipConfigs.menu(this.$el,".js-people-list",t)),this},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("text!templates/analytics/user_item.html",[],function(){return"    <div class=\" media-box \">\r\n    <a href=\"${helper.url('users/'+model.get('id'))}\" class=\"profile-pic q-tip user js-publish\">\r\n        {{html helper.imageTag(model.image(3), {'class':'bordered-2', 'style': 'height:60px;width:60px'}) }}\r\n    </a>\r\n    <div class=\"info\">\r\n        <h4><a class=\"active-name\" href=\"${helper.url('users/'+model.get('id'))}\">${model.get('display_name')}</a></h4>\r\n    </div>\r\n</div>\r\n\r\n"}),define("views/analytics/followers_list_item",["jquery","underscore","tibbr","backbone","text!templates/analytics/user_item.html"],function(e,t,n,r,i){return n.View.extend({tagName:"tr",tmpl:'<td class="list-no">${count}</td><td class="post-details"></td>',events:{"click a":"closeDialog"},initialize:function(){this.bindTo(this.model,"change",this.render,this)},render:function(){return this.$el.html(this.template.render(this.tmpl,{count:this.options.count})),this.$el.find(".post-details").html(this.template.render(i,{model:this.model,userHierarchyEnable:n.isHierarchy})),this},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("hbs!templates/analytics/subject_item",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing;s+='<td class="list-no">'+l((o=t&&t.count,typeof o===f?o.apply(t):o))+'</td>\n<td class="details">\n    <div class="media-box">\n        <a href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):c.call(t,"urlFor","show",t&&t.model,a)))+'" class="profile-pic lfloat">\n\n            <img alt="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===f?o.apply(t):o))+"\" src='",a={hash:{},data:i},s+=l((o=n.assetImage||t&&t.assetImage,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.subject_image_url),5,a):c.call(t,"assetImage",(o=t&&t.model,o==null||o===!1?o:o.subject_image_url),5,a)))+'\' width="60" class="bordered">\n        </a>\n\n        <div class="info">\n            <h6>\n                <a class=\'active-name\' href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):c.call(t,"urlFor","show",t&&t.model,a)))+'" title="'+l((o=(o=t&&t.model,o==null||o===!1?o:o.display_name),typeof o===f?o.apply(t):o))+'">',a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.display_name),20,a):c.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.display_name),20,a)))+'</a>\n            </h6>\n            <ul class="stats-tabs">\n                <li><p><span>'+l((o=(o=t&&t.model,o==null||o===!1?o:o.subscribers_count),typeof o===f?o.apply(t):o))+"</span> ",a={hash:{count:(o=t&&t.model,o==null||o===!1?o:o.subscribers_count)},data:i},u=(o=n.t||t&&t.t,o?o.call(t,"analytics.leader_board.followers",a):c.call(t,"t","analytics.leader_board.followers",a));if(u||u===0)s+=u;s+=' </p></li>\n                <li class="last"><p>',a={hash:{count:(o=t&&t.model,o==null||o===!1?o:o.messages_count)},data:i},u=(o=n.t||t&&t.t,o?o.call(t,"analytics.leader_board.posts",a):c.call(t,"t","analytics.leader_board.posts",a));if(u||u===0)s+=u;return s+=' </p></li>\n            </ul>\n        </div>\n    </div>\n</td>\n\n\n<td class="trend-details">\n    <p class="created">',a={hash:{created_date:t&&t.created_date},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.what_happening.created_at",a):c.call(t,"t","analytics.what_happening.created_at",a)))+" &nbsp<span class=\"created-date\"></span></p>\n\n    <p class='owner'>",a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.what_happening.owner",a):c.call(t,"t","analytics.what_happening.owner",a)))+'&nbsp<a class="" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",(o=t&&t.model,o==null||o===!1?o:o.user),a):c.call(t,"urlFor","show",(o=t&&t.model,o==null||o===!1?o:o.user),a)))+'">'+l((o=(o=(o=t&&t.model,o==null||o===!1?o:o.user),o==null||o===!1?o:o.display_name),typeof o===f?o.apply(t):o))+'</a></p>\n\n    <p class="go-to-subject"><a class="" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):c.call(t,"urlFor","show",t&&t.model,a)))+'">',a={hash:{},data:i},s+=l((o=n.t||t&&t.t,o?o.call(t,"analytics.what_happening.go_to_subject",a):c.call(t,"t","analytics.what_happening.go_to_subject",a)))+"</a></p>\n</td>\n",s})}),define("views/analytics/subject_list",["jquery","underscore","tibbr","backbone","hbs!templates/analytics/subject_item","require/moment"],function(e,t,n,r,i,s){return n.View.extend({tagName:"tr",events:{"click a:not(.continued)":"closeDialog"},initialize:function(){this.bindTo(this.model,"change",this.render,this)},render:function(){return this.$el.last().append(this.renderTemplate(i,{count:this.options.count,created_date:s(this.model.get("created_at")).format("M/DD/YY")})),this},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("text!templates/analytics/document_list.html",[],function(){return'<td class="details">\r\n    <div class="media-box">\r\n        <a href="${model.downloadUrl}" style="overflow: hidden; text-align: left; height: 60px; width: 60px;" class="ui-inline file lfloat mrm icon js-qtip lfloat download_file" title="${model.get(\'data_file_name\')}">\r\n\r\n        {{if model.isImage}}\r\n            <img src="${helper.imagePath(model.icon())}" height="60"/>\r\n            {{else}}\r\n            {{imageTag \'images/file-icons/file_icon_\'+model.icon()+\'_50x50.png\'}}\r\n            {{/if}}\r\n        </a>\r\n\r\n        <div class="info">\r\n            <h6>${model.get(\'data_file_name\')}</h6>\r\n\r\n            <p>{{html message_model.getRichContent}}</p>\r\n\r\n            <p class="created">${message_model.postedAt}</p>\r\n\r\n            <p>\r\n            {{if messageUrl}}\r\n                <a href=\'${messageUrl} \'>${t(\'analytics.leader_board.go_to_mention\')}</a>\r\n            {{/if}}\r\n            </p>\r\n\r\n\r\n        </div>\r\n    </div>\r\n</td>\r\n<td class="trend-details">\r\n    <a style="  color: black;font-size: 11px;font-weight: 600;" class="btn-submit btn download_file" href="${model.downloadUrl}">${t(\'analytics.leader_board.download\')}<span\r\n            class="arrow next"></span></a>\r\n\r\n</td>\r\n'}),define("views/analytics/document_list",["jquery","underscore","tibbr","backbone","models/message","text!templates/analytics/document_list.html"],function(e,t,n,r,i,s){return n.View.extend({tagName:"tr",tmpl:'<td class="list-no">${count}</td>',events:{"click a:not(.continued,.download_file)":"closeDialog"},initialize:function(){},render:function(){this.$el.html(this.template.render(this.tmpl,{count:this.options.count}));var e=this.model.get("attachable").id!==undefined?n.url("messages/"+this.model.get("attachable").id):"";return this.$el.last().append(this.template.render(s,{model:this.model,messageUrl:e,message_model:new i(this.model.get("attachable"))})),this},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("text!templates/analytics/user_visitors.html",[],function(){return'<div class="media-box">\n    <a class="profile-pic" href="${model.showUrl}"><img alt="${model.get(\'display_name\')}" src="${model.image(5)}" width="60"></a>\n    <div class="info">\n        <h4><a class="" href="${model.showUrl}">${model.get(\'display_name\')}</a></h4>\n    </div>\n</div>\n					'}),define("views/analytics/profile_visitors",["jquery","underscore","tibbr","backbone","text!templates/analytics/user_visitors.html"],function(e,t,n,r,i){return n.View.extend({tagName:"tr",tmpl:'<td class="details"></td>',events:{"click a":"closeDialog"},initialize:function(){this.bindTo(this.model,"change",this.render,this)},render:function(){return this.$el.html(this.template.render(this.tmpl)),this.$el.find(".details").html(this.template.render(i,{model:this.model})),this},closeDialog:function(){this.options.parent.trigger("click:a")}})}),define("views/analytics/overlay_list",["jquery","underscore","tibbr","collections/recent_subjects","views/analytics/overlay_list_item","modules/common/views/common/see_more","modules/common/views/common/notice","views/analytics/poll_list","views/analytics/followers_list_item","views/analytics/subject_list","views/analytics/document_list","views/analytics/profile_visitors","models/message","models/user","models/subject"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return n.View.extend({tagName:"table",className:"trend-data-table",initialize:function(){t.bindAll(this,"render"),t.isString(this.options.id)&&(this.id=this.options.id),this.bindTo(this.collection,"reset",this.render),this.$el.html(e("<tbody/>"))},render:function(){var e=this.$("tbody").empty(),t,r=this,o=this.collection,h=0,v=this.options.readOnly,m=this.options.type;m==="messages"?o.each(function(n){h+=1,t=r.initChild(i,{model:n,collection:o,evaluteRecent:!0,readOnly:v,count:h,parent:r.options.parent});try{e.append(t.render().el),t.$(".js-action-target-link[data-target='dialog'], .overlay").removeClass("js-link js-action-target-link").click(function(){return!1}).css("cursor","default")}catch(s){console.error("MessageListView",n,s)}}):m==="followers"?o.each(function(t){h+=1;var n;n=new p(t.get("0")),e.append(r.initChild(a,{model:n,count:h,parent:r.options.parent}).render().el)}):m==="subject"?o.each(function(t){h+=1,e.append(r.initChild(f,{model:new d(t.attributes),count:h,parent:r.options.parent}).render().el)}):m==="poll"?o.each(function(t){h+=1,e.append(r.initChild(u,{model:t,count:h,parent:r.options.parent}).render().el)}):m==="documents"?o.each(function(t){h+=1,e.append(r.initChild(l,{model:t,count:h,parent:r.options.parent}).render().el)}):m==="profile_visitors"?o.each(function(t){e.append(r.initChild(c,{model:t,parent:r.options.parent}).render().el)}):m==="profile_update"&&o.each(function(t){e.append(r.initChild(c,{model:t,parent:r.options.parent}).render().el)}),o.fetched&&this.$(".more-tibs").remove(),this.collection.hasMorePages&&(this.seeMoreView=new s({collection:this.collection}),e.append('<tr><td class="see_more" colspan="2"></td></tr>'),e.find("td.see_more").append(this.seeMoreView.el));if(o.fetched&&o.length==0&&o.current_page===1)switch(m){case"subject":this.$el.append(n.translate("common.subject_not_found"));break;case"profile_visitors":this.$el.append("No one viewed your profile in last 7 days");break;case"profile_update":this.$el.append("No users updated their profile in last 7 days");break;default:this.$el.append(n.translate("common.message_not_found"))}return this}})}),define("text!templates/analytics/overlay_user_header.html",[],function(){return"<div class=\"media-box\">\r\n    <a href=\"${helper.url('users/'+model.user.get('id'))}\" class=\"profile-pic\">\r\n        {{html helper.imageTag(model.user.image(5), {'class':'bordered-2', 'style': 'height:130px;width:120px'}) }}\r\n    </a>\r\n\r\n    <div class=\"info\">\r\n        <h6><a class=\"active-name\"\r\n               href=\"${helper.url('users/'+model.user.get('id'))}\">${model.user.get('display_name')}</a></h6>\r\n\r\n        <p class=\"post-count most_posts\">\r\n            {{html t(\"analytics.leader_board.posts\",{'count':model.get('1')})}}\r\n            <span class=\"public\">{{= t('analytics.leader_board.public',{'count': model.get('3')}) }} </span><span\r\n                    class=\"private\">{{= t('analytics.leader_board.private',{'count': model.get('2')}) }} </span></p>\r\n\r\n        <p class=\"post-count most_followers\"><span> {{html t(\"analytics.leader_board.followers\",{'count':model.get('1')})}}</span>\r\n        </p>\r\n\r\n        <p class=\"post-count most_activity\">\r\n            {{html t(\"analytics.leader_board.posts\",{'count':model.get('1')})}}\r\n            <span class=\"public\">{{= t('analytics.leader_board.public',{'count': model.get('3')}) }} </span><span\r\n                class=\"private\">{{= t('analytics.leader_board.private',{'count': model.get('2')}) }} </span></p>\r\n    </div>\r\n</div>"}),define("text!templates/analytics/overlay_subject_header.html",[],function(){return"<div class=\"info\" style=\"margin-left: 0px !important;\">\r\n    <h3 style=\"font-weight: normal\">{{= t('analytics.leader_board.sub_headings.subject_'+ activity, {'count':count,  'subject_name':helper.str.truncate(model.subject.get('display_name'),20)} ) }}</h3>\r\n    <p class=\"mts most_posts\"><a class='got_to_sub' href=\"${url}\">${t('analytics.leader_board.go_to')}</a></p>\r\n    <p class=\"most_followers\" style=\"padding-top: 10px;padding-left: 10px\"><span style=\"font-size: 18px\">    ${model.get('1')} {{html t(\"analytics.leader_board.followers\",{'count':model.get('1')})}} </span>\r\n    </p>\r\n</div>"}),define("views/analytics/post_overlay",["jquery","underscore","tibbr","collections/chart_overlay_data","collections/chart_data","views/analytics/overlay_list","text!templates/analytics/overlay_user_header.html","text!templates/analytics/overlay_subject_header.html"],function(e,t,n,r,i,s,o,u){return n.View.extend({tagName:"div",className:"analytics-more-info",tmpl:'<div id="overlay_table_header" class="table-header" style="border-top: none"></div><div id="analytics_table_data" class="data-table-wrap"></div>',render:function(){this.$el.html(this.template.render(this.tmpl));var t=e(".level-3 input.filter"),n=this.parent.getFilters(),r=n[0],i=n[1],s=n[2],a=e(".level-1 input.filter").val(),f=t.val().replace(/_/g,"_"),l=t.val();return a==="user"?this.$("#overlay_table_header").append(this.template.render(o)):this.$("#overlay_table_header").append(this.template.render(u,{url:this.model.subject.urlFor("show"),count:this.options.count,activity:f})),this.showHeaderData(l),this.showData(r,i,s,a,l,this.options.target),this},showHeaderData:function(t){switch(t){case"most_posts":this.$el.find("p.most_followers").hide(),this.$el.find("p.most_activity").hide();break;case"most_followers":this.$el.find("p.most_posts").hide(),this.$el.find("p.most_activity").hide();break;case"most_activity":this.$el.find("p.most_followers").hide(),e(".level-1 input.filter").val()==="user"&&this.$el.find("p.most_posts").hide()}},showData:function(t,o,u,a,f,l){var c=this;o=o==="today"?n.Modules.Date.todayStartTime(n.currentUser.get("time_zone_offset")):o,o=o==="all_time"?undefined:o;var h={dimensions:t,metrics:u},p,d,v=this.model[a].id;switch(a){case"user":u==="message:count"&&t==="message:owner"?(h["filters[owner]"]=v,h["filters[scope]"]=e(l).hasClass("follower")?"private":"public"):h["filters[owner]"]=v;break;case"subject":h["filters[subject]"]=v}o===undefined?"":h.start_time=o;switch(f){case"most_posts":p=new r,d="messages";break;case"most_followers":delete h["filters[owner]"],a=="user"&&(h["filters[user]"]=v),p=new i,d="followers";break;case"most_activity":p=new r,delete h["filters[owner]"],h["filters[get_posts]"]=!0,a=="user"&&(h["filters[user]"]=v),d="messages"}var m=this.$("#analytics_table_data"),g=this;p.fetch({data:h,beforeSend:function(){var t=e(n.UI.loader).addClass("block");m.html(e("<div class='streams'/>").append(t))},success:function(){c.$(".got_to_sub").after(" "+c.t("analytics.leader_board.last_ten_posts",{count:p.length})),m.html(g.initChild(s,{collection:p,readOnly:!0,type:d,parent:c.options.parents}).render().el)}})}})}),define("hbs!templates/subjects/activity",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function p(e,t){var r="",i,s;return r+='\n        <a href="',s={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,s):f.call(e,"urlFor","show",e&&e.model,s)))+'" title="'+l((i=(i=e&&e.model,i==null||i===!1?i:i.display_name),typeof i===c?i.apply(e):i))+'" class="profile-pic" href="',s={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,s):f.call(e,"urlFor","show",e&&e.model,s)))+'">\n            <img src="',s={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.profile_image_url),3,s):f.call(e,"assetImage",(i=e&&e.model,i==null||i===!1?i:i.profile_image_url),3,s)))+'" class="medium" alt="'+l((i=(i=e&&e.model,i==null||i===!1?i:i.display_name),typeof i===c?i.apply(e):i))+'" />\n        </a>\n        ',r}function d(e,t){var r="",i,s,o;r+="\n        ",o={hash:{},inverse:h.noop,fn:h.program(4,v,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,e&&e.facet,"===","subject",o):f.call(e,"compare",e&&e.facet,"===","subject",o));if(s||s===0)r+=s;return r+="\n        ",r}function v(e,t){var r="",i,s;return r+='\n        <a href="',s={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,s):f.call(e,"urlFor","show",e&&e.model,s)))+'" class="profile-pic">\n            <img src="',s={hash:{},data:t},r+=l((i=n.assetImage||e&&e.assetImage,i?i.call(e,(i=e&&e.model,i==null||i===!1?i:i.subject_image_url),3,s):f.call(e,"assetImage",(i=e&&e.model,i==null||i===!1?i:i.subject_image_url),3,s)))+'" class="medium" />\n        </a>\n        ',r}function m(e,t){var r="",i,s,o;r+="\n                    ",o={hash:{},inverse:h.program(9,y,t),fn:h.program(7,g,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,e&&e.activity,"===","most_followers",o):f.call(e,"compare",e&&e.activity,"===","most_followers",o));if(s||s===0)r+=s;return r+="\n                ",r}function g(e,t){var r="",i,s,o;return r+='\n                        <li><a class="overlay" href="',o={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,o):f.call(e,"urlFor","show",e&&e.model,o)))+'" relCount="',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+'"><i class="ui-inline-icon followers-icon"></i><span class="count">',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+"</span>\n                        </a></li>\n                    ",r}function y(e,t){var r="",i,s,o;return r+='\n                        <li><a class="overlay" href="',o={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,o):f.call(e,"urlFor","show",e&&e.model,o)))+'" relCount="',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+'"><i class="ui-inline-icon post-icon"></i> <span class="count">',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+'</span></a></li>\n                        <li><a class="overlay" href="',o={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,o):f.call(e,"urlFor","show",e&&e.model,o)))+'" relCount="',(s=n.cnt_2)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_2,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+'"><i class="ui-inline-icon like-icon"></i> <span class="count">',(s=n.cnt_2)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_2,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+"</span></a></li>\n                    ",r}function b(e,t){var r="",i,s,o;r+="\n                    ",o={hash:{},inverse:h.program(9,y,t),fn:h.program(12,w,t),data:t},s=(i=n.compare||e&&e.compare,i?i.call(e,e&&e.activity,"===","most_followers",o):f.call(e,"compare",e&&e.activity,"===","most_followers",o));if(s||s===0)r+=s;return r+="\n                ",r}function w(e,t){var r="",i,s,o;return r+='\n                        <li><a class="overlay" href="',o={hash:{},data:t},r+=l((i=n.urlFor||e&&e.urlFor,i?i.call(e,"show",e&&e.model,o):f.call(e,"urlFor","show",e&&e.model,o)))+'" relCount="',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+'"><i class="ui-inline-icon followers-icon"></i><span class="count">',(s=n.cnt_1)?s=s.call(e,{hash:{},data:t}):(s=e&&e.cnt_1,s=typeof s===c?s.call(e,{hash:{},data:t}):s),r+=l(s)+"</span></a></li>\n                    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c="function",h=this;s+='<div class="action-wrap"></div>\n<div class="details">\n    <div class="media-box">\n        ',a={hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,t&&t.facet,"===","user",a):f.call(t,"compare",t&&t.facet,"===","user",a));if(u||u===0)s+=u;s+='\n\n        <div class="info">\n            <h6><a class="user-tip" href="',a={hash:{},data:i},s+=l((o=n.urlFor||t&&t.urlFor,o?o.call(t,"show",t&&t.model,a):f.call(t,"urlFor","show",t&&t.model,a)))+'">',a={hash:{},data:i},s+=l((o=n.truncate||t&&t.truncate,o?o.call(t,(o=t&&t.model,o==null||o===!1?o:o.display_name),30,a):f.call(t,"truncate",(o=t&&t.model,o==null||o===!1?o:o.display_name),30,a)))+'</a>\n            </h6>\n            <ul class="stats">\n                ',a={hash:{},inverse:h.program(11,b,i),fn:h.program(6,m,i),data:i},u=(o=n.compare||t&&t.compare,o?o.call(t,t&&t.facet,"===","user",a):f.call(t,"compare",t&&t.facet,"===","user",a));if(u||u===0)s+=u;return s+="\n            </ul>\n        </div>\n    </div>\n</div>",s})}),define("views/subjects/activity",["jquery","underscore","tibbr","modules/dialog","models/subject","models/user","views/analytics/post_overlay","modules/common/views/common/follow_button","modules/common/views/common/hover_profile","hbs!templates/subjects/activity"],function(e,t,n,r,i,s,o,u,a,f){return n.View.extend({tagName:"li",render:function(){var e=this.model.attributes,t=this.options.facet==="user"?e.get("4"):e.get("2");this.$el.html(this.renderTemplate(f,{model:e.get("0"),cnt_1:e.get("1"),cnt_2:t,facet:this.options.facet,activity:this.options.activity}));var r=this;return n.currentUser.batchActionOn([{target_class:e.get("0").json_class,target_id:e.get("0").id,only:"subscribe,unsubscribe"}]).done(function(t){r.options.facet==="user"?(e=new i(r.model.attributes.get("0")),r.profileHover(e)):(e=new s(r.model.attributes.get("0")),r.$(".profile-pic").qtip(n.qtipConfigs.hovercard(a,{model:!1,object:{context:"Subject",id:e.id}}))),e.set("actions",t.actions_array[0].actions),e.set("modelType",e.get("json_class")),r.followView=new u({model:e,showTips:!0}),r.$(".action-wrap").html(r.followView.render().el)}),this},profileHover:function(e){this.$(".profile-pic").qtip(n.qtipConfigs.hovercard(a,{model:!1,object:{context:"User",id:e.id,name:e._display_name}}))}})}),define("views/subjects/activities_list",["jquery","underscore","tibbr","models/subject","models/user","views/subjects/activity"],function(e,t,n,r,i,s){return n.View.extend({tagName:"ul",className:"striped",render:function(){var e=this,t;return this.collection.length===0?e.$el.append("<li>"+this.t("data_not_found",{name:this.t("common.global_search."+this.options.facet+"s")})+"</li>"):(this.collection.each(function(n){e.options.facet==="user"?t=new i(n):t=new r(n),e.$el.append(e.initChild(s,{model:t,count:0,parent:e.options.parent,facet:e.options.facet,activity:e.options.activity}).render().el)}),this.$("> li:even").addClass("even"),this.$("> li:odd").addClass("odd")),this}})}),define("hbs!templates/subjects/most_activity",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3></h3>\n<div class="wrap">\n    <div class="activity-tab-wrap">\n        <ul class="activity-tabs clearfix">\n            <li class="active"><a data-key="today">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"analytics.filters.today",u):a.call(t,"t","analytics.filters.today",u)))+'</a></li>\n            <li><a data-key="this_week">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"analytics.filters.this_week",u):a.call(t,"t","analytics.filters.this_week",u)))+'</a></li>\n            <li><a data-key="this_month">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"analytics.filters.this_month",u):a.call(t,"t","analytics.filters.this_month",u)))+'</a></li>\n            <li class="last"><a data-key="this_year">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"analytics.filters.this_year",u):a.call(t,"t","analytics.filters.this_year",u)))+'</a></li>\n        </ul>\n        <div class="activity-tabs-content">\n            <div id="today" class="activity-tab-content ui-state-active"></div>\n            <div id="this_week" class="activity-tab-content"></div>\n            <div id="this_month" class="activity-tab-content"></div>\n            <div id="this_year" class="activity-tab-content"></div>\n        </div>\n    </div>\n    <p class="see-more">\n        <a class="see-more-link more leader-board-more">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"analytics.filters.go_to_leaderboard",u):a.call(t,"t","analytics.filters.go_to_leaderboard",u)))+'<i class="chevron">»</i></a>\n    </p>\n</div>',s})}),define("views/subjects/most_activities",["jquery","underscore","tibbr","collections/chart_data","views/subjects/activities_list","hbs!templates/subjects/most_activity"],function(e,t,n,r,i,s){return n.View.extend({className:"block directory-widget ",initialize:function(e){this.level1=e.dimension,this.level2=e.metrics,this.start_time=e.start_time||n.Modules.Date.todayStartTime(n.currentUser.get("time_zone_offset")),this.end_time=e.end_time||"today";var t=this.getFilters(e.metrics||"most_posts",e.dimension||"user");this.dimension=t[0],this.metrics=t[2],this.collection=new r([],{dataParams:{page:1,per_page:3,dimensions:this.dimension,metrics:this.metrics,end_time:this.end_time}}),this.$el.addClass(e.parentDiv)},events:{"click .activity-tabs li a":"changeTab","click .leader-board-more":"gotoleaderboard"},render:function(){this.$el.html(this.renderTemplate(s)),this.$("h3").html(this.t("common."+this.options.parentDiv));var e=this;return this.fetch(),e.$("a[data-key=this_week]").trigger("click"),this},changeTab:function(t){var r=e(t.target),i=r.data("key");this.start_time=i==="today"?n.Modules.Date.todayStartTime(n.currentUser.get("time_zone_offset")):i,this.$("#"+i).html().length===0&&this.fetch(),this.$(".activity-tabs").find("li.active").removeClass("active"),this.$(".activity-tab-wrap").find(".activity-tab-content").removeClass("ui-state-active"),this.$(".activity-tab-wrap").find("#"+i).addClass("ui-state-active"),this.$(".activity-tabs li a[data-key="+i+"]").closest("li").addClass("active")},fetch:function(){var e=this;this.collection.dataParams.start_time=this.start_time,this.collection.fetch().done(function(){e.$(".level-1 input.filter").val(e.level1),e.$(".level-2 input.filter").val(e.level2),e.$(".level-3 input.filter").val(e.start_time),e.$(".ui-state-active").html(e.initChild(i,{collection:e.collection,parent:e,facet:e.level1,activity:e.level2}).render().el)})},getFilters:function(e,t){var n="today",r,i;switch(e){case"most_posts":r="message:count",t==="user"?i="message:owner":t==="subject"&&(i="message:subject");break;case"most_followers":t==="user"?(i="user:followers",r="user:count"):t==="subject"&&(i="followers:subject",r="followers:count");break;case"most_activity":r="message:count,like:count",t=="user"?i="user:object":t=="subject"&&(i="subject:object")}return[i,n,r]},gotoleaderboard:function(){(new Date(this.start_time.split(" ")[0])).getTime()>0&&(this.start_time="today"),n.redirectTo("insight/leader_board?Name=Leaderborads&filter1="+this.level1+"&filter2="+this.level2+"&filter3="+this.start_time)}})}),define("modules/linked_in",["jquery","underscore","backbone","tibbr"],function(e,t,n,r){var i=function(e){if(r.LinkedIn)return r.LinkedIn;this.version=e||100,this.config=r.appConfig("client_stream","config","linked_in",this.version,{"default":{client_config:{app_id:""}}}),this.apiKey=this.config.client_config.app_id,this.enabled=!t.isEmpty(this.apiKey),r.currentUser&&r.currentUser.on("logout",this.logout)};return t.extend(i.prototype,n.Event,{connect:function(){var t;window.IN=t;var n=e.Deferred(),r=this;return window.IN&&window.IN.User&&window.IN.User.isAuthorized()?n.resolve(window.IN):(window.__linkedLoad=function(){n.resolve(window.IN)},e.getScript("//platform.linkedin.com/in.js?async=true").done(function(){window.IN.init({api_key:r.apiKey,authorize:!0,onLoad:"__linkedLoad"})}).fail(function(e){n.reject(e)}),n.promise())},loginUI:function(){return window.IN.UI.Authorize().place()},logout:function(){if(this.enabled)return window.IN.User.logout()},profileTemplate:'<script type="IN/MemberProfile" id="linked-in" data-id="{{this.url}}" data-format="inline" data-related="false"></script>'}),r.LinkedIn=new i,r.LinkedIn}),define("hbs!templates/home/eval_invite_colleagues",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="clearfix phl mvl">\r\n    <p class="mbl">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.line1",u):a.call(t,"t","invite_to_join.line1",u)))+'</p>\r\n    <span class="invite-btn mbxl">\r\n        <a class="linkedin clearfix" id="mylinkedin" href="#" title="',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_linkedin_btn",u):a.call(t,"t","invite_to_join.invite_linkedin_btn",u)))+'"><i></i><span>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_btn_txt",u):a.call(t,"t","invite_to_join.invite_btn_txt",u)))+'</span></a>\r\n    </span>\r\n    <span class="invite-btn">\r\n        <a class="email clearfix"  href="mailto:?subject=',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.subject",u):a.call(t,"t","invite_to_join.subject",u)))+"&body=",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.hi",u):a.call(t,"t","invite_to_join.hi",u)))+"%0D%0A%0D%0A",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_message",u):a.call(t,"t","invite_to_join.invite_message",u)))+"%0D%0A",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.message_line1",u):a.call(t,"t","invite_to_join.message_line1",u)))+"%0D%0A%0D%0A",u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.message_line2",u):a.call(t,"t","invite_to_join.message_line2",u)))+'"><i></i><span>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_email_contacts",u):a.call(t,"t","invite_to_join.invite_email_contacts",u)))+"</span></a>\r\n    </span>\r\n</div>",s})}),define("hbs!templates/home/invitation_sent",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="invite-sent-wrap">\n	<p class="app-detail">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_sent",u):a.call(t,"t","invite_to_join.invite_sent",u)))+'</p>\n\n	<div class="action-wrap">\n		<a class="btn btn-submit message" href="javascript:void(0);">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.ok",u):a.call(t,"t","common.ok",u)))+"</a>\n	</div>\n</div>",s})}),define("views/home/invitation_sent",["jquery","underscore","tibbr","modules/dialog","hbs!templates/home/invitation_sent"],function(e,t,n,r,i){return n.View.extend({render:function(){return this.$el.html(this.renderTemplate(i)),this},events:{"click .btn-submit":"closeOverlay"},closeOverlay:function(){r.close()}})}),define("hbs!templates/home/linkedin_colleagues",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='    <p class="app-detail">',u={hash:{count:0},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.line2",u):a.call(t,"t","invite_to_join.line2",u)))+'</p>\n    <div class="users-list-wrap">\n        <div class="select-all-wrap">\n            <div class="rfloat">\n                <span class="count">',u={hash:{count:0},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"evaluation.invite_colleagues.selected_count",u):a.call(t,"t","evaluation.invite_colleagues.selected_count",u)))+'</span>\n            </div>\n            <div class="media-box custom-input-box">\n                <div class="option-btn checkbox checked">\n                    <input type="checkbox" id="select_all" checked/>\n                </div>\n                <div class="input-option-label">\n                    <label>\n                        ',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"evaluation.invite_colleagues.select_all",u):a.call(t,"t","evaluation.invite_colleagues.select_all",u)))+'\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="table-wrap" style="min-height:450px;">\n            <table class="users-list">\n            </table>\n        </div>\n    </div>\n    <div class="action-wrap">\n            <button id="invite-next" class="btn btn-submit message">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"evaluation.invite_colleagues.invite_btn",u):a.call(t,"t","evaluation.invite_colleagues.invite_btn",u)))+'</button>\n    </div>\n    <input type="hidden" name = "message" value="',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"evaluation.invite_colleagues.invite_message",u):a.call(t,"t","evaluation.invite_colleagues.invite_message",u)))+'"/>',s})}),define("views/home/linkedin_colleagues",["jquery","underscore","tibbr","modules/dialog","views/home/invitation_sent","hbs!templates/home/linkedin_colleagues"],function(e,t,n,r,s,o){return n.View.extend({className:"invite-users-wrap",initialize:function(){this.totalRecords=0,this.fetchedRecords=0,this.currentPage=0,this.totalPages=0,this.all_connections=[],this.connections=[],this.invalidCon=[]},render:function(){return this.$el.html(this.renderTemplate(o)),this.getPeopleList(),this},events:{"click #invite-next":"linkedinInvite","click a.emailInvite":"emailInvite","change input#select_all":"selectAll","click .users-list div.checkbox":"checkUncheck"},linkedinInvite:function(){var t=[];e(".users-list input:checked").each(function(){var n=e(this).val(),r={person:{_path:"/people/"+n}};t.push(r)}),t.length>=1?this.sendMessage(t):alert(this.t("invite_to_join.invite_error"))},tmpl:'                <td>                <div class="wrap">                  <div class="media-box custom-input-box">                    <div class="option-btn checkbox checked">                      <input class="hidden" type="checkbox" name="users[]" value="{{model.id}}"  checked/>                    </div>                    <div class="input-option-label">                      <div class="media-box">                        <a href="{{model.publicProfileUrl}}" class="profile-pic">                          {{#if model.pictureUrl}}                          <img src="{{model.pictureUrl}}" />                          {{else}}                          <img src="/tibbr/images/people60-60.png" />                          {{/if}}                        </a>                        <div class="info">                          <h6><a href="{{model.publicProfileUrl}}" class="profile-name">{{model.firstName}} {{model.lastName}}</a></h6>                          <p title="{{model.headline}}">{{model.headline}}</p>                        </div>                      </div>                    </div>                  </div>                </div>              </td>',getPeopleList:function(){var t=this;e(".users-list").html(n.UI.lineLoader),IN.API.PeopleSearch().fields("id","firstName","lastName","headline","positions","distance","siteStandardProfileRequest","pictureUrl;secure=true","publicProfileUrl").params({"company-name":n.currentUser.get("company"),"current-company":!0,count:24,sort:"distance",facet:"network,F"}).result(function(e){t.totalRecords=e.people._total-1,t.displayPeopleList(e),t.fetchedRecords=24;var n=parseInt(t.totalRecords/24),r=t.totalRecords%24;t.totalPages=n,r>0&&(t.totalPages=t.totalPages+1),t.currentPage=1,t.currentPage<t.totalPages&&t.morePages()}).error(function(t){alert(t.message)})},morePages:function(){var e=this;IN.API.PeopleSearch().fields("id","firstName","lastName","headline","positions","distance","siteStandardProfileRequest","pictureUrl;secure=true","publicProfileUrl").params({"company-name":n.currentUser.get("company"),"current-company":!0,count:24,start:e.fetchedRecords+1,sort:"distance",facet:"network,F"}).result(function(t){e.currentPage=e.currentPage+1,e.fetchedRecords=e.fetchedRecords+24,e.displayPeopleList(t),e.currentPage<e.totalPages&&e.morePages()}).error(function(t){alert(t.message)})},displayPeopleList:function(t){var n=this;n.all_connections=t.people.values,e("#all_connections").html(t.people._total);for(i in n.all_connections)n.all_connections[i].distance>=1?n.connections.push(n.all_connections[i]):n.invalidCon.push(n.all_connections[i]);e(".line-loader").remove(),n.renderUsers(n.connections)},renderUsers:function(t){var n=0,r,i;e(".users-list").html("");var s=[],o=[];e.each(t,function(t,n){e.inArray(n.id,s)==-1&&(s.push(n.id),o.push(n))});while(o.length>=n){var u=o.slice(n,n+=2);if(u.length>=1){var a=u[0];if(a.firstName){r=this.renderInLineTemplate(this.tmpl,{model:a});var f=u[1];f&&f.firstName?i=this.renderInLineTemplate(this.tmpl,{model:f}):i="<td>&nbsp;</td>",final_tr="<tr>"+r+i+"</tr>",e(".users-list").append(final_tr)}}}var l=e(".users-list input:checkbox");e("#selected_count").html(l.length),e("#all_connections").html(l.length)},checkUncheck:function(t){var n=e(t.target),r=e(t.target).hasClass("checked");r?(e(t.target).removeClass("checked"),n.find("input:checkbox").prop("checked","")):(e(t.target).addClass("checked"),n.find("input:checkbox").prop("checked","checked")),e("#selected_count").html(e(".users-list input:checked").length)},selectAll:function(t){var n=e(".users-list-wrap input[type='checkbox']"),r=e(t.target).is(":checked");n.prop("checked",r),e("#selected_count").html(e(".users-list input:checked").length),r?n.parent(".checkbox").addClass("checked"):n.parent(".checkbox").removeClass("checked")},sendMessage:function(e){var t=this;n.tracker.push("invite_linkedin_colleagues",n.currentUser.id);var i=this.t("evaluation.invite_colleagues.invite_message")+"\n"+"\n"+this.t("evaluation.invite_colleagues.message_line2",{path:n.appConfig("site","config","site_root")}),o={recipients:{values:e},subject:this.t("evaluation.invite_colleagues.subject"),body:i};IN.API.Raw("/people/~/mailbox").method("POST").body(JSON.stringify(o)).result(function(){r.close(),r.render(s,{autoOpen:!1,resizable:!0,modal:!0,width:"auto",height:"auto",dialog:{title:t.t("invite_to_join.invitation_sent"),className:"tibbr-ui-dialog with-title linkedin-dialog"}})}).error(function(t){alert(t.message)})}})}),define("views/home/linkedin_invite_colleagues",["jquery","underscore","tibbr","modules/dialog","hbs!templates/home/eval_invite_colleagues","views/home/linkedin_colleagues"],function(e,t,n,r,i,s){return n.View.extend({className:"profile-wrap",render:function(){return this.$el.html(this.renderTemplate(i)),this}})}),define("hbs!templates/home/eval_invite_colleagues_button",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<h3 class="linkedin_invitation">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_your_team",u):a.call(t,"t","invite_to_join.invite_your_team",u)))+'<i class="left-corner"></i></h3>\r\n<div class="js-linkedin_invitation block wrap">\r\n    <div class="media-box"></div>\r\n</div><!--end of .wrap-->',s})}),define("hbs!templates/home/zero_colleagues",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='    <p class="app-detail">',u={hash:{company:t&&t.company_name},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"evaluation.invite_colleagues.zero_connections",u):a.call(t,"t","evaluation.invite_colleagues.zero_connections",u)))+'</p>\n    <div class="action-wrap">\n            <button id="invite-ok" class="btn btn-submit" >',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"common.ok",u):a.call(t,"t","common.ok",u)))+"</button>\n    </div>",s})}),define("views/home/zero_colleagues",["jquery","underscore","tibbr","modules/dialog","hbs!templates/home/zero_colleagues"],function(e,t,n,r,i){return n.View.extend({className:"invite-users-wrap",render:function(){return this.$el.html(this.renderTemplate(i,{company_name:n.currentUser.get("company")})),this},events:{"click #invite-ok":"closeDialog"},closeDialog:function(){r.close()}})}),define("views/home/linkedin_invite_colleagues_button",["jquery","underscore","tibbr","modules/overlay","modules/dialog","modules/linked_in","views/common/preference_view","views/home/linkedin_invite_colleagues","views/home/linkedin_colleagues","hbs!templates/home/eval_invite_colleagues_button","views/home/zero_colleagues"],function(e,t,n,r,i,s,o,u,a,f,l){return o.extend({className:"linkedin_invitation block",initialize:function(){t.bindAll(this,"render"),o.prototype.initialize.call(this)},render:function(){return this.$el.html(this.renderTemplate(f)),this.$(".media-box").html(this.initChild(u).render().el),this.setToggle(),this},events:{"click a#mylinkedin":"linkedinInvite"},linkedinInvite:function(){var e=this;s.connect().done(function(t){var n=function(){e.renderLinkedinDialog()};t&&t.User.isAuthorized()?n():(t.UI.Authorize().params({scope:["r_basicprofile","r_network","w_messages"]}).place(),t.Event.on(t,"auth",n))}).fail(function(e){console.log("linkedin:Fail",e)})},renderLinkedinDialog:function(){var e=this;IN.API.PeopleSearch().fields("id","firstName","lastName","headline","positions","distance","siteStandardProfileRequest","pictureUrl;secure=true","publicProfileUrl").params({"company-name":n.currentUser.get("company"),"current-company":!0,count:4,sort:"distance",facet:"network,F"}).result(function(t){t.numResults>=2?i.render(a,{autoOpen:!1,resizable:!0,modal:!0,width:"auto",height:"auto",dialog:{title:e.t("evaluation.invite_colleagues.header_text"),className:"tibbr-ui-dialog with-title linkedin-dialog"}}):i.render(l,{autoOpen:!1,resizable:!0,modal:!0,width:"auto",height:"auto",dialog:{title:e.t("evaluation.invite_colleagues.header_text"),className:"tibbr-ui-dialog with-title linkedin-dialog"}})})}})}),define("hbs!templates/home/invite_colleagues_block",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="invite-colleagues-wrap">\r\n    <span class="info-icon"></span>\r\n    <label class="label">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.tip",u):a.call(t,"t","invite_to_join.tip",u)))+' </label>\r\n    <p class="text"><i class="ui-inline-icon invite-icon"></i> <span>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"invite_to_join.invite_colleagues_today",u):a.call(t,"t","invite_to_join.invite_colleagues_today",u)))+"</span></p>\r\n</div>",s})}),define("views/home/invite_colleagues_block",["jquery","underscore","tibbr","modules/overlay","views/common/preference_view","views/home/invite_people","hbs!templates/home/invite_colleagues_block"],function(e,t,n,r,i,s,o){return i.extend({className:"invite_colleagues_block block",initialize:function(){t.bindAll(this,"render"),i.prototype.initialize.call(this)},render:function(){return this.$el.html(this.renderTemplate(o)),this},events:{"click .invite-colleagues-wrap p.text":"invitePeople"},invitePeople:function(){var e=new s;return r.view(e.render().el),this.storeChild(e),!1}})}),define("hbs!templates/home/follow_us_on",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="social-widgets">\n    <h3>',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.follow_us",u):a.call(t,"t","home.follow_us",u)))+'</h3>\n    <ul>\n        <li><a href="https://www.facebook.com/tibbr.live" class="social-icons facebook">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.facebook",u):a.call(t,"t","home.facebook",u)))+'</a></li>\n        <li><a href="https://twitter.com/tibbr" class="social-icons twitter">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.twitter",u):a.call(t,"t","home.twitter",u)))+'</a></li>\n        <li><a href="https://www.linkedin.com/groups/tibbr-3977473" class="social-icons linkedin">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.linkedin",u):a.call(t,"t","home.linkedin",u)))+'</a></li>\n        <li><a href="http://www.youtube.com/user/tibbrTV" class="social-icons you-tube">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.youtube",u):a.call(t,"t","home.youtube",u)))+'</a></li>\n        <li><a href="http://instagram.com/tibbr#" class="social-icons ig">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.ig",u):a.call(t,"t","home.ig",u)))+'</a></li>\n        <li><a href="http://feeds.feedburner.com/EnterpriseSocialNetworkBlog" class="social-icons rss">',u={hash:{},data:i},s+=f((o=n.t||t&&t.t,o?o.call(t,"home.rss",u):a.call(t,"t","home.rss",u)))+"</a></li>\n    </ul>\n</div>",s})}),define("views/common/right_nav",["jquery","underscore","tibbr","collections/global_announcement","collections/subject_announcement","collections/recent_subjects","collections/popular_subjects","collections/chart_data","modules/dialog","views/home/share_on_tibbr","views/home/customize_nav","views/home/new_to_tibbr_list","views/home/new_tips_list","views/announcements/announcement_list","views/calendars/upcoming_event_list","views/home/contact_sales","views/home/eval_statistics","views/home/invite_colleagues_button","views/subjects/timeline","views/home/what_happening","views/home/popular_conversation_list","views/subjects/right_list","modules/common/views/resource/links_right_nav","modules/common/views/resource/assets_right_nav","views/subjects/recent_list","views/subjects/popular_list","views/subjects/right_side_subject_follower","views/resource/share_user_list","views/apps/resource_insight","views/subjects/most_activities","views/home/linkedin_invite_colleagues_button","views/home/invite_colleagues_block","hbs!templates/home/follow_us_on"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_){return n.View.extend({className:"js-right-nav",events:{"click a.js-see-more-conversation":"showPopularConversation"},initialize:function(){t.bindAll(this,"render","renderItems");var e=t.clone(n.appConfig("ui_config","config","right_nav",{"default":{}}));this.configs=t.select(e.items,function(e){return n.configuration.execute(e.enable)}),this.model=this.model||n.currentUser},render:function(){return e.when(n.currentUser.preferences.all()).then(this.renderItems),this},renderItems:function(){var e=this,r=e.params()||{},i=t.clone(n.appConfig("ui_config","config","right_nav","order_by",{"default":""}));return i==="app"&&t.defer(function(){e.renderApps()}),t.each(this.configs,function(i){var s=n.currentUser.preferences.withName("webclient.right_nav",i.key),o=s&&s.get("value")==="-1";!o&&t.str.include(i.show_on,r.controller+":"+r.action)&&(e.$el.append("<div class='"+i.key+" block"+"'></div> "),t.isEmpty(i.url)?t.defer(function(){e._try(i.handler,[i],function(e){console.log("right_nav",i,e)})}):t.defer(function(){e.buildNav(i)}))}),i!="app"&&t.defer(function(){e.renderApps()}),this},shareOnTibbr:function(e){this.$(".share_on_tibbr").replaceWith(this.initChild(f,{nav:e}).render().el)},buildNav:function(e){this.$("."+e.key).replaceWith(this.initChild(l,{header:this.t("common.right_bar."+e.key),nav:e}).render().el)},renderApps:function(){try{var e=this,r=(this.mapAppKeys()||"").split("|");t.each(n.currentUser.subscribedFilters.urlsType(r[0]),function(t){e.$el.append(e.initChild(l,{header:t.get("title"),nav:{key:t.get("name"),url:t.url(r[1]+"="+e.model.id),height:t.get("height")}}).render().el)})}catch(i){console.log("right.nav:renderApps",i)}},mapAppKeys:function(){var e={"explore:my_people":"user_directory|user_id","explore:people_directory":"user_directory|user_id","subjects:my_subjects":"subject_directory|user_id","subjects:directory":"subject_directory|user_id"};return e[this.params().controller+":"+this.params().action]},contactSales:function(e){this.$(".contact_sales").append(this.initChild(v,{nav:e}).render().el)},evalStatistics:function(){this.$(".stat_meter").append(this.initChild(m).render().el)},newToTibbrProgress:function(e){this.$(".new_to_tibbr").append(this.initChild(c,{nav:e}).render().el)},newToTibbr:function(e){this.$(".new_to_tibbr").replaceWith(this.initChild(h,{nav:e}).render().el)},inviteToTibbr:function(e){this.$(".invite_to_tibbr").replaceWith(this.initChild(g,{nav:e}).render().el)},upcomingEvents:function(e){this.$(".upcoming_events").replaceWith(this.initChild(d,{nav:e,header:this.t("common."+e.key),model:this.model,from:this.params().controller,id:this.params().id}).render().el)},announcement:function(e){this.params().controller==="subjects"?this.subjectAnnouncement(e):this.globalAnnouncement(e)},globalAnnouncement:function(e){var t=this,i=new r([],{scopeId:n.currentUser.id,dataParams:{params:{page:1,per_page:5,set_actions:!0}}}),s=this.initChild(p,{collection:i,from:"global",nav:e});this.$(".announcement").addClass("hidden"),i.getOrFetch({cacheKey:"global_announcement"}).done(function(){t.$(".announcement").replaceWith(s.render().el)})},subjectAnnouncement:function(e){var t=this,r=this.model.id,s=new i([],{scopeId:n.currentUser.id,dataParams:{params:{subject_id:r,page:1,per_page:5,set_actions:!0}}}),o=this.initChild(p,{collection:s,from:"subject",subject_id:r,nav:e});s.fetch().done(function(){t.$(".announcement").replaceWith(o.render().el)})},whatHappening:function(e){this.$(".what_happening").replaceWith(this.initChild(b,{nav:e}).render().el)},popularConversations:function(e){var t=new u,n=this;t.getOrFetch({cacheKey:"popular_conversations",global:!1,data:{metrics:"reply:count,like:count",dimensions:"message:object",last_n_days:7}}).done(function(){n.$(".popular_conversations").replaceWith(n.initChild(w,{nav:e,collection:t,from:"right_nav"}).render().el)})},showPopularConversation:function(){var e=new u;e.getOrFetch({data:{metrics:"reply:count,like:count",dimensions:"message:object",last_n_days:7}}).done(function(){a.render(w,{parent:this,nav:undefined,collection:e,dialog:{width:500,className:"customer-network-overlay"}})})},renderBlocks:function(e){var t=this.$("."+e.nav.key);e=e||{},e.header=e.header||this.t("subject.right_nav."+e.nav.key);var n=this.initChild(E,e);t.replaceWith(n.render().el)},subjectLinks:function(e){this.model.get("modelType")==="Resource"&&(e.className="resource-block"),this.renderBlocks({collection:this.model.links,perPage:5,nav:e,model:this.model,isOwner:this.model.isOwner(),itemView:S,ulId:"links"})},subjectAssets:function(e){this.model.get("modelType")==="Resource"&&(e.className="resource-block"),this.renderBlocks({collection:this.model.assets,perPage:5,nav:e,model:this.model,itemView:x,ulId:"files"})},recentSubjects:function(e){var t=new s,n=this;t.getOrFetch({cacheKey:"recent_subjects",data:{params:{per_page:3,set_actions:!0}}}).done(function(){n.$(".recent_subjects").replaceWith(n.initChild(T,{nav:e,collection:t}).render().el)})},popularSubjects:function(e){var t=new u,n=this;t.getOrFetch({cacheKey:"popular_subjects",global:!1,data:{metrics:"message:count,like:count",dimensions:"subject:object",last_n_days:7}}).done(function(){n.$(".popular_subjects").replaceWith(n.initChild(N,{nav:e,collection:t}).render().el)})},followers:function(e){var t=this.initChild(C,{nav:e,model:this.model,collection:this.model.followers,seeMoreUrl:this.model.urlFor("followers"),className:"resource-block block",canEdit:!1});t.bindTo(t.model,"resource:followers",function(){t.collection.fetch()}),this.$(".followers").replaceWith(t.render().el).addClass("block")},owners:function(e){this.$(".owners").replaceWith(this.initChild(C,{nav:e,model:this.model,collection:this.model.owners,seeMoreUrl:this.model.urlFor("owners"),className:"resource-block block",canEdit:!1,title:n.translate("subject.owners")}).render().el).addClass("block")},ResourceLikes:function(e){var t=this.initChild(C,{nav:e,model:this.model,collection:this.model.likers,seeMoreUrl:this.model.urlFor("likers"),className:"resource-block block",canEdit:!1,title:n.translate("resource.people_who_like_it")});t.bindTo(t.model,"og:likes",function(){t.collection.fetch()}),this.$(".resource_likes").replaceWith(t.render().el).addClass("block")},ResourceShares:function(e){var t=this.initChild(k,{nav:e,model:this.model,collection:this.model.sharers,seeMoreUrl:this.model.urlFor("sharers"),canEdit:!1});this.$(".resource_shares").replaceWith(t.render().el)},followUsOn:function(){this.$(".social_widgets").replaceWith(_)},ResourceInsights:function(e){var t=this.initChild(L,{nav:e,model:this.model,seeMoreUrl:this.model.urlFor(""),canEdit:!1});this.$(".resource_insights").replaceWith(t.render().el)},subjectsMostActivity:function(){var e=this.initChild(A,{metrics:"most_activity",dimension:"subject",parentDiv:"subjects_with_most_activity"});this.$(".subjects_with_most_activity").replaceWith(e.render().el)},subjectsMostFollowers:function(){var e=this.initChild(A,{metrics:"most_followers",dimension:"subject",parentDiv:"subjects_with_most_followers"});this.$(".subjects_with_most_followers").replaceWith(e.render().el)},usersMostActivity:function(){var e=this.initChild(A,{metrics:"most_activity",dimension:"user",parentDiv:"users_with_most_activity"});this.$(".users_with_most_activity").replaceWith(e.render().el)},usersMostFollowers:function(){var e=this.initChild(A,{metrics:"most_followers",dimension:"user",parentDiv:"users_with_most_followers"});this.$(".users_with_most_followers").replaceWith(e.render().el)},linkedinInvitation:function(e){this.$(".linkedin_invitation").replaceWith(this.initChild(O,{nav:e}).render().el)},inviteColleaguesBlock:function(e){this.$(".invite_colleagues_block").replaceWith(this.initChild(M,{nav:e}).render().el)}})})})();